{"code":"!function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(e,\"__esModule\",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&\"object\"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,\"default\",{enumerable:!0,value:e}),2&t&&\"string\"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,\"a\",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p=\"\",n(n.s=84)}([function(e,t,n){\"use strict\";var r=n(3),i=n(29),s=n(16),o=n(60),a=n(11);function l(e){return e}function c(e,t){for(var n=0;n<e.length;++n)t[n]=255&e.charCodeAt(n);return t}t.newBlob=function(e,n){t.checkSupport(\"blob\");try{return new Blob([e],{type:n})}catch(t){try{var r=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return r.append(e),r.getBlob(n)}catch(e){throw new Error(\"Bug : can't construct the Blob.\")}}};var h={stringifyByChunk:function(e,t,n){var r=[],i=0,s=e.length;if(s<=n)return String.fromCharCode.apply(null,e);for(;i<s;)\"array\"===t||\"nodebuffer\"===t?r.push(String.fromCharCode.apply(null,e.slice(i,Math.min(i+n,s)))):r.push(String.fromCharCode.apply(null,e.subarray(i,Math.min(i+n,s)))),i+=n;return r.join(\"\")},stringifyByChar:function(e){for(var t=\"\",n=0;n<e.length;n++)t+=String.fromCharCode(e[n]);return t},applyCanBeUsed:{uint8array:function(){try{return r.uint8array&&1===String.fromCharCode.apply(null,new Uint8Array(1)).length}catch(e){return!1}}(),nodebuffer:function(){try{return r.nodebuffer&&1===String.fromCharCode.apply(null,s.allocBuffer(1)).length}catch(e){return!1}}()}};function u(e){var n=65536,r=t.getTypeOf(e),i=!0;if(\"uint8array\"===r?i=h.applyCanBeUsed.uint8array:\"nodebuffer\"===r&&(i=h.applyCanBeUsed.nodebuffer),i)for(;n>1;)try{return h.stringifyByChunk(e,r,n)}catch(e){n=Math.floor(n/2)}return h.stringifyByChar(e)}function d(e,t){for(var n=0;n<e.length;n++)t[n]=e[n];return t}t.applyFromCharCode=u;var f={};f.string={string:l,array:function(e){return c(e,new Array(e.length))},arraybuffer:function(e){return f.string.uint8array(e).buffer},uint8array:function(e){return c(e,new Uint8Array(e.length))},nodebuffer:function(e){return c(e,s.allocBuffer(e.length))}},f.array={string:u,array:l,arraybuffer:function(e){return new Uint8Array(e).buffer},uint8array:function(e){return new Uint8Array(e)},nodebuffer:function(e){return s.newBufferFrom(e)}},f.arraybuffer={string:function(e){return u(new Uint8Array(e))},array:function(e){return d(new Uint8Array(e),new Array(e.byteLength))},arraybuffer:l,uint8array:function(e){return new Uint8Array(e)},nodebuffer:function(e){return s.newBufferFrom(new Uint8Array(e))}},f.uint8array={string:u,array:function(e){return d(e,new Array(e.length))},arraybuffer:function(e){return e.buffer},uint8array:l,nodebuffer:function(e){return s.newBufferFrom(e)}},f.nodebuffer={string:u,array:function(e){return d(e,new Array(e.length))},arraybuffer:function(e){return f.nodebuffer.uint8array(e).buffer},uint8array:function(e){return d(e,new Uint8Array(e.length))},nodebuffer:l},t.transformTo=function(e,n){if(n||(n=\"\"),!e)return n;t.checkSupport(e);var r=t.getTypeOf(n);return f[r][e](n)},t.getTypeOf=function(e){return\"string\"==typeof e?\"string\":\"[object Array]\"===Object.prototype.toString.call(e)?\"array\":r.nodebuffer&&s.isBuffer(e)?\"nodebuffer\":r.uint8array&&e instanceof Uint8Array?\"uint8array\":r.arraybuffer&&e instanceof ArrayBuffer?\"arraybuffer\":void 0},t.checkSupport=function(e){if(!r[e.toLowerCase()])throw new Error(e+\" is not supported by this platform\")},t.MAX_VALUE_16BITS=65535,t.MAX_VALUE_32BITS=-1,t.pretty=function(e){var t,n,r=\"\";for(n=0;n<(e||\"\").length;n++)r+=\"\\\\x\"+((t=e.charCodeAt(n))<16?\"0\":\"\")+t.toString(16).toUpperCase();return r},t.delay=function(e,t,n){o(function(){e.apply(n||null,t||[])})},t.inherits=function(e,t){var n=function(){};n.prototype=t.prototype,e.prototype=new n},t.extend=function(){var e,t,n={};for(e=0;e<arguments.length;e++)for(t in arguments[e])arguments[e].hasOwnProperty(t)&&void 0===n[t]&&(n[t]=arguments[e][t]);return n},t.prepareContent=function(e,n,s,o,l){return a.Promise.resolve(n).then(function(e){return r.blob&&(e instanceof Blob||-1!==[\"[object File]\",\"[object Blob]\"].indexOf(Object.prototype.toString.call(e)))&&\"undefined\"!=typeof FileReader?new a.Promise(function(t,n){var r=new FileReader;r.onload=function(e){t(e.target.result)},r.onerror=function(e){n(e.target.error)},r.readAsArrayBuffer(e)}):e}).then(function(n){var h,u=t.getTypeOf(n);return u?(\"arraybuffer\"===u?n=t.transformTo(\"uint8array\",n):\"string\"===u&&(l?n=i.decode(n):s&&!0!==o&&(n=c(h=n,r.uint8array?new Uint8Array(h.length):new Array(h.length)))),n):a.Promise.reject(new Error(\"Can't read the data of '\"+e+\"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?\"))})}},function(e,t,n){\"use strict\";function r(e){this.name=e||\"default\",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}r.prototype={push:function(e){this.emit(\"data\",e)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit(\"end\"),this.cleanUp(),this.isFinished=!0}catch(e){this.emit(\"error\",e)}return!0},error:function(e){return!this.isFinished&&(this.isPaused?this.generatedError=e:(this.isFinished=!0,this.emit(\"error\",e),this.previous&&this.previous.error(e),this.cleanUp()),!0)},on:function(e,t){return this._listeners[e].push(t),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(e,t){if(this._listeners[e])for(var n=0;n<this._listeners[e].length;n++)this._listeners[e][n].call(this,t)},pipe:function(e){return e.registerPrevious(this)},registerPrevious:function(e){if(this.isLocked)throw new Error(\"The stream '\"+this+\"' has already been used.\");this.streamInfo=e.streamInfo,this.mergeStreamInfo(),this.previous=e;var t=this;return e.on(\"data\",function(e){t.processChunk(e)}),e.on(\"end\",function(){t.end()}),e.on(\"error\",function(e){t.error(e)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;this.isPaused=!1;var e=!1;return this.generatedError&&(this.error(this.generatedError),e=!0),this.previous&&this.previous.resume(),!e},flush:function(){},processChunk:function(e){this.push(e)},withStreamInfo:function(e,t){return this.extraStreamInfo[e]=t,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var e in this.extraStreamInfo)this.extraStreamInfo.hasOwnProperty(e)&&(this.streamInfo[e]=this.extraStreamInfo[e])},lock:function(){if(this.isLocked)throw new Error(\"The stream '\"+this+\"' has already been used.\");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var e=\"Worker \"+this.name;return this.previous?this.previous+\" -> \"+e:e}},e.exports=r},function(e,t){e.exports=require(\"stream\")},function(e,t,n){\"use strict\";if(t.base64=!0,t.array=!0,t.string=!0,t.arraybuffer=\"undefined\"!=typeof ArrayBuffer&&\"undefined\"!=typeof Uint8Array,t.nodebuffer=\"undefined\"!=typeof Buffer,t.uint8array=\"undefined\"!=typeof Uint8Array,\"undefined\"==typeof ArrayBuffer)t.blob=!1;else{var r=new ArrayBuffer(0);try{t.blob=0===new Blob([r],{type:\"application/zip\"}).size}catch(e){try{var i=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);i.append(r),t.blob=0===i.getBlob(\"application/zip\").size}catch(e){t.blob=!1}}}try{t.nodestream=!!n(22).Readable}catch(e){t.nodestream=!1}},function(e,t,n){\"use strict\";var r=\"undefined\"!=typeof Uint8Array&&\"undefined\"!=typeof Uint16Array&&\"undefined\"!=typeof Int32Array;function i(e,t){return Object.prototype.hasOwnProperty.call(e,t)}t.assign=function(e){for(var t=Array.prototype.slice.call(arguments,1);t.length;){var n=t.shift();if(n){if(\"object\"!=typeof n)throw new TypeError(n+\"must be non-object\");for(var r in n)i(n,r)&&(e[r]=n[r])}}return e},t.shrinkBuf=function(e,t){return e.length===t?e:e.subarray?e.subarray(0,t):(e.length=t,e)};var s={arraySet:function(e,t,n,r,i){if(t.subarray&&e.subarray)e.set(t.subarray(n,n+r),i);else for(var s=0;s<r;s++)e[i+s]=t[n+s]},flattenChunks:function(e){var t,n,r,i,s,o;for(r=0,t=0,n=e.length;t<n;t++)r+=e[t].length;for(o=new Uint8Array(r),i=0,t=0,n=e.length;t<n;t++)s=e[t],o.set(s,i),i+=s.length;return o}},o={arraySet:function(e,t,n,r,i){for(var s=0;s<r;s++)e[i+s]=t[n+s]},flattenChunks:function(e){return[].concat.apply([],e)}};t.setTyped=function(e){e?(t.Buf8=Uint8Array,t.Buf16=Uint16Array,t.Buf32=Int32Array,t.assign(t,s)):(t.Buf8=Array,t.Buf16=Array,t.Buf32=Array,t.assign(t,o))},t.setTyped(r)},function(e,t,n){\"use strict\";for(var r=n(0),i=n(3),s=n(16),o=n(1),a=new Array(256),l=0;l<256;l++)a[l]=l>=252?6:l>=248?5:l>=240?4:l>=224?3:l>=192?2:1;a[254]=a[254]=1;function c(){o.call(this,\"utf-8 decode\"),this.leftOver=null}function h(){o.call(this,\"utf-8 encode\")}t.utf8encode=function(e){return i.nodebuffer?s.newBufferFrom(e,\"utf-8\"):function(e){var t,n,r,s,o,a=e.length,l=0;for(s=0;s<a;s++)55296==(64512&(n=e.charCodeAt(s)))&&s+1<a&&56320==(64512&(r=e.charCodeAt(s+1)))&&(n=65536+(n-55296<<10)+(r-56320),s++),l+=n<128?1:n<2048?2:n<65536?3:4;for(t=i.uint8array?new Uint8Array(l):new Array(l),o=0,s=0;o<l;s++)55296==(64512&(n=e.charCodeAt(s)))&&s+1<a&&56320==(64512&(r=e.charCodeAt(s+1)))&&(n=65536+(n-55296<<10)+(r-56320),s++),n<128?t[o++]=n:n<2048?(t[o++]=192|n>>>6,t[o++]=128|63&n):n<65536?(t[o++]=224|n>>>12,t[o++]=128|n>>>6&63,t[o++]=128|63&n):(t[o++]=240|n>>>18,t[o++]=128|n>>>12&63,t[o++]=128|n>>>6&63,t[o++]=128|63&n);return t}(e)},t.utf8decode=function(e){return i.nodebuffer?r.transformTo(\"nodebuffer\",e).toString(\"utf-8\"):function(e){var t,n,i,s,o=e.length,l=new Array(2*o);for(n=0,t=0;t<o;)if((i=e[t++])<128)l[n++]=i;else if((s=a[i])>4)l[n++]=65533,t+=s-1;else{for(i&=2===s?31:3===s?15:7;s>1&&t<o;)i=i<<6|63&e[t++],s--;s>1?l[n++]=65533:i<65536?l[n++]=i:(i-=65536,l[n++]=55296|i>>10&1023,l[n++]=56320|1023&i)}return l.length!==n&&(l.subarray?l=l.subarray(0,n):l.length=n),r.applyFromCharCode(l)}(e=r.transformTo(i.uint8array?\"uint8array\":\"array\",e))},r.inherits(c,o),c.prototype.processChunk=function(e){var n=r.transformTo(i.uint8array?\"uint8array\":\"array\",e.data);if(this.leftOver&&this.leftOver.length){if(i.uint8array){var s=n;(n=new Uint8Array(s.length+this.leftOver.length)).set(this.leftOver,0),n.set(s,this.leftOver.length)}else n=this.leftOver.concat(n);this.leftOver=null}var o=function(e,t){var n;for((t=t||e.length)>e.length&&(t=e.length),n=t-1;n>=0&&128==(192&e[n]);)n--;return n<0?t:0===n?t:n+a[e[n]]>t?n:t}(n),l=n;o!==n.length&&(i.uint8array?(l=n.subarray(0,o),this.leftOver=n.subarray(o,n.length)):(l=n.slice(0,o),this.leftOver=n.slice(o,n.length))),this.push({data:t.utf8decode(l),meta:e.meta})},c.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:t.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},t.Utf8DecodeWorker=c,r.inherits(h,o),h.prototype.processChunk=function(e){this.push({data:t.utf8encode(e.data),meta:e.meta})},t.Utf8EncodeWorker=h},function(e,t,n){\"use strict\";var r=n(13),i=Object.keys||function(e){var t=[];for(var n in e)t.push(n);return t};e.exports=u;var s=n(9);s.inherits=n(10);var o=n(23),a=n(26);s.inherits(u,o);for(var l=i(a.prototype),c=0;c<l.length;c++){var h=l[c];u.prototype[h]||(u.prototype[h]=a.prototype[h])}function u(e){if(!(this instanceof u))return new u(e);o.call(this,e),a.call(this,e),e&&!1===e.readable&&(this.readable=!1),e&&!1===e.writable&&(this.writable=!1),this.allowHalfOpen=!0,e&&!1===e.allowHalfOpen&&(this.allowHalfOpen=!1),this.once(\"end\",d)}function d(){this.allowHalfOpen||this._writableState.ended||r.nextTick(f,this)}function f(e){e.end()}Object.defineProperty(u.prototype,\"writableHighWaterMark\",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(u.prototype,\"destroyed\",{get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed&&this._writableState.destroyed)},set:function(e){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=e,this._writableState.destroyed=e)}}),u.prototype._destroy=function(e,t){this.push(null),this.end(),r.nextTick(t,e)}},function(e,t){e.exports=require(\"fs\")},function(e,t){e.exports=require(\"zlib\")},function(e,t){function n(e){return Object.prototype.toString.call(e)}t.isArray=function(e){return Array.isArray?Array.isArray(e):\"[object Array]\"===n(e)},t.isBoolean=function(e){return\"boolean\"==typeof e},t.isNull=function(e){return null===e},t.isNullOrUndefined=function(e){return null==e},t.isNumber=function(e){return\"number\"==typeof e},t.isString=function(e){return\"string\"==typeof e},t.isSymbol=function(e){return\"symbol\"==typeof e},t.isUndefined=function(e){return void 0===e},t.isRegExp=function(e){return\"[object RegExp]\"===n(e)},t.isObject=function(e){return\"object\"==typeof e&&null!==e},t.isDate=function(e){return\"[object Date]\"===n(e)},t.isError=function(e){return\"[object Error]\"===n(e)||e instanceof Error},t.isFunction=function(e){return\"function\"==typeof e},t.isPrimitive=function(e){return null===e||\"boolean\"==typeof e||\"number\"==typeof e||\"string\"==typeof e||\"symbol\"==typeof e||void 0===e},t.isBuffer=Buffer.isBuffer},function(e,t,n){try{var r=n(15);if(\"function\"!=typeof r.inherits)throw\"\";e.exports=r.inherits}catch(t){e.exports=n(56)}},function(e,t,n){\"use strict\";var r=null;r=\"undefined\"!=typeof Promise?Promise:n(61),e.exports={Promise:r}},function(e,t){e.exports=require(\"path\")},function(e,t,n){\"use strict\";!process.version||0===process.version.indexOf(\"v0.\")||0===process.version.indexOf(\"v1.\")&&0!==process.version.indexOf(\"v1.8.\")?e.exports={nextTick:function(e,t,n,r){if(\"function\"!=typeof e)throw new TypeError('\"callback\" argument must be a function');var i,s,o=arguments.length;switch(o){case 0:case 1:return process.nextTick(e);case 2:return process.nextTick(function(){e.call(null,t)});case 3:return process.nextTick(function(){e.call(null,t,n)});case 4:return process.nextTick(function(){e.call(null,t,n,r)});default:for(i=new Array(o-1),s=0;s<i.length;)i[s++]=arguments[s];return process.nextTick(function(){e.apply(null,i)})}}}:e.exports=process},function(e,t,n){var r=n(55),i=r.Buffer;function s(e,t){for(var n in e)t[n]=e[n]}function o(e,t,n){return i(e,t,n)}i.from&&i.alloc&&i.allocUnsafe&&i.allocUnsafeSlow?e.exports=r:(s(r,t),t.Buffer=o),s(i,o),o.from=function(e,t,n){if(\"number\"==typeof e)throw new TypeError(\"Argument must not be a number\");return i(e,t,n)},o.alloc=function(e,t,n){if(\"number\"!=typeof e)throw new TypeError(\"Argument must be a number\");var r=i(e);return void 0!==t?\"string\"==typeof n?r.fill(t,n):r.fill(t):r.fill(0),r},o.allocUnsafe=function(e){if(\"number\"!=typeof e)throw new TypeError(\"Argument must be a number\");return i(e)},o.allocUnsafeSlow=function(e){if(\"number\"!=typeof e)throw new TypeError(\"Argument must be a number\");return r.SlowBuffer(e)}},function(e,t){e.exports=require(\"util\")},function(e,t,n){\"use strict\";e.exports={isNode:\"undefined\"!=typeof Buffer,newBufferFrom:function(e,t){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(e,t);if(\"number\"==typeof e)throw new Error('The \"data\" argument must not be a number');return new Buffer(e,t)},allocBuffer:function(e){if(Buffer.alloc)return Buffer.alloc(e);var t=new Buffer(e);return t.fill(0),t},isBuffer:function(e){return Buffer.isBuffer(e)},isStream:function(e){return e&&\"function\"==typeof e.on&&\"function\"==typeof e.pause&&\"function\"==typeof e.resume}}},function(e,t){e.exports=require(\"url\")},function(e,t,n){\"use strict\";var r=n(11),i=n(32),s=n(33),o=n(34);s=n(33);function a(e,t,n,r,i){this.compressedSize=e,this.uncompressedSize=t,this.crc32=n,this.compression=r,this.compressedContent=i}a.prototype={getContentWorker:function(){var e=new i(r.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new s(\"data_length\")),t=this;return e.on(\"end\",function(){if(this.streamInfo.data_length!==t.uncompressedSize)throw new Error(\"Bug : uncompressed data size mismatch\")}),e},getCompressedWorker:function(){return new i(r.Promise.resolve(this.compressedContent)).withStreamInfo(\"compressedSize\",this.compressedSize).withStreamInfo(\"uncompressedSize\",this.uncompressedSize).withStreamInfo(\"crc32\",this.crc32).withStreamInfo(\"compression\",this.compression)}},a.createWorkerFrom=function(e,t,n){return e.pipe(new o).pipe(new s(\"uncompressedSize\")).pipe(t.compressWorker(n)).pipe(new s(\"compressedSize\")).withStreamInfo(\"compression\",t)},e.exports=a},function(e,t,n){\"use strict\";var r=n(0);var i=function(){for(var e,t=[],n=0;n<256;n++){e=n;for(var r=0;r<8;r++)e=1&e?3988292384^e>>>1:e>>>1;t[n]=e}return t}();e.exports=function(e,t){return void 0!==e&&e.length?\"string\"!==r.getTypeOf(e)?function(e,t,n,r){var s=i,o=r+n;e^=-1;for(var a=r;a<o;a++)e=e>>>8^s[255&(e^t[a])];return-1^e}(0|t,e,e.length,0):function(e,t,n,r){var s=i,o=r+n;e^=-1;for(var a=r;a<o;a++)e=e>>>8^s[255&(e^t.charCodeAt(a))];return-1^e}(0|t,e,e.length,0):0}},function(e,t,n){\"use strict\";e.exports={2:\"need dictionary\",1:\"stream end\",0:\"\",\"-1\":\"file error\",\"-2\":\"stream error\",\"-3\":\"data error\",\"-4\":\"insufficient memory\",\"-5\":\"buffer error\",\"-6\":\"incompatible version\"}},function(e,t){e.exports=require(\"http\")},function(e,t,n){var r=n(2);\"disable\"===process.env.READABLE_STREAM&&r?(e.exports=r,(t=e.exports=r.Readable).Readable=r.Readable,t.Writable=r.Writable,t.Duplex=r.Duplex,t.Transform=r.Transform,t.PassThrough=r.PassThrough,t.Stream=r):((t=e.exports=n(23)).Stream=r||t,t.Readable=t,t.Writable=n(26),t.Duplex=n(6),t.Transform=n(28),t.PassThrough=n(59))},function(e,t,n){\"use strict\";var r=n(13);e.exports=_;var i,s=n(53);_.ReadableState=y;n(54).EventEmitter;var o=function(e,t){return e.listeners(t).length},a=n(24),l=n(14).Buffer,c=global.Uint8Array||function(){};var h=n(9);h.inherits=n(10);var u=n(15),d=void 0;d=u&&u.debuglog?u.debuglog(\"stream\"):function(){};var f,p=n(57),m=n(25);h.inherits(_,a);var g=[\"error\",\"close\",\"destroy\",\"pause\",\"resume\"];function y(e,t){e=e||{};var r=t instanceof(i=i||n(6));this.objectMode=!!e.objectMode,r&&(this.objectMode=this.objectMode||!!e.readableObjectMode);var s=e.highWaterMark,o=e.readableHighWaterMark,a=this.objectMode?16:16384;this.highWaterMark=s||0===s?s:r&&(o||0===o)?o:a,this.highWaterMark=Math.floor(this.highWaterMark),this.buffer=new p,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=e.defaultEncoding||\"utf8\",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(f||(f=n(27).StringDecoder),this.decoder=new f(e.encoding),this.encoding=e.encoding)}function _(e){if(i=i||n(6),!(this instanceof _))return new _(e);this._readableState=new y(e,this),this.readable=!0,e&&(\"function\"==typeof e.read&&(this._read=e.read),\"function\"==typeof e.destroy&&(this._destroy=e.destroy)),a.call(this)}function b(e,t,n,r,i){var s,o=e._readableState;null===t?(o.reading=!1,function(e,t){if(t.ended)return;if(t.decoder){var n=t.decoder.end();n&&n.length&&(t.buffer.push(n),t.length+=t.objectMode?1:n.length)}t.ended=!0,k(e)}(e,o)):(i||(s=function(e,t){var n;r=t,l.isBuffer(r)||r instanceof c||\"string\"==typeof t||void 0===t||e.objectMode||(n=new TypeError(\"Invalid non-string/buffer chunk\"));var r;return n}(o,t)),s?e.emit(\"error\",s):o.objectMode||t&&t.length>0?(\"string\"==typeof t||o.objectMode||Object.getPrototypeOf(t)===l.prototype||(t=function(e){return l.from(e)}(t)),r?o.endEmitted?e.emit(\"error\",new Error(\"stream.unshift() after end event\")):v(e,o,t,!0):o.ended?e.emit(\"error\",new Error(\"stream.push() after EOF\")):(o.reading=!1,o.decoder&&!n?(t=o.decoder.write(t),o.objectMode||0!==t.length?v(e,o,t,!1):T(e,o)):v(e,o,t,!1))):r||(o.reading=!1));return function(e){return!e.ended&&(e.needReadable||e.length<e.highWaterMark||0===e.length)}(o)}function v(e,t,n,r){t.flowing&&0===t.length&&!t.sync?(e.emit(\"data\",n),e.read(0)):(t.length+=t.objectMode?1:n.length,r?t.buffer.unshift(n):t.buffer.push(n),t.needReadable&&k(e)),T(e,t)}Object.defineProperty(_.prototype,\"destroyed\",{get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(e){this._readableState&&(this._readableState.destroyed=e)}}),_.prototype.destroy=m.destroy,_.prototype._undestroy=m.undestroy,_.prototype._destroy=function(e,t){this.push(null),t(e)},_.prototype.push=function(e,t){var n,r=this._readableState;return r.objectMode?n=!0:\"string\"==typeof e&&((t=t||r.defaultEncoding)!==r.encoding&&(e=l.from(e,t),t=\"\"),n=!0),b(this,e,t,!1,n)},_.prototype.unshift=function(e){return b(this,e,null,!0,!1)},_.prototype.isPaused=function(){return!1===this._readableState.flowing},_.prototype.setEncoding=function(e){return f||(f=n(27).StringDecoder),this._readableState.decoder=new f(e),this._readableState.encoding=e,this};var w=8388608;function S(e,t){return e<=0||0===t.length&&t.ended?0:t.objectMode?1:e!=e?t.flowing&&t.length?t.buffer.head.data.length:t.length:(e>t.highWaterMark&&(t.highWaterMark=function(e){return e>=w?e=w:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}(e)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0))}function k(e){var t=e._readableState;t.needReadable=!1,t.emittedReadable||(d(\"emitReadable\",t.flowing),t.emittedReadable=!0,t.sync?r.nextTick(C,e):C(e))}function C(e){d(\"emit readable\"),e.emit(\"readable\"),A(e)}function T(e,t){t.readingMore||(t.readingMore=!0,r.nextTick(x,e,t))}function x(e,t){for(var n=t.length;!t.reading&&!t.flowing&&!t.ended&&t.length<t.highWaterMark&&(d(\"maybeReadMore read 0\"),e.read(0),n!==t.length);)n=t.length;t.readingMore=!1}function E(e){d(\"readable nexttick read 0\"),e.read(0)}function R(e,t){t.reading||(d(\"resume read 0\"),e.read(0)),t.resumeScheduled=!1,t.awaitDrain=0,e.emit(\"resume\"),A(e),t.flowing&&!t.reading&&e.read(0)}function A(e){var t=e._readableState;for(d(\"flow\",t.flowing);t.flowing&&null!==e.read(););}function I(e,t){return 0===t.length?null:(t.objectMode?n=t.buffer.shift():!e||e>=t.length?(n=t.decoder?t.buffer.join(\"\"):1===t.buffer.length?t.buffer.head.data:t.buffer.concat(t.length),t.buffer.clear()):n=function(e,t,n){var r;e<t.head.data.length?(r=t.head.data.slice(0,e),t.head.data=t.head.data.slice(e)):r=e===t.head.data.length?t.shift():n?function(e,t){var n=t.head,r=1,i=n.data;e-=i.length;for(;n=n.next;){var s=n.data,o=e>s.length?s.length:e;if(o===s.length?i+=s:i+=s.slice(0,e),0===(e-=o)){o===s.length?(++r,n.next?t.head=n.next:t.head=t.tail=null):(t.head=n,n.data=s.slice(o));break}++r}return t.length-=r,i}(e,t):function(e,t){var n=l.allocUnsafe(e),r=t.head,i=1;r.data.copy(n),e-=r.data.length;for(;r=r.next;){var s=r.data,o=e>s.length?s.length:e;if(s.copy(n,n.length-e,0,o),0===(e-=o)){o===s.length?(++i,r.next?t.head=r.next:t.head=t.tail=null):(t.head=r,r.data=s.slice(o));break}++i}return t.length-=i,n}(e,t);return r}(e,t.buffer,t.decoder),n);var n}function O(e){var t=e._readableState;if(t.length>0)throw new Error('\"endReadable()\" called on non-empty stream');t.endEmitted||(t.ended=!0,r.nextTick($,t,e))}function $(e,t){e.endEmitted||0!==e.length||(e.endEmitted=!0,t.readable=!1,t.emit(\"end\"))}function N(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1}_.prototype.read=function(e){d(\"read\",e),e=parseInt(e,10);var t=this._readableState,n=e;if(0!==e&&(t.emittedReadable=!1),0===e&&t.needReadable&&(t.length>=t.highWaterMark||t.ended))return d(\"read: emitReadable\",t.length,t.ended),0===t.length&&t.ended?O(this):k(this),null;if(0===(e=S(e,t))&&t.ended)return 0===t.length&&O(this),null;var r,i=t.needReadable;return d(\"need readable\",i),(0===t.length||t.length-e<t.highWaterMark)&&d(\"length less than watermark\",i=!0),t.ended||t.reading?d(\"reading or ended\",i=!1):i&&(d(\"do read\"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,t.reading||(e=S(n,t))),null===(r=e>0?I(e,t):null)?(t.needReadable=!0,e=0):t.length-=e,0===t.length&&(t.ended||(t.needReadable=!0),n!==e&&t.ended&&O(this)),null!==r&&this.emit(\"data\",r),r},_.prototype._read=function(e){this.emit(\"error\",new Error(\"_read() is not implemented\"))},_.prototype.pipe=function(e,t){var n=this,i=this._readableState;switch(i.pipesCount){case 0:i.pipes=e;break;case 1:i.pipes=[i.pipes,e];break;default:i.pipes.push(e)}i.pipesCount+=1,d(\"pipe count=%d opts=%j\",i.pipesCount,t);var a=(!t||!1!==t.end)&&e!==process.stdout&&e!==process.stderr?c:_;function l(t,r){d(\"onunpipe\"),t===n&&r&&!1===r.hasUnpiped&&(r.hasUnpiped=!0,d(\"cleanup\"),e.removeListener(\"close\",g),e.removeListener(\"finish\",y),e.removeListener(\"drain\",h),e.removeListener(\"error\",m),e.removeListener(\"unpipe\",l),n.removeListener(\"end\",c),n.removeListener(\"end\",_),n.removeListener(\"data\",p),u=!0,!i.awaitDrain||e._writableState&&!e._writableState.needDrain||h())}function c(){d(\"onend\"),e.end()}i.endEmitted?r.nextTick(a):n.once(\"end\",a),e.on(\"unpipe\",l);var h=function(e){return function(){var t=e._readableState;d(\"pipeOnDrain\",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&o(e,\"data\")&&(t.flowing=!0,A(e))}}(n);e.on(\"drain\",h);var u=!1;var f=!1;function p(t){d(\"ondata\"),f=!1,!1!==e.write(t)||f||((1===i.pipesCount&&i.pipes===e||i.pipesCount>1&&-1!==N(i.pipes,e))&&!u&&(d(\"false write response, pause\",n._readableState.awaitDrain),n._readableState.awaitDrain++,f=!0),n.pause())}function m(t){d(\"onerror\",t),_(),e.removeListener(\"error\",m),0===o(e,\"error\")&&e.emit(\"error\",t)}function g(){e.removeListener(\"finish\",y),_()}function y(){d(\"onfinish\"),e.removeListener(\"close\",g),_()}function _(){d(\"unpipe\"),n.unpipe(e)}return n.on(\"data\",p),function(e,t,n){if(\"function\"==typeof e.prependListener)return e.prependListener(t,n);e._events&&e._events[t]?s(e._events[t])?e._events[t].unshift(n):e._events[t]=[n,e._events[t]]:e.on(t,n)}(e,\"error\",m),e.once(\"close\",g),e.once(\"finish\",y),e.emit(\"pipe\",n),i.flowing||(d(\"pipe resume\"),n.resume()),e},_.prototype.unpipe=function(e){var t=this._readableState,n={hasUnpiped:!1};if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes?this:(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit(\"unpipe\",this,n),this);if(!e){var r=t.pipes,i=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var s=0;s<i;s++)r[s].emit(\"unpipe\",this,n);return this}var o=N(t.pipes,e);return-1===o?this:(t.pipes.splice(o,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit(\"unpipe\",this,n),this)},_.prototype.on=function(e,t){var n=a.prototype.on.call(this,e,t);if(\"data\"===e)!1!==this._readableState.flowing&&this.resume();else if(\"readable\"===e){var i=this._readableState;i.endEmitted||i.readableListening||(i.readableListening=i.needReadable=!0,i.emittedReadable=!1,i.reading?i.length&&k(this):r.nextTick(E,this))}return n},_.prototype.addListener=_.prototype.on,_.prototype.resume=function(){var e=this._readableState;return e.flowing||(d(\"resume\"),e.flowing=!0,function(e,t){t.resumeScheduled||(t.resumeScheduled=!0,r.nextTick(R,e,t))}(this,e)),this},_.prototype.pause=function(){return d(\"call pause flowing=%j\",this._readableState.flowing),!1!==this._readableState.flowing&&(d(\"pause\"),this._readableState.flowing=!1,this.emit(\"pause\")),this},_.prototype.wrap=function(e){var t=this,n=this._readableState,r=!1;for(var i in e.on(\"end\",function(){if(d(\"wrapped end\"),n.decoder&&!n.ended){var e=n.decoder.end();e&&e.length&&t.push(e)}t.push(null)}),e.on(\"data\",function(i){(d(\"wrapped data\"),n.decoder&&(i=n.decoder.write(i)),n.objectMode&&null==i)||(n.objectMode||i&&i.length)&&(t.push(i)||(r=!0,e.pause()))}),e)void 0===this[i]&&\"function\"==typeof e[i]&&(this[i]=function(t){return function(){return e[t].apply(e,arguments)}}(i));for(var s=0;s<g.length;s++)e.on(g[s],this.emit.bind(this,g[s]));return this._read=function(t){d(\"wrapped _read\",t),r&&(r=!1,e.resume())},this},Object.defineProperty(_.prototype,\"readableHighWaterMark\",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),_._fromList=I},function(e,t,n){e.exports=n(2)},function(e,t,n){\"use strict\";var r=n(13);function i(e,t){e.emit(\"error\",t)}e.exports={destroy:function(e,t){var n=this,s=this._readableState&&this._readableState.destroyed,o=this._writableState&&this._writableState.destroyed;return s||o?(t?t(e):!e||this._writableState&&this._writableState.errorEmitted||r.nextTick(i,this,e),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(e||null,function(e){!t&&e?(r.nextTick(i,n,e),n._writableState&&(n._writableState.errorEmitted=!0)):t&&t(e)}),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}}},function(e,t,n){\"use strict\";var r=n(13);function i(e){var t=this;this.next=null,this.entry=null,this.finish=function(){!function(e,t,n){var r=e.entry;e.entry=null;for(;r;){var i=r.callback;t.pendingcb--,i(n),r=r.next}t.corkedRequestsFree?t.corkedRequestsFree.next=e:t.corkedRequestsFree=e}(t,e)}}e.exports=g;var s,o=!process.browser&&[\"v0.10\",\"v0.9.\"].indexOf(process.version.slice(0,5))>-1?setImmediate:r.nextTick;g.WritableState=m;var a=n(9);a.inherits=n(10);var l={deprecate:n(58)},c=n(24),h=n(14).Buffer,u=global.Uint8Array||function(){};var d,f=n(25);function p(){}function m(e,t){s=s||n(6),e=e||{};var a=t instanceof s;this.objectMode=!!e.objectMode,a&&(this.objectMode=this.objectMode||!!e.writableObjectMode);var l=e.highWaterMark,c=e.writableHighWaterMark,h=this.objectMode?16:16384;this.highWaterMark=l||0===l?l:a&&(c||0===c)?c:h,this.highWaterMark=Math.floor(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var u=!1===e.decodeStrings;this.decodeStrings=!u,this.defaultEncoding=e.defaultEncoding||\"utf8\",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){!function(e,t){var n=e._writableState,i=n.sync,s=n.writecb;if(function(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}(n),t)!function(e,t,n,i,s){--t.pendingcb,n?(r.nextTick(s,i),r.nextTick(S,e,t),e._writableState.errorEmitted=!0,e.emit(\"error\",i)):(s(i),e._writableState.errorEmitted=!0,e.emit(\"error\",i),S(e,t))}(e,n,i,t,s);else{var a=v(n);a||n.corked||n.bufferProcessing||!n.bufferedRequest||b(e,n),i?o(_,e,n,a,s):_(e,n,a,s)}}(t,e)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new i(this)}function g(e){if(s=s||n(6),!(d.call(g,this)||this instanceof s))return new g(e);this._writableState=new m(e,this),this.writable=!0,e&&(\"function\"==typeof e.write&&(this._write=e.write),\"function\"==typeof e.writev&&(this._writev=e.writev),\"function\"==typeof e.destroy&&(this._destroy=e.destroy),\"function\"==typeof e.final&&(this._final=e.final)),c.call(this)}function y(e,t,n,r,i,s,o){t.writelen=r,t.writecb=o,t.writing=!0,t.sync=!0,n?e._writev(i,t.onwrite):e._write(i,s,t.onwrite),t.sync=!1}function _(e,t,n,r){n||function(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit(\"drain\"))}(e,t),t.pendingcb--,r(),S(e,t)}function b(e,t){t.bufferProcessing=!0;var n=t.bufferedRequest;if(e._writev&&n&&n.next){var r=t.bufferedRequestCount,s=new Array(r),o=t.corkedRequestsFree;o.entry=n;for(var a=0,l=!0;n;)s[a]=n,n.isBuf||(l=!1),n=n.next,a+=1;s.allBuffers=l,y(e,t,!0,t.length,s,\"\",o.finish),t.pendingcb++,t.lastBufferedRequest=null,o.next?(t.corkedRequestsFree=o.next,o.next=null):t.corkedRequestsFree=new i(t),t.bufferedRequestCount=0}else{for(;n;){var c=n.chunk,h=n.encoding,u=n.callback;if(y(e,t,!1,t.objectMode?1:c.length,c,h,u),n=n.next,t.bufferedRequestCount--,t.writing)break}null===n&&(t.lastBufferedRequest=null)}t.bufferedRequest=n,t.bufferProcessing=!1}function v(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function w(e,t){e._final(function(n){t.pendingcb--,n&&e.emit(\"error\",n),t.prefinished=!0,e.emit(\"prefinish\"),S(e,t)})}function S(e,t){var n=v(t);return n&&(!function(e,t){t.prefinished||t.finalCalled||(\"function\"==typeof e._final?(t.pendingcb++,t.finalCalled=!0,r.nextTick(w,e,t)):(t.prefinished=!0,e.emit(\"prefinish\")))}(e,t),0===t.pendingcb&&(t.finished=!0,e.emit(\"finish\"))),n}a.inherits(g,c),m.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t},function(){try{Object.defineProperty(m.prototype,\"buffer\",{get:l.deprecate(function(){return this.getBuffer()},\"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.\",\"DEP0003\")})}catch(e){}}(),\"function\"==typeof Symbol&&Symbol.hasInstance&&\"function\"==typeof Function.prototype[Symbol.hasInstance]?(d=Function.prototype[Symbol.hasInstance],Object.defineProperty(g,Symbol.hasInstance,{value:function(e){return!!d.call(this,e)||this===g&&(e&&e._writableState instanceof m)}})):d=function(e){return e instanceof this},g.prototype.pipe=function(){this.emit(\"error\",new Error(\"Cannot pipe, not readable\"))},g.prototype.write=function(e,t,n){var i,s=this._writableState,o=!1,a=!s.objectMode&&(i=e,h.isBuffer(i)||i instanceof u);return a&&!h.isBuffer(e)&&(e=function(e){return h.from(e)}(e)),\"function\"==typeof t&&(n=t,t=null),a?t=\"buffer\":t||(t=s.defaultEncoding),\"function\"!=typeof n&&(n=p),s.ended?function(e,t){var n=new Error(\"write after end\");e.emit(\"error\",n),r.nextTick(t,n)}(this,n):(a||function(e,t,n,i){var s=!0,o=!1;return null===n?o=new TypeError(\"May not write null values to stream\"):\"string\"==typeof n||void 0===n||t.objectMode||(o=new TypeError(\"Invalid non-string/buffer chunk\")),o&&(e.emit(\"error\",o),r.nextTick(i,o),s=!1),s}(this,s,e,n))&&(s.pendingcb++,o=function(e,t,n,r,i,s){if(!n){var o=function(e,t,n){e.objectMode||!1===e.decodeStrings||\"string\"!=typeof t||(t=h.from(t,n));return t}(t,r,i);r!==o&&(n=!0,i=\"buffer\",r=o)}var a=t.objectMode?1:r.length;t.length+=a;var l=t.length<t.highWaterMark;l||(t.needDrain=!0);if(t.writing||t.corked){var c=t.lastBufferedRequest;t.lastBufferedRequest={chunk:r,encoding:i,isBuf:n,callback:s,next:null},c?c.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else y(e,t,!1,a,r,i,s);return l}(this,s,a,e,t,n)),o},g.prototype.cork=function(){this._writableState.corked++},g.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.finished||e.bufferProcessing||!e.bufferedRequest||b(this,e))},g.prototype.setDefaultEncoding=function(e){if(\"string\"==typeof e&&(e=e.toLowerCase()),!([\"hex\",\"utf8\",\"utf-8\",\"ascii\",\"binary\",\"base64\",\"ucs2\",\"ucs-2\",\"utf16le\",\"utf-16le\",\"raw\"].indexOf((e+\"\").toLowerCase())>-1))throw new TypeError(\"Unknown encoding: \"+e);return this._writableState.defaultEncoding=e,this},Object.defineProperty(g.prototype,\"writableHighWaterMark\",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),g.prototype._write=function(e,t,n){n(new Error(\"_write() is not implemented\"))},g.prototype._writev=null,g.prototype.end=function(e,t,n){var i=this._writableState;\"function\"==typeof e?(n=e,e=null,t=null):\"function\"==typeof t&&(n=t,t=null),null!=e&&this.write(e,t),i.corked&&(i.corked=1,this.uncork()),i.ending||i.finished||function(e,t,n){t.ending=!0,S(e,t),n&&(t.finished?r.nextTick(n):e.once(\"finish\",n));t.ended=!0,e.writable=!1}(this,i,n)},Object.defineProperty(g.prototype,\"destroyed\",{get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(e){this._writableState&&(this._writableState.destroyed=e)}}),g.prototype.destroy=f.destroy,g.prototype._undestroy=f.undestroy,g.prototype._destroy=function(e,t){this.end(),t(e)}},function(e,t,n){\"use strict\";var r=n(14).Buffer,i=r.isEncoding||function(e){switch((e=\"\"+e)&&e.toLowerCase()){case\"hex\":case\"utf8\":case\"utf-8\":case\"ascii\":case\"binary\":case\"base64\":case\"ucs2\":case\"ucs-2\":case\"utf16le\":case\"utf-16le\":case\"raw\":return!0;default:return!1}};function s(e){var t;switch(this.encoding=function(e){var t=function(e){if(!e)return\"utf8\";for(var t;;)switch(e){case\"utf8\":case\"utf-8\":return\"utf8\";case\"ucs2\":case\"ucs-2\":case\"utf16le\":case\"utf-16le\":return\"utf16le\";case\"latin1\":case\"binary\":return\"latin1\";case\"base64\":case\"ascii\":case\"hex\":return e;default:if(t)return;e=(\"\"+e).toLowerCase(),t=!0}}(e);if(\"string\"!=typeof t&&(r.isEncoding===i||!i(e)))throw new Error(\"Unknown encoding: \"+e);return t||e}(e),this.encoding){case\"utf16le\":this.text=l,this.end=c,t=4;break;case\"utf8\":this.fillLast=a,t=4;break;case\"base64\":this.text=h,this.end=u,t=3;break;default:return this.write=d,void(this.end=f)}this.lastNeed=0,this.lastTotal=0,this.lastChar=r.allocUnsafe(t)}function o(e){return e<=127?0:e>>5==6?2:e>>4==14?3:e>>3==30?4:e>>6==2?-1:-2}function a(e){var t=this.lastTotal-this.lastNeed,n=function(e,t,n){if(128!=(192&t[0]))return e.lastNeed=0,\"�\";if(e.lastNeed>1&&t.length>1){if(128!=(192&t[1]))return e.lastNeed=1,\"�\";if(e.lastNeed>2&&t.length>2&&128!=(192&t[2]))return e.lastNeed=2,\"�\"}}(this,e);return void 0!==n?n:this.lastNeed<=e.length?(e.copy(this.lastChar,t,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(e.copy(this.lastChar,t,0,e.length),void(this.lastNeed-=e.length))}function l(e,t){if((e.length-t)%2==0){var n=e.toString(\"utf16le\",t);if(n){var r=n.charCodeAt(n.length-1);if(r>=55296&&r<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1],n.slice(0,-1)}return n}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=e[e.length-1],e.toString(\"utf16le\",t,e.length-1)}function c(e){var t=e&&e.length?this.write(e):\"\";if(this.lastNeed){var n=this.lastTotal-this.lastNeed;return t+this.lastChar.toString(\"utf16le\",0,n)}return t}function h(e,t){var n=(e.length-t)%3;return 0===n?e.toString(\"base64\",t):(this.lastNeed=3-n,this.lastTotal=3,1===n?this.lastChar[0]=e[e.length-1]:(this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1]),e.toString(\"base64\",t,e.length-n))}function u(e){var t=e&&e.length?this.write(e):\"\";return this.lastNeed?t+this.lastChar.toString(\"base64\",0,3-this.lastNeed):t}function d(e){return e.toString(this.encoding)}function f(e){return e&&e.length?this.write(e):\"\"}t.StringDecoder=s,s.prototype.write=function(e){if(0===e.length)return\"\";var t,n;if(this.lastNeed){if(void 0===(t=this.fillLast(e)))return\"\";n=this.lastNeed,this.lastNeed=0}else n=0;return n<e.length?t?t+this.text(e,n):this.text(e,n):t||\"\"},s.prototype.end=function(e){var t=e&&e.length?this.write(e):\"\";return this.lastNeed?t+\"�\":t},s.prototype.text=function(e,t){var n=function(e,t,n){var r=t.length-1;if(r<n)return 0;var i=o(t[r]);if(i>=0)return i>0&&(e.lastNeed=i-1),i;if(--r<n||-2===i)return 0;if((i=o(t[r]))>=0)return i>0&&(e.lastNeed=i-2),i;if(--r<n||-2===i)return 0;if((i=o(t[r]))>=0)return i>0&&(2===i?i=0:e.lastNeed=i-3),i;return 0}(this,e,t);if(!this.lastNeed)return e.toString(\"utf8\",t);this.lastTotal=n;var r=e.length-(n-this.lastNeed);return e.copy(this.lastChar,0,r),e.toString(\"utf8\",t,r)},s.prototype.fillLast=function(e){if(this.lastNeed<=e.length)return e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,e.length),this.lastNeed-=e.length}},function(e,t,n){\"use strict\";e.exports=o;var r=n(6),i=n(9);function s(e,t){var n=this._transformState;n.transforming=!1;var r=n.writecb;if(!r)return this.emit(\"error\",new Error(\"write callback called multiple times\"));n.writechunk=null,n.writecb=null,null!=t&&this.push(t),r(e);var i=this._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}function o(e){if(!(this instanceof o))return new o(e);r.call(this,e),this._transformState={afterTransform:s.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,e&&(\"function\"==typeof e.transform&&(this._transform=e.transform),\"function\"==typeof e.flush&&(this._flush=e.flush)),this.on(\"prefinish\",a)}function a(){var e=this;\"function\"==typeof this._flush?this._flush(function(t,n){l(e,t,n)}):l(this,null,null)}function l(e,t,n){if(t)return e.emit(\"error\",t);if(null!=n&&e.push(n),e._writableState.length)throw new Error(\"Calling transform done when ws.length != 0\");if(e._transformState.transforming)throw new Error(\"Calling transform done when still transforming\");return e.push(null)}i.inherits=n(10),i.inherits(o,r),o.prototype.push=function(e,t){return this._transformState.needTransform=!1,r.prototype.push.call(this,e,t)},o.prototype._transform=function(e,t,n){throw new Error(\"_transform() is not implemented\")},o.prototype._write=function(e,t,n){var r=this._transformState;if(r.writecb=n,r.writechunk=e,r.writeencoding=t,!r.transforming){var i=this._readableState;(r.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},o.prototype._read=function(e){var t=this._transformState;null!==t.writechunk&&t.writecb&&!t.transforming?(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform)):t.needTransform=!0},o.prototype._destroy=function(e,t){var n=this;r.prototype._destroy.call(this,e,function(e){t(e),n.emit(\"close\")})}},function(e,t,n){\"use strict\";var r=n(0),i=n(3),s=\"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=\";t.encode=function(e){for(var t,n,i,o,a,l,c,h=[],u=0,d=e.length,f=d,p=\"string\"!==r.getTypeOf(e);u<e.length;)f=d-u,p?(t=e[u++],n=u<d?e[u++]:0,i=u<d?e[u++]:0):(t=e.charCodeAt(u++),n=u<d?e.charCodeAt(u++):0,i=u<d?e.charCodeAt(u++):0),o=t>>2,a=(3&t)<<4|n>>4,l=f>1?(15&n)<<2|i>>6:64,c=f>2?63&i:64,h.push(s.charAt(o)+s.charAt(a)+s.charAt(l)+s.charAt(c));return h.join(\"\")},t.decode=function(e){var t,n,r,o,a,l,c=0,h=0;if(\"data:\"===e.substr(0,\"data:\".length))throw new Error(\"Invalid base64 input, it looks like a data url.\");var u,d=3*(e=e.replace(/[^A-Za-z0-9\\+\\/\\=]/g,\"\")).length/4;if(e.charAt(e.length-1)===s.charAt(64)&&d--,e.charAt(e.length-2)===s.charAt(64)&&d--,d%1!=0)throw new Error(\"Invalid base64 input, bad content length.\");for(u=i.uint8array?new Uint8Array(0|d):new Array(0|d);c<e.length;)t=s.indexOf(e.charAt(c++))<<2|(o=s.indexOf(e.charAt(c++)))>>4,n=(15&o)<<4|(a=s.indexOf(e.charAt(c++)))>>2,r=(3&a)<<6|(l=s.indexOf(e.charAt(c++))),u[h++]=t,64!==a&&(u[h++]=n),64!==l&&(u[h++]=r);return u}},function(e,t,n){\"use strict\";var r=n(0),i=n(63),s=n(1),o=n(29),a=n(3),l=n(11),c=null;if(a.nodestream)try{c=n(64)}catch(e){}function h(e,t){return new l.Promise(function(n,i){var s=[],a=e._internalType,l=e._outputType,c=e._mimeType;e.on(\"data\",function(e,n){s.push(e),t&&t(n)}).on(\"error\",function(e){s=[],i(e)}).on(\"end\",function(){try{var e=function(e,t,n){switch(e){case\"blob\":return r.newBlob(r.transformTo(\"arraybuffer\",t),n);case\"base64\":return o.encode(t);default:return r.transformTo(e,t)}}(l,function(e,t){var n,r=0,i=null,s=0;for(n=0;n<t.length;n++)s+=t[n].length;switch(e){case\"string\":return t.join(\"\");case\"array\":return Array.prototype.concat.apply([],t);case\"uint8array\":for(i=new Uint8Array(s),n=0;n<t.length;n++)i.set(t[n],r),r+=t[n].length;return i;case\"nodebuffer\":return Buffer.concat(t);default:throw new Error(\"concat : unsupported type '\"+e+\"'\")}}(a,s),c);n(e)}catch(e){i(e)}s=[]}).resume()})}function u(e,t,n){var o=t;switch(t){case\"blob\":case\"arraybuffer\":o=\"uint8array\";break;case\"base64\":o=\"string\"}try{this._internalType=o,this._outputType=t,this._mimeType=n,r.checkSupport(o),this._worker=e.pipe(new i(o)),e.lock()}catch(e){this._worker=new s(\"error\"),this._worker.error(e)}}u.prototype={accumulate:function(e){return h(this,e)},on:function(e,t){var n=this;return\"data\"===e?this._worker.on(e,function(e){t.call(n,e.data,e.meta)}):this._worker.on(e,function(){r.delay(t,arguments,n)}),this},resume:function(){return r.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(e){if(r.checkSupport(\"nodestream\"),\"nodebuffer\"!==this._outputType)throw new Error(this._outputType+\" is not supported by this method\");return new c(this,{objectMode:\"nodebuffer\"!==this._outputType},e)}},e.exports=u},function(e,t,n){\"use strict\";t.base64=!1,t.binary=!1,t.dir=!1,t.createFolders=!0,t.date=null,t.compression=null,t.compressionOptions=null,t.comment=null,t.unixPermissions=null,t.dosPermissions=null},function(e,t,n){\"use strict\";var r=n(0),i=n(1);function s(e){i.call(this,\"DataWorker\");var t=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type=\"\",this._tickScheduled=!1,e.then(function(e){t.dataIsReady=!0,t.data=e,t.max=e&&e.length||0,t.type=r.getTypeOf(e),t.isPaused||t._tickAndRepeat()},function(e){t.error(e)})}r.inherits(s,i),s.prototype.cleanUp=function(){i.prototype.cleanUp.call(this),this.data=null},s.prototype.resume=function(){return!!i.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,r.delay(this._tickAndRepeat,[],this)),!0)},s.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(r.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},s.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var e=null,t=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case\"string\":e=this.data.substring(this.index,t);break;case\"uint8array\":e=this.data.subarray(this.index,t);break;case\"array\":case\"nodebuffer\":e=this.data.slice(this.index,t)}return this.index=t,this.push({data:e,meta:{percent:this.max?this.index/this.max*100:0}})},e.exports=s},function(e,t,n){\"use strict\";var r=n(0),i=n(1);function s(e){i.call(this,\"DataLengthProbe for \"+e),this.propName=e,this.withStreamInfo(e,0)}r.inherits(s,i),s.prototype.processChunk=function(e){if(e){var t=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=t+e.data.length}i.prototype.processChunk.call(this,e)},e.exports=s},function(e,t,n){\"use strict\";var r=n(1),i=n(19);function s(){r.call(this,\"Crc32Probe\"),this.withStreamInfo(\"crc32\",0)}n(0).inherits(s,r),s.prototype.processChunk=function(e){this.streamInfo.crc32=i(e.data,this.streamInfo.crc32||0),this.push(e)},e.exports=s},function(e,t,n){\"use strict\";var r=n(1);t.STORE={magic:\"\\0\\0\",compressWorker:function(e){return new r(\"STORE compression\")},uncompressWorker:function(){return new r(\"STORE decompression\")}},t.DEFLATE=n(67)},function(e,t,n){\"use strict\";e.exports=function(e,t,n,r){for(var i=65535&e|0,s=e>>>16&65535|0,o=0;0!==n;){n-=o=n>2e3?2e3:n;do{s=s+(i=i+t[r++]|0)|0}while(--o);i%=65521,s%=65521}return i|s<<16|0}},function(e,t,n){\"use strict\";var r=function(){for(var e,t=[],n=0;n<256;n++){e=n;for(var r=0;r<8;r++)e=1&e?3988292384^e>>>1:e>>>1;t[n]=e}return t}();e.exports=function(e,t,n,i){var s=r,o=i+n;e^=-1;for(var a=i;a<o;a++)e=e>>>8^s[255&(e^t[a])];return-1^e}},function(e,t,n){\"use strict\";var r=n(4),i=!0,s=!0;try{String.fromCharCode.apply(null,[0])}catch(e){i=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(e){s=!1}for(var o=new r.Buf8(256),a=0;a<256;a++)o[a]=a>=252?6:a>=248?5:a>=240?4:a>=224?3:a>=192?2:1;function l(e,t){if(t<65534&&(e.subarray&&s||!e.subarray&&i))return String.fromCharCode.apply(null,r.shrinkBuf(e,t));for(var n=\"\",o=0;o<t;o++)n+=String.fromCharCode(e[o]);return n}o[254]=o[254]=1,t.string2buf=function(e){var t,n,i,s,o,a=e.length,l=0;for(s=0;s<a;s++)55296==(64512&(n=e.charCodeAt(s)))&&s+1<a&&56320==(64512&(i=e.charCodeAt(s+1)))&&(n=65536+(n-55296<<10)+(i-56320),s++),l+=n<128?1:n<2048?2:n<65536?3:4;for(t=new r.Buf8(l),o=0,s=0;o<l;s++)55296==(64512&(n=e.charCodeAt(s)))&&s+1<a&&56320==(64512&(i=e.charCodeAt(s+1)))&&(n=65536+(n-55296<<10)+(i-56320),s++),n<128?t[o++]=n:n<2048?(t[o++]=192|n>>>6,t[o++]=128|63&n):n<65536?(t[o++]=224|n>>>12,t[o++]=128|n>>>6&63,t[o++]=128|63&n):(t[o++]=240|n>>>18,t[o++]=128|n>>>12&63,t[o++]=128|n>>>6&63,t[o++]=128|63&n);return t},t.buf2binstring=function(e){return l(e,e.length)},t.binstring2buf=function(e){for(var t=new r.Buf8(e.length),n=0,i=t.length;n<i;n++)t[n]=e.charCodeAt(n);return t},t.buf2string=function(e,t){var n,r,i,s,a=t||e.length,c=new Array(2*a);for(r=0,n=0;n<a;)if((i=e[n++])<128)c[r++]=i;else if((s=o[i])>4)c[r++]=65533,n+=s-1;else{for(i&=2===s?31:3===s?15:7;s>1&&n<a;)i=i<<6|63&e[n++],s--;s>1?c[r++]=65533:i<65536?c[r++]=i:(i-=65536,c[r++]=55296|i>>10&1023,c[r++]=56320|1023&i)}return l(c,r)},t.utf8border=function(e,t){var n;for((t=t||e.length)>e.length&&(t=e.length),n=t-1;n>=0&&128==(192&e[n]);)n--;return n<0?t:0===n?t:n+o[e[n]]>t?n:t}},function(e,t,n){\"use strict\";e.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg=\"\",this.state=null,this.data_type=2,this.adler=0}},function(e,t,n){\"use strict\";e.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},function(e,t,n){\"use strict\";t.LOCAL_FILE_HEADER=\"PK\u0003\u0004\",t.CENTRAL_FILE_HEADER=\"PK\u0001\u0002\",t.CENTRAL_DIRECTORY_END=\"PK\u0005\u0006\",t.ZIP64_CENTRAL_DIRECTORY_LOCATOR=\"PK\u0006\u0007\",t.ZIP64_CENTRAL_DIRECTORY_END=\"PK\u0006\u0006\",t.DATA_DESCRIPTOR=\"PK\u0007\\b\"},function(e,t,n){\"use strict\";var r=n(0),i=n(3),s=n(43),o=n(81),a=n(82),l=n(45);e.exports=function(e){var t=r.getTypeOf(e);return r.checkSupport(t),\"string\"!==t||i.uint8array?\"nodebuffer\"===t?new a(e):i.uint8array?new l(r.transformTo(\"uint8array\",e)):new s(r.transformTo(\"array\",e)):new o(e)}},function(e,t,n){\"use strict\";var r=n(44);function i(e){r.call(this,e);for(var t=0;t<this.data.length;t++)e[t]=255&e[t]}n(0).inherits(i,r),i.prototype.byteAt=function(e){return this.data[this.zero+e]},i.prototype.lastIndexOfSignature=function(e){for(var t=e.charCodeAt(0),n=e.charCodeAt(1),r=e.charCodeAt(2),i=e.charCodeAt(3),s=this.length-4;s>=0;--s)if(this.data[s]===t&&this.data[s+1]===n&&this.data[s+2]===r&&this.data[s+3]===i)return s-this.zero;return-1},i.prototype.readAndCheckSignature=function(e){var t=e.charCodeAt(0),n=e.charCodeAt(1),r=e.charCodeAt(2),i=e.charCodeAt(3),s=this.readData(4);return t===s[0]&&n===s[1]&&r===s[2]&&i===s[3]},i.prototype.readData=function(e){if(this.checkOffset(e),0===e)return[];var t=this.data.slice(this.zero+this.index,this.zero+this.index+e);return this.index+=e,t},e.exports=i},function(e,t,n){\"use strict\";var r=n(0);function i(e){this.data=e,this.length=e.length,this.index=0,this.zero=0}i.prototype={checkOffset:function(e){this.checkIndex(this.index+e)},checkIndex:function(e){if(this.length<this.zero+e||e<0)throw new Error(\"End of data reached (data length = \"+this.length+\", asked index = \"+e+\"). Corrupted zip ?\")},setIndex:function(e){this.checkIndex(e),this.index=e},skip:function(e){this.setIndex(this.index+e)},byteAt:function(e){},readInt:function(e){var t,n=0;for(this.checkOffset(e),t=this.index+e-1;t>=this.index;t--)n=(n<<8)+this.byteAt(t);return this.index+=e,n},readString:function(e){return r.transformTo(\"string\",this.readData(e))},readData:function(e){},lastIndexOfSignature:function(e){},readAndCheckSignature:function(e){},readDate:function(){var e=this.readInt(4);return new Date(Date.UTC(1980+(e>>25&127),(e>>21&15)-1,e>>16&31,e>>11&31,e>>5&63,(31&e)<<1))}},e.exports=i},function(e,t,n){\"use strict\";var r=n(43);function i(e){r.call(this,e)}n(0).inherits(i,r),i.prototype.readData=function(e){if(this.checkOffset(e),0===e)return new Uint8Array(0);var t=this.data.subarray(this.zero+this.index,this.zero+this.index+e);return this.index+=e,t},e.exports=i},function(e,t){e.exports=require(\"assert\")},function(e,t){e.exports=require(\"vm\")},function(e,t){function n(e){return\"number\"==typeof e||(!!/^0x[0-9a-f]+$/i.test(e)||/^[-+]?(?:\\d+(?:\\.\\d*)?|\\.\\d+)(e[-+]?\\d+)?$/.test(e))}e.exports=function(e,t){t||(t={});var r={bools:{},strings:{},unknownFn:null};\"function\"==typeof t.unknown&&(r.unknownFn=t.unknown),\"boolean\"==typeof t.boolean&&t.boolean?r.allBools=!0:[].concat(t.boolean).filter(Boolean).forEach(function(e){r.bools[e]=!0});var i={};Object.keys(t.alias||{}).forEach(function(e){i[e]=[].concat(t.alias[e]),i[e].forEach(function(t){i[t]=[e].concat(i[e].filter(function(e){return t!==e}))})}),[].concat(t.string).filter(Boolean).forEach(function(e){r.strings[e]=!0,i[e]&&(r.strings[i[e]]=!0)});var s=t.default||{},o={_:[]};Object.keys(r.bools).forEach(function(e){l(e,void 0!==s[e]&&s[e])});var a=[];function l(e,t,s){if(!s||!r.unknownFn||function(e,t){return r.allBools&&/^--[^=]+$/.test(t)||r.strings[e]||r.bools[e]||i[e]}(e,s)||!1!==r.unknownFn(s)){var a=!r.strings[e]&&n(t)?Number(t):t;c(o,e.split(\".\"),a),(i[e]||[]).forEach(function(e){c(o,e.split(\".\"),a)})}}function c(e,t,n){var i=e;t.slice(0,-1).forEach(function(e){void 0===i[e]&&(i[e]={}),i=i[e]});var s=t[t.length-1];void 0===i[s]||r.bools[s]||\"boolean\"==typeof i[s]?i[s]=n:Array.isArray(i[s])?i[s].push(n):i[s]=[i[s],n]}function h(e){return i[e].some(function(e){return r.bools[e]})}-1!==e.indexOf(\"--\")&&(a=e.slice(e.indexOf(\"--\")+1),e=e.slice(0,e.indexOf(\"--\")));for(var u=0;u<e.length;u++){var d=e[u];if(/^--.+=/.test(d)){var f=d.match(/^--([^=]+)=([\\s\\S]*)$/),p=f[1],m=f[2];r.bools[p]&&(m=\"false\"!==m),l(p,m,d)}else if(/^--no-.+/.test(d)){l(p=d.match(/^--no-(.+)/)[1],!1,d)}else if(/^--.+/.test(d)){p=d.match(/^--(.+)/)[1];void 0===(b=e[u+1])||/^-/.test(b)||r.bools[p]||r.allBools||i[p]&&h(p)?/^(true|false)$/.test(b)?(l(p,\"true\"===b,d),u++):l(p,!r.strings[p]||\"\",d):(l(p,b,d),u++)}else if(/^-[^-]+/.test(d)){for(var g=d.slice(1,-1).split(\"\"),y=!1,_=0;_<g.length;_++){var b;if(\"-\"!==(b=d.slice(_+2))){if(/[A-Za-z]/.test(g[_])&&/=/.test(b)){l(g[_],b.split(\"=\")[1],d),y=!0;break}if(/[A-Za-z]/.test(g[_])&&/-?\\d+(\\.\\d*)?(e-?\\d+)?$/.test(b)){l(g[_],b,d),y=!0;break}if(g[_+1]&&g[_+1].match(/\\W/)){l(g[_],d.slice(_+2),d),y=!0;break}l(g[_],!r.strings[g[_]]||\"\",d)}else l(g[_],b,d)}p=d.slice(-1)[0];y||\"-\"===p||(!e[u+1]||/^(-|--)[^-]/.test(e[u+1])||r.bools[p]||i[p]&&h(p)?e[u+1]&&/true|false/.test(e[u+1])?(l(p,\"true\"===e[u+1],d),u++):l(p,!r.strings[p]||\"\",d):(l(p,e[u+1],d),u++))}else if(r.unknownFn&&!1===r.unknownFn(d)||o._.push(r.strings._||!n(d)?d:Number(d)),t.stopEarly){o._.push.apply(o._,e.slice(u+1));break}}return Object.keys(s).forEach(function(e){var t,n,r;t=o,n=e.split(\".\"),r=t,n.slice(0,-1).forEach(function(e){r=r[e]||{}}),n[n.length-1]in r||(c(o,e.split(\".\"),s[e]),(i[e]||[]).forEach(function(t){c(o,t.split(\".\"),s[e])}))}),t[\"--\"]?(o[\"--\"]=new Array,a.forEach(function(e){o[\"--\"].push(e)})):a.forEach(function(e){o._.push(e)}),o}},function(e,t,n){\"use strict\";function r(){if(!(this instanceof r))return new r;if(arguments.length)throw new Error(\"The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.\");this.files={},this.comment=null,this.root=\"\",this.clone=function(){var e=new r;for(var t in this)\"function\"!=typeof this[t]&&(e[t]=this[t]);return e}}r.prototype=n(52),r.prototype.loadAsync=n(79),r.support=n(3),r.defaults=n(31),r.version=\"3.2.0\",r.loadAsync=function(e,t){return(new r).loadAsync(e,t)},r.external=n(11),e.exports=r},function(e,t){e.exports=require(\"https\")},function(e,t){e.exports=require(\"crypto\")},function(e,t,n){\"use strict\";var r=n(5),i=n(0),s=n(1),o=n(30),a=n(31),l=n(18),c=n(65),h=n(66),u=n(16),d=n(78),f=function(e,t,n){var r,o=i.getTypeOf(t),h=i.extend(n||{},a);h.date=h.date||new Date,null!==h.compression&&(h.compression=h.compression.toUpperCase()),\"string\"==typeof h.unixPermissions&&(h.unixPermissions=parseInt(h.unixPermissions,8)),h.unixPermissions&&16384&h.unixPermissions&&(h.dir=!0),h.dosPermissions&&16&h.dosPermissions&&(h.dir=!0),h.dir&&(e=m(e)),h.createFolders&&(r=p(e))&&g.call(this,r,!0);var f=\"string\"===o&&!1===h.binary&&!1===h.base64;n&&void 0!==n.binary||(h.binary=!f),(t instanceof l&&0===t.uncompressedSize||h.dir||!t||0===t.length)&&(h.base64=!1,h.binary=!0,t=\"\",h.compression=\"STORE\",o=\"string\");var y=null;y=t instanceof l||t instanceof s?t:u.isNode&&u.isStream(t)?new d(e,t):i.prepareContent(e,t,h.binary,h.optimizedBinaryString,h.base64);var _=new c(e,y,h);this.files[e]=_},p=function(e){\"/\"===e.slice(-1)&&(e=e.substring(0,e.length-1));var t=e.lastIndexOf(\"/\");return t>0?e.substring(0,t):\"\"},m=function(e){return\"/\"!==e.slice(-1)&&(e+=\"/\"),e},g=function(e,t){return t=void 0!==t?t:a.createFolders,e=m(e),this.files[e]||f.call(this,e,null,{dir:!0,createFolders:t}),this.files[e]};function y(e){return\"[object RegExp]\"===Object.prototype.toString.call(e)}var _={load:function(){throw new Error(\"This method has been removed in JSZip 3.0, please check the upgrade guide.\")},forEach:function(e){var t,n,r;for(t in this.files)this.files.hasOwnProperty(t)&&(r=this.files[t],(n=t.slice(this.root.length,t.length))&&t.slice(0,this.root.length)===this.root&&e(n,r))},filter:function(e){var t=[];return this.forEach(function(n,r){e(n,r)&&t.push(r)}),t},file:function(e,t,n){if(1===arguments.length){if(y(e)){var r=e;return this.filter(function(e,t){return!t.dir&&r.test(e)})}var i=this.files[this.root+e];return i&&!i.dir?i:null}return e=this.root+e,f.call(this,e,t,n),this},folder:function(e){if(!e)return this;if(y(e))return this.filter(function(t,n){return n.dir&&e.test(t)});var t=this.root+e,n=g.call(this,t),r=this.clone();return r.root=n.name,r},remove:function(e){e=this.root+e;var t=this.files[e];if(t||(\"/\"!==e.slice(-1)&&(e+=\"/\"),t=this.files[e]),t&&!t.dir)delete this.files[e];else for(var n=this.filter(function(t,n){return n.name.slice(0,e.length)===e}),r=0;r<n.length;r++)delete this.files[n[r].name];return this},generate:function(e){throw new Error(\"This method has been removed in JSZip 3.0, please check the upgrade guide.\")},generateInternalStream:function(e){var t,n={};try{if((n=i.extend(e||{},{streamFiles:!1,compression:\"STORE\",compressionOptions:null,type:\"\",platform:\"DOS\",comment:null,mimeType:\"application/zip\",encodeFileName:r.utf8encode})).type=n.type.toLowerCase(),n.compression=n.compression.toUpperCase(),\"binarystring\"===n.type&&(n.type=\"string\"),!n.type)throw new Error(\"No output type specified.\");i.checkSupport(n.type),\"darwin\"!==n.platform&&\"freebsd\"!==n.platform&&\"linux\"!==n.platform&&\"sunos\"!==n.platform||(n.platform=\"UNIX\"),\"win32\"===n.platform&&(n.platform=\"DOS\");var a=n.comment||this.comment||\"\";t=h.generateWorker(this,n,a)}catch(e){(t=new s(\"error\")).error(e)}return new o(t,n.type||\"string\",n.mimeType)},generateAsync:function(e,t){return this.generateInternalStream(e).accumulate(t)},generateNodeStream:function(e,t){return(e=e||{}).type||(e.type=\"nodebuffer\"),this.generateInternalStream(e).toNodejsStream(t)}};e.exports=_},function(e,t){var n={}.toString;e.exports=Array.isArray||function(e){return\"[object Array]\"==n.call(e)}},function(e,t){e.exports=require(\"events\")},function(e,t){e.exports=require(\"buffer\")},function(e,t){\"function\"==typeof Object.create?e.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:e.exports=function(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}},function(e,t,n){\"use strict\";var r=n(14).Buffer,i=n(15);e.exports=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,e),this.head=null,this.tail=null,this.length=0}return e.prototype.push=function(e){var t={data:e,next:null};this.length>0?this.tail.next=t:this.head=t,this.tail=t,++this.length},e.prototype.unshift=function(e){var t={data:e,next:this.head};0===this.length&&(this.tail=t),this.head=t,++this.length},e.prototype.shift=function(){if(0!==this.length){var e=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,e}},e.prototype.clear=function(){this.head=this.tail=null,this.length=0},e.prototype.join=function(e){if(0===this.length)return\"\";for(var t=this.head,n=\"\"+t.data;t=t.next;)n+=e+t.data;return n},e.prototype.concat=function(e){if(0===this.length)return r.alloc(0);if(1===this.length)return this.head.data;for(var t,n,i,s=r.allocUnsafe(e>>>0),o=this.head,a=0;o;)t=o.data,n=s,i=a,t.copy(n,i),a+=o.data.length,o=o.next;return s},e}(),i&&i.inspect&&i.inspect.custom&&(e.exports.prototype[i.inspect.custom]=function(){var e=i.inspect({length:this.length});return this.constructor.name+\" \"+e})},function(e,t,n){e.exports=n(15).deprecate},function(e,t,n){\"use strict\";e.exports=s;var r=n(28),i=n(9);function s(e){if(!(this instanceof s))return new s(e);r.call(this,e)}i.inherits=n(10),i.inherits(s,r),s.prototype._transform=function(e,t,n){n(null,e)}},function(e,t,n){\"use strict\";e.exports=\"function\"==typeof setImmediate?setImmediate:function(){var e=[].slice.apply(arguments);e.splice(1,0,0),setTimeout.apply(null,e)}},function(e,t,n){\"use strict\";var r=n(62);function i(){}var s={},o=[\"REJECTED\"],a=[\"FULFILLED\"],l=[\"PENDING\"];if(!process.browser)var c=[\"UNHANDLED\"];function h(e){if(\"function\"!=typeof e)throw new TypeError(\"resolver must be a function\");this.state=l,this.queue=[],this.outcome=void 0,process.browser||(this.handled=c),e!==i&&p(this,e)}function u(e,t,n){this.promise=e,\"function\"==typeof t&&(this.onFulfilled=t,this.callFulfilled=this.otherCallFulfilled),\"function\"==typeof n&&(this.onRejected=n,this.callRejected=this.otherCallRejected)}function d(e,t,n){r(function(){var r;try{r=t(n)}catch(t){return s.reject(e,t)}r===e?s.reject(e,new TypeError(\"Cannot resolve promise with itself\")):s.resolve(e,r)})}function f(e){var t=e&&e.then;if(e&&(\"object\"==typeof e||\"function\"==typeof e)&&\"function\"==typeof t)return function(){t.apply(e,arguments)}}function p(e,t){var n=!1;function r(t){n||(n=!0,s.reject(e,t))}function i(t){n||(n=!0,s.resolve(e,t))}var o=m(function(){t(i,r)});\"error\"===o.status&&r(o.value)}function m(e,t){var n={};try{n.value=e(t),n.status=\"success\"}catch(e){n.status=\"error\",n.value=e}return n}e.exports=h,h.prototype.finally=function(e){if(\"function\"!=typeof e)return this;var t=this.constructor;return this.then(function(n){return t.resolve(e()).then(function(){return n})},function(n){return t.resolve(e()).then(function(){throw n})})},h.prototype.catch=function(e){return this.then(null,e)},h.prototype.then=function(e,t){if(\"function\"!=typeof e&&this.state===a||\"function\"!=typeof t&&this.state===o)return this;var n=new this.constructor(i);(process.browser||this.handled===c&&(this.handled=null),this.state!==l)?d(n,this.state===a?e:t,this.outcome):this.queue.push(new u(n,e,t));return n},u.prototype.callFulfilled=function(e){s.resolve(this.promise,e)},u.prototype.otherCallFulfilled=function(e){d(this.promise,this.onFulfilled,e)},u.prototype.callRejected=function(e){s.reject(this.promise,e)},u.prototype.otherCallRejected=function(e){d(this.promise,this.onRejected,e)},s.resolve=function(e,t){var n=m(f,t);if(\"error\"===n.status)return s.reject(e,n.value);var r=n.value;if(r)p(e,r);else{e.state=a,e.outcome=t;for(var i=-1,o=e.queue.length;++i<o;)e.queue[i].callFulfilled(t)}return e},s.reject=function(e,t){e.state=o,e.outcome=t,process.browser||e.handled===c&&r(function(){e.handled===c&&process.emit(\"unhandledRejection\",t,e)});for(var n=-1,i=e.queue.length;++n<i;)e.queue[n].callRejected(t);return e},h.resolve=function(e){if(e instanceof this)return e;return s.resolve(new this(i),e)},h.reject=function(e){var t=new this(i);return s.reject(t,e)},h.all=function(e){var t=this;if(\"[object Array]\"!==Object.prototype.toString.call(e))return this.reject(new TypeError(\"must be an array\"));var n=e.length,r=!1;if(!n)return this.resolve([]);var o=new Array(n),a=0,l=-1,c=new this(i);for(;++l<n;)h(e[l],l);return c;function h(e,i){t.resolve(e).then(function(e){o[i]=e,++a!==n||r||(r=!0,s.resolve(c,o))},function(e){r||(r=!0,s.reject(c,e))})}},h.race=function(e){var t=this;if(\"[object Array]\"!==Object.prototype.toString.call(e))return this.reject(new TypeError(\"must be an array\"));var n=e.length,r=!1;if(!n)return this.resolve([]);var o=-1,a=new this(i);for(;++o<n;)l=e[o],t.resolve(l).then(function(e){r||(r=!0,s.resolve(a,e))},function(e){r||(r=!0,s.reject(a,e))});var l;return a}},function(e,t,n){\"use strict\";var r,i,s=global.MutationObserver||global.WebKitMutationObserver;if(process.browser)if(s){var o=0,a=new s(u),l=global.document.createTextNode(\"\");a.observe(l,{characterData:!0}),r=function(){l.data=o=++o%2}}else if(global.setImmediate||void 0===global.MessageChannel)r=\"document\"in global&&\"onreadystatechange\"in global.document.createElement(\"script\")?function(){var e=global.document.createElement(\"script\");e.onreadystatechange=function(){u(),e.onreadystatechange=null,e.parentNode.removeChild(e),e=null},global.document.documentElement.appendChild(e)}:function(){setTimeout(u,0)};else{var c=new global.MessageChannel;c.port1.onmessage=u,r=function(){c.port2.postMessage(0)}}else r=function(){process.nextTick(u)};var h=[];function u(){var e,t;i=!0;for(var n=h.length;n;){for(t=h,h=[],e=-1;++e<n;)t[e]();n=h.length}i=!1}e.exports=function(e){1!==h.push(e)||i||r()}},function(e,t,n){\"use strict\";var r=n(1),i=n(0);function s(e){r.call(this,\"ConvertWorker to \"+e),this.destType=e}i.inherits(s,r),s.prototype.processChunk=function(e){this.push({data:i.transformTo(this.destType,e.data),meta:e.meta})},e.exports=s},function(e,t,n){\"use strict\";var r=n(22).Readable;function i(e,t,n){r.call(this,t),this._helper=e;var i=this;e.on(\"data\",function(e,t){i.push(e)||i._helper.pause(),n&&n(t)}).on(\"error\",function(e){i.emit(\"error\",e)}).on(\"end\",function(){i.push(null)})}n(0).inherits(i,r),i.prototype._read=function(){this._helper.resume()},e.exports=i},function(e,t,n){\"use strict\";var r=n(30),i=n(32),s=n(5),o=n(18),a=n(1),l=function(e,t,n){this.name=e,this.dir=n.dir,this.date=n.date,this.comment=n.comment,this.unixPermissions=n.unixPermissions,this.dosPermissions=n.dosPermissions,this._data=t,this._dataBinary=n.binary,this.options={compression:n.compression,compressionOptions:n.compressionOptions}};l.prototype={internalStream:function(e){var t=null,n=\"string\";try{if(!e)throw new Error(\"No output type specified.\");var i=\"string\"===(n=e.toLowerCase())||\"text\"===n;\"binarystring\"!==n&&\"text\"!==n||(n=\"string\"),t=this._decompressWorker();var o=!this._dataBinary;o&&!i&&(t=t.pipe(new s.Utf8EncodeWorker)),!o&&i&&(t=t.pipe(new s.Utf8DecodeWorker))}catch(e){(t=new a(\"error\")).error(e)}return new r(t,n,\"\")},async:function(e,t){return this.internalStream(e).accumulate(t)},nodeStream:function(e,t){return this.internalStream(e||\"nodebuffer\").toNodejsStream(t)},_compressWorker:function(e,t){if(this._data instanceof o&&this._data.compression.magic===e.magic)return this._data.getCompressedWorker();var n=this._decompressWorker();return this._dataBinary||(n=n.pipe(new s.Utf8EncodeWorker)),o.createWorkerFrom(n,e,t)},_decompressWorker:function(){return this._data instanceof o?this._data.getContentWorker():this._data instanceof a?this._data:new i(this._data)}};for(var c=[\"asText\",\"asBinary\",\"asNodeBuffer\",\"asUint8Array\",\"asArrayBuffer\"],h=function(){throw new Error(\"This method has been removed in JSZip 3.0, please check the upgrade guide.\")},u=0;u<c.length;u++)l.prototype[c[u]]=h;e.exports=l},function(e,t,n){\"use strict\";var r=n(35),i=n(77);t.generateWorker=function(e,t,n){var s=new i(t.streamFiles,n,t.platform,t.encodeFileName),o=0;try{e.forEach(function(e,n){o++;var i=function(e,t){var n=e||t,i=r[n];if(!i)throw new Error(n+\" is not a valid compression method !\");return i}(n.options.compression,t.compression),a=n.options.compressionOptions||t.compressionOptions||{},l=n.dir,c=n.date;n._compressWorker(i,a).withStreamInfo(\"file\",{name:e,dir:l,date:c,comment:n.comment||\"\",unixPermissions:n.unixPermissions,dosPermissions:n.dosPermissions}).pipe(s)}),s.entriesCount=o}catch(e){s.error(e)}return s}},function(e,t,n){\"use strict\";var r=\"undefined\"!=typeof Uint8Array&&\"undefined\"!=typeof Uint16Array&&\"undefined\"!=typeof Uint32Array,i=n(68),s=n(0),o=n(1),a=r?\"uint8array\":\"array\";function l(e,t){o.call(this,\"FlateWorker/\"+e),this._pako=null,this._pakoAction=e,this._pakoOptions=t,this.meta={}}t.magic=\"\\b\\0\",s.inherits(l,o),l.prototype.processChunk=function(e){this.meta=e.meta,null===this._pako&&this._createPako(),this._pako.push(s.transformTo(a,e.data),!1)},l.prototype.flush=function(){o.prototype.flush.call(this),null===this._pako&&this._createPako(),this._pako.push([],!0)},l.prototype.cleanUp=function(){o.prototype.cleanUp.call(this),this._pako=null},l.prototype._createPako=function(){this._pako=new i[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var e=this;this._pako.onData=function(t){e.push({data:t,meta:e.meta})}},t.compressWorker=function(e){return new l(\"Deflate\",e)},t.uncompressWorker=function(){return new l(\"Inflate\",{})}},function(e,t,n){\"use strict\";var r={};(0,n(4).assign)(r,n(69),n(72),n(40)),e.exports=r},function(e,t,n){\"use strict\";var r=n(70),i=n(4),s=n(38),o=n(20),a=n(39),l=Object.prototype.toString,c=0,h=-1,u=0,d=8;function f(e){if(!(this instanceof f))return new f(e);this.options=i.assign({level:h,method:d,chunkSize:16384,windowBits:15,memLevel:8,strategy:u,to:\"\"},e||{});var t=this.options;t.raw&&t.windowBits>0?t.windowBits=-t.windowBits:t.gzip&&t.windowBits>0&&t.windowBits<16&&(t.windowBits+=16),this.err=0,this.msg=\"\",this.ended=!1,this.chunks=[],this.strm=new a,this.strm.avail_out=0;var n=r.deflateInit2(this.strm,t.level,t.method,t.windowBits,t.memLevel,t.strategy);if(n!==c)throw new Error(o[n]);if(t.header&&r.deflateSetHeader(this.strm,t.header),t.dictionary){var p;if(p=\"string\"==typeof t.dictionary?s.string2buf(t.dictionary):\"[object ArrayBuffer]\"===l.call(t.dictionary)?new Uint8Array(t.dictionary):t.dictionary,(n=r.deflateSetDictionary(this.strm,p))!==c)throw new Error(o[n]);this._dict_set=!0}}function p(e,t){var n=new f(t);if(n.push(e,!0),n.err)throw n.msg||o[n.err];return n.result}f.prototype.push=function(e,t){var n,o,a=this.strm,h=this.options.chunkSize;if(this.ended)return!1;o=t===~~t?t:!0===t?4:0,\"string\"==typeof e?a.input=s.string2buf(e):\"[object ArrayBuffer]\"===l.call(e)?a.input=new Uint8Array(e):a.input=e,a.next_in=0,a.avail_in=a.input.length;do{if(0===a.avail_out&&(a.output=new i.Buf8(h),a.next_out=0,a.avail_out=h),1!==(n=r.deflate(a,o))&&n!==c)return this.onEnd(n),this.ended=!0,!1;0!==a.avail_out&&(0!==a.avail_in||4!==o&&2!==o)||(\"string\"===this.options.to?this.onData(s.buf2binstring(i.shrinkBuf(a.output,a.next_out))):this.onData(i.shrinkBuf(a.output,a.next_out)))}while((a.avail_in>0||0===a.avail_out)&&1!==n);return 4===o?(n=r.deflateEnd(this.strm),this.onEnd(n),this.ended=!0,n===c):2!==o||(this.onEnd(c),a.avail_out=0,!0)},f.prototype.onData=function(e){this.chunks.push(e)},f.prototype.onEnd=function(e){e===c&&(\"string\"===this.options.to?this.result=this.chunks.join(\"\"):this.result=i.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg},t.Deflate=f,t.deflate=p,t.deflateRaw=function(e,t){return(t=t||{}).raw=!0,p(e,t)},t.gzip=function(e,t){return(t=t||{}).gzip=!0,p(e,t)}},function(e,t,n){\"use strict\";var r,i=n(4),s=n(71),o=n(36),a=n(37),l=n(20),c=0,h=1,u=3,d=4,f=5,p=0,m=1,g=-2,y=-3,_=-5,b=-1,v=1,w=2,S=3,k=4,C=0,T=2,x=8,E=9,R=15,A=8,I=286,O=30,$=19,N=2*I+1,B=15,j=3,P=258,z=P+j+1,M=32,F=42,L=69,D=73,U=91,W=103,H=113,q=666,V=1,K=2,Z=3,J=4,Y=3;function G(e,t){return e.msg=l[t],t}function X(e){return(e<<1)-(e>4?9:0)}function Q(e){for(var t=e.length;--t>=0;)e[t]=0}function ee(e){var t=e.state,n=t.pending;n>e.avail_out&&(n=e.avail_out),0!==n&&(i.arraySet(e.output,t.pending_buf,t.pending_out,n,e.next_out),e.next_out+=n,t.pending_out+=n,e.total_out+=n,e.avail_out-=n,t.pending-=n,0===t.pending&&(t.pending_out=0))}function te(e,t){s._tr_flush_block(e,e.block_start>=0?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,ee(e.strm)}function ne(e,t){e.pending_buf[e.pending++]=t}function re(e,t){e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=255&t}function ie(e,t){var n,r,i=e.max_chain_length,s=e.strstart,o=e.prev_length,a=e.nice_match,l=e.strstart>e.w_size-z?e.strstart-(e.w_size-z):0,c=e.window,h=e.w_mask,u=e.prev,d=e.strstart+P,f=c[s+o-1],p=c[s+o];e.prev_length>=e.good_match&&(i>>=2),a>e.lookahead&&(a=e.lookahead);do{if(c[(n=t)+o]===p&&c[n+o-1]===f&&c[n]===c[s]&&c[++n]===c[s+1]){s+=2,n++;do{}while(c[++s]===c[++n]&&c[++s]===c[++n]&&c[++s]===c[++n]&&c[++s]===c[++n]&&c[++s]===c[++n]&&c[++s]===c[++n]&&c[++s]===c[++n]&&c[++s]===c[++n]&&s<d);if(r=P-(d-s),s=d-P,r>o){if(e.match_start=t,o=r,r>=a)break;f=c[s+o-1],p=c[s+o]}}}while((t=u[t&h])>l&&0!=--i);return o<=e.lookahead?o:e.lookahead}function se(e){var t,n,r,s,l,c,h,u,d,f,p=e.w_size;do{if(s=e.window_size-e.lookahead-e.strstart,e.strstart>=p+(p-z)){i.arraySet(e.window,e.window,p,p,0),e.match_start-=p,e.strstart-=p,e.block_start-=p,t=n=e.hash_size;do{r=e.head[--t],e.head[t]=r>=p?r-p:0}while(--n);t=n=p;do{r=e.prev[--t],e.prev[t]=r>=p?r-p:0}while(--n);s+=p}if(0===e.strm.avail_in)break;if(c=e.strm,h=e.window,u=e.strstart+e.lookahead,d=s,f=void 0,(f=c.avail_in)>d&&(f=d),n=0===f?0:(c.avail_in-=f,i.arraySet(h,c.input,c.next_in,f,u),1===c.state.wrap?c.adler=o(c.adler,h,f,u):2===c.state.wrap&&(c.adler=a(c.adler,h,f,u)),c.next_in+=f,c.total_in+=f,f),e.lookahead+=n,e.lookahead+e.insert>=j)for(l=e.strstart-e.insert,e.ins_h=e.window[l],e.ins_h=(e.ins_h<<e.hash_shift^e.window[l+1])&e.hash_mask;e.insert&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[l+j-1])&e.hash_mask,e.prev[l&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=l,l++,e.insert--,!(e.lookahead+e.insert<j)););}while(e.lookahead<z&&0!==e.strm.avail_in)}function oe(e,t){for(var n,r;;){if(e.lookahead<z){if(se(e),e.lookahead<z&&t===c)return V;if(0===e.lookahead)break}if(n=0,e.lookahead>=j&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+j-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!==n&&e.strstart-n<=e.w_size-z&&(e.match_length=ie(e,n)),e.match_length>=j)if(r=s._tr_tally(e,e.strstart-e.match_start,e.match_length-j),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=j){e.match_length--;do{e.strstart++,e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+j-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart}while(0!=--e.match_length);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+1])&e.hash_mask;else r=s._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(r&&(te(e,!1),0===e.strm.avail_out))return V}return e.insert=e.strstart<j-1?e.strstart:j-1,t===d?(te(e,!0),0===e.strm.avail_out?Z:J):e.last_lit&&(te(e,!1),0===e.strm.avail_out)?V:K}function ae(e,t){for(var n,r,i;;){if(e.lookahead<z){if(se(e),e.lookahead<z&&t===c)return V;if(0===e.lookahead)break}if(n=0,e.lookahead>=j&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+j-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=j-1,0!==n&&e.prev_length<e.max_lazy_match&&e.strstart-n<=e.w_size-z&&(e.match_length=ie(e,n),e.match_length<=5&&(e.strategy===v||e.match_length===j&&e.strstart-e.match_start>4096)&&(e.match_length=j-1)),e.prev_length>=j&&e.match_length<=e.prev_length){i=e.strstart+e.lookahead-j,r=s._tr_tally(e,e.strstart-1-e.prev_match,e.prev_length-j),e.lookahead-=e.prev_length-1,e.prev_length-=2;do{++e.strstart<=i&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+j-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart)}while(0!=--e.prev_length);if(e.match_available=0,e.match_length=j-1,e.strstart++,r&&(te(e,!1),0===e.strm.avail_out))return V}else if(e.match_available){if((r=s._tr_tally(e,0,e.window[e.strstart-1]))&&te(e,!1),e.strstart++,e.lookahead--,0===e.strm.avail_out)return V}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(r=s._tr_tally(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<j-1?e.strstart:j-1,t===d?(te(e,!0),0===e.strm.avail_out?Z:J):e.last_lit&&(te(e,!1),0===e.strm.avail_out)?V:K}function le(e,t,n,r,i){this.good_length=e,this.max_lazy=t,this.nice_length=n,this.max_chain=r,this.func=i}function ce(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=x,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new i.Buf16(2*N),this.dyn_dtree=new i.Buf16(2*(2*O+1)),this.bl_tree=new i.Buf16(2*(2*$+1)),Q(this.dyn_ltree),Q(this.dyn_dtree),Q(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new i.Buf16(B+1),this.heap=new i.Buf16(2*I+1),Q(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new i.Buf16(2*I+1),Q(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function he(e){var t;return e&&e.state?(e.total_in=e.total_out=0,e.data_type=T,(t=e.state).pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=t.wrap?F:H,e.adler=2===t.wrap?0:1,t.last_flush=c,s._tr_init(t),p):G(e,g)}function ue(e){var t,n=he(e);return n===p&&((t=e.state).window_size=2*t.w_size,Q(t.head),t.max_lazy_match=r[t.level].max_lazy,t.good_match=r[t.level].good_length,t.nice_match=r[t.level].nice_length,t.max_chain_length=r[t.level].max_chain,t.strstart=0,t.block_start=0,t.lookahead=0,t.insert=0,t.match_length=t.prev_length=j-1,t.match_available=0,t.ins_h=0),n}function de(e,t,n,r,s,o){if(!e)return g;var a=1;if(t===b&&(t=6),r<0?(a=0,r=-r):r>15&&(a=2,r-=16),s<1||s>E||n!==x||r<8||r>15||t<0||t>9||o<0||o>k)return G(e,g);8===r&&(r=9);var l=new ce;return e.state=l,l.strm=e,l.wrap=a,l.gzhead=null,l.w_bits=r,l.w_size=1<<l.w_bits,l.w_mask=l.w_size-1,l.hash_bits=s+7,l.hash_size=1<<l.hash_bits,l.hash_mask=l.hash_size-1,l.hash_shift=~~((l.hash_bits+j-1)/j),l.window=new i.Buf8(2*l.w_size),l.head=new i.Buf16(l.hash_size),l.prev=new i.Buf16(l.w_size),l.lit_bufsize=1<<s+6,l.pending_buf_size=4*l.lit_bufsize,l.pending_buf=new i.Buf8(l.pending_buf_size),l.d_buf=1*l.lit_bufsize,l.l_buf=3*l.lit_bufsize,l.level=t,l.strategy=o,l.method=n,ue(e)}r=[new le(0,0,0,0,function(e,t){var n=65535;for(n>e.pending_buf_size-5&&(n=e.pending_buf_size-5);;){if(e.lookahead<=1){if(se(e),0===e.lookahead&&t===c)return V;if(0===e.lookahead)break}e.strstart+=e.lookahead,e.lookahead=0;var r=e.block_start+n;if((0===e.strstart||e.strstart>=r)&&(e.lookahead=e.strstart-r,e.strstart=r,te(e,!1),0===e.strm.avail_out))return V;if(e.strstart-e.block_start>=e.w_size-z&&(te(e,!1),0===e.strm.avail_out))return V}return e.insert=0,t===d?(te(e,!0),0===e.strm.avail_out?Z:J):(e.strstart>e.block_start&&(te(e,!1),e.strm.avail_out),V)}),new le(4,4,8,4,oe),new le(4,5,16,8,oe),new le(4,6,32,32,oe),new le(4,4,16,16,ae),new le(8,16,32,32,ae),new le(8,16,128,128,ae),new le(8,32,128,256,ae),new le(32,128,258,1024,ae),new le(32,258,258,4096,ae)],t.deflateInit=function(e,t){return de(e,t,x,R,A,C)},t.deflateInit2=de,t.deflateReset=ue,t.deflateResetKeep=he,t.deflateSetHeader=function(e,t){return e&&e.state?2!==e.state.wrap?g:(e.state.gzhead=t,p):g},t.deflate=function(e,t){var n,i,o,l;if(!e||!e.state||t>f||t<0)return e?G(e,g):g;if(i=e.state,!e.output||!e.input&&0!==e.avail_in||i.status===q&&t!==d)return G(e,0===e.avail_out?_:g);if(i.strm=e,n=i.last_flush,i.last_flush=t,i.status===F)if(2===i.wrap)e.adler=0,ne(i,31),ne(i,139),ne(i,8),i.gzhead?(ne(i,(i.gzhead.text?1:0)+(i.gzhead.hcrc?2:0)+(i.gzhead.extra?4:0)+(i.gzhead.name?8:0)+(i.gzhead.comment?16:0)),ne(i,255&i.gzhead.time),ne(i,i.gzhead.time>>8&255),ne(i,i.gzhead.time>>16&255),ne(i,i.gzhead.time>>24&255),ne(i,9===i.level?2:i.strategy>=w||i.level<2?4:0),ne(i,255&i.gzhead.os),i.gzhead.extra&&i.gzhead.extra.length&&(ne(i,255&i.gzhead.extra.length),ne(i,i.gzhead.extra.length>>8&255)),i.gzhead.hcrc&&(e.adler=a(e.adler,i.pending_buf,i.pending,0)),i.gzindex=0,i.status=L):(ne(i,0),ne(i,0),ne(i,0),ne(i,0),ne(i,0),ne(i,9===i.level?2:i.strategy>=w||i.level<2?4:0),ne(i,Y),i.status=H);else{var y=x+(i.w_bits-8<<4)<<8;y|=(i.strategy>=w||i.level<2?0:i.level<6?1:6===i.level?2:3)<<6,0!==i.strstart&&(y|=M),y+=31-y%31,i.status=H,re(i,y),0!==i.strstart&&(re(i,e.adler>>>16),re(i,65535&e.adler)),e.adler=1}if(i.status===L)if(i.gzhead.extra){for(o=i.pending;i.gzindex<(65535&i.gzhead.extra.length)&&(i.pending!==i.pending_buf_size||(i.gzhead.hcrc&&i.pending>o&&(e.adler=a(e.adler,i.pending_buf,i.pending-o,o)),ee(e),o=i.pending,i.pending!==i.pending_buf_size));)ne(i,255&i.gzhead.extra[i.gzindex]),i.gzindex++;i.gzhead.hcrc&&i.pending>o&&(e.adler=a(e.adler,i.pending_buf,i.pending-o,o)),i.gzindex===i.gzhead.extra.length&&(i.gzindex=0,i.status=D)}else i.status=D;if(i.status===D)if(i.gzhead.name){o=i.pending;do{if(i.pending===i.pending_buf_size&&(i.gzhead.hcrc&&i.pending>o&&(e.adler=a(e.adler,i.pending_buf,i.pending-o,o)),ee(e),o=i.pending,i.pending===i.pending_buf_size)){l=1;break}l=i.gzindex<i.gzhead.name.length?255&i.gzhead.name.charCodeAt(i.gzindex++):0,ne(i,l)}while(0!==l);i.gzhead.hcrc&&i.pending>o&&(e.adler=a(e.adler,i.pending_buf,i.pending-o,o)),0===l&&(i.gzindex=0,i.status=U)}else i.status=U;if(i.status===U)if(i.gzhead.comment){o=i.pending;do{if(i.pending===i.pending_buf_size&&(i.gzhead.hcrc&&i.pending>o&&(e.adler=a(e.adler,i.pending_buf,i.pending-o,o)),ee(e),o=i.pending,i.pending===i.pending_buf_size)){l=1;break}l=i.gzindex<i.gzhead.comment.length?255&i.gzhead.comment.charCodeAt(i.gzindex++):0,ne(i,l)}while(0!==l);i.gzhead.hcrc&&i.pending>o&&(e.adler=a(e.adler,i.pending_buf,i.pending-o,o)),0===l&&(i.status=W)}else i.status=W;if(i.status===W&&(i.gzhead.hcrc?(i.pending+2>i.pending_buf_size&&ee(e),i.pending+2<=i.pending_buf_size&&(ne(i,255&e.adler),ne(i,e.adler>>8&255),e.adler=0,i.status=H)):i.status=H),0!==i.pending){if(ee(e),0===e.avail_out)return i.last_flush=-1,p}else if(0===e.avail_in&&X(t)<=X(n)&&t!==d)return G(e,_);if(i.status===q&&0!==e.avail_in)return G(e,_);if(0!==e.avail_in||0!==i.lookahead||t!==c&&i.status!==q){var b=i.strategy===w?function(e,t){for(var n;;){if(0===e.lookahead&&(se(e),0===e.lookahead)){if(t===c)return V;break}if(e.match_length=0,n=s._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,n&&(te(e,!1),0===e.strm.avail_out))return V}return e.insert=0,t===d?(te(e,!0),0===e.strm.avail_out?Z:J):e.last_lit&&(te(e,!1),0===e.strm.avail_out)?V:K}(i,t):i.strategy===S?function(e,t){for(var n,r,i,o,a=e.window;;){if(e.lookahead<=P){if(se(e),e.lookahead<=P&&t===c)return V;if(0===e.lookahead)break}if(e.match_length=0,e.lookahead>=j&&e.strstart>0&&(r=a[i=e.strstart-1])===a[++i]&&r===a[++i]&&r===a[++i]){o=e.strstart+P;do{}while(r===a[++i]&&r===a[++i]&&r===a[++i]&&r===a[++i]&&r===a[++i]&&r===a[++i]&&r===a[++i]&&r===a[++i]&&i<o);e.match_length=P-(o-i),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=j?(n=s._tr_tally(e,1,e.match_length-j),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(n=s._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),n&&(te(e,!1),0===e.strm.avail_out))return V}return e.insert=0,t===d?(te(e,!0),0===e.strm.avail_out?Z:J):e.last_lit&&(te(e,!1),0===e.strm.avail_out)?V:K}(i,t):r[i.level].func(i,t);if(b!==Z&&b!==J||(i.status=q),b===V||b===Z)return 0===e.avail_out&&(i.last_flush=-1),p;if(b===K&&(t===h?s._tr_align(i):t!==f&&(s._tr_stored_block(i,0,0,!1),t===u&&(Q(i.head),0===i.lookahead&&(i.strstart=0,i.block_start=0,i.insert=0))),ee(e),0===e.avail_out))return i.last_flush=-1,p}return t!==d?p:i.wrap<=0?m:(2===i.wrap?(ne(i,255&e.adler),ne(i,e.adler>>8&255),ne(i,e.adler>>16&255),ne(i,e.adler>>24&255),ne(i,255&e.total_in),ne(i,e.total_in>>8&255),ne(i,e.total_in>>16&255),ne(i,e.total_in>>24&255)):(re(i,e.adler>>>16),re(i,65535&e.adler)),ee(e),i.wrap>0&&(i.wrap=-i.wrap),0!==i.pending?p:m)},t.deflateEnd=function(e){var t;return e&&e.state?(t=e.state.status)!==F&&t!==L&&t!==D&&t!==U&&t!==W&&t!==H&&t!==q?G(e,g):(e.state=null,t===H?G(e,y):p):g},t.deflateSetDictionary=function(e,t){var n,r,s,a,l,c,h,u,d=t.length;if(!e||!e.state)return g;if(2===(a=(n=e.state).wrap)||1===a&&n.status!==F||n.lookahead)return g;for(1===a&&(e.adler=o(e.adler,t,d,0)),n.wrap=0,d>=n.w_size&&(0===a&&(Q(n.head),n.strstart=0,n.block_start=0,n.insert=0),u=new i.Buf8(n.w_size),i.arraySet(u,t,d-n.w_size,n.w_size,0),t=u,d=n.w_size),l=e.avail_in,c=e.next_in,h=e.input,e.avail_in=d,e.next_in=0,e.input=t,se(n);n.lookahead>=j;){r=n.strstart,s=n.lookahead-(j-1);do{n.ins_h=(n.ins_h<<n.hash_shift^n.window[r+j-1])&n.hash_mask,n.prev[r&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=r,r++}while(--s);n.strstart=r,n.lookahead=j-1,se(n)}return n.strstart+=n.lookahead,n.block_start=n.strstart,n.insert=n.lookahead,n.lookahead=0,n.match_length=n.prev_length=j-1,n.match_available=0,e.next_in=c,e.input=h,e.avail_in=l,n.wrap=a,p},t.deflateInfo=\"pako deflate (from Nodeca project)\"},function(e,t,n){\"use strict\";var r=n(4),i=4,s=0,o=1,a=2;function l(e){for(var t=e.length;--t>=0;)e[t]=0}var c=0,h=1,u=2,d=29,f=256,p=f+1+d,m=30,g=19,y=2*p+1,_=15,b=16,v=7,w=256,S=16,k=17,C=18,T=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],x=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],E=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],R=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],A=new Array(2*(p+2));l(A);var I=new Array(2*m);l(I);var O=new Array(512);l(O);var $=new Array(256);l($);var N=new Array(d);l(N);var B,j,P,z=new Array(m);function M(e,t,n,r,i){this.static_tree=e,this.extra_bits=t,this.extra_base=n,this.elems=r,this.max_length=i,this.has_stree=e&&e.length}function F(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}function L(e){return e<256?O[e]:O[256+(e>>>7)]}function D(e,t){e.pending_buf[e.pending++]=255&t,e.pending_buf[e.pending++]=t>>>8&255}function U(e,t,n){e.bi_valid>b-n?(e.bi_buf|=t<<e.bi_valid&65535,D(e,e.bi_buf),e.bi_buf=t>>b-e.bi_valid,e.bi_valid+=n-b):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=n)}function W(e,t,n){U(e,n[2*t],n[2*t+1])}function H(e,t){var n=0;do{n|=1&e,e>>>=1,n<<=1}while(--t>0);return n>>>1}function q(e,t,n){var r,i,s=new Array(_+1),o=0;for(r=1;r<=_;r++)s[r]=o=o+n[r-1]<<1;for(i=0;i<=t;i++){var a=e[2*i+1];0!==a&&(e[2*i]=H(s[a]++,a))}}function V(e){var t;for(t=0;t<p;t++)e.dyn_ltree[2*t]=0;for(t=0;t<m;t++)e.dyn_dtree[2*t]=0;for(t=0;t<g;t++)e.bl_tree[2*t]=0;e.dyn_ltree[2*w]=1,e.opt_len=e.static_len=0,e.last_lit=e.matches=0}function K(e){e.bi_valid>8?D(e,e.bi_buf):e.bi_valid>0&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0}function Z(e,t,n,r){var i=2*t,s=2*n;return e[i]<e[s]||e[i]===e[s]&&r[t]<=r[n]}function J(e,t,n){for(var r=e.heap[n],i=n<<1;i<=e.heap_len&&(i<e.heap_len&&Z(t,e.heap[i+1],e.heap[i],e.depth)&&i++,!Z(t,r,e.heap[i],e.depth));)e.heap[n]=e.heap[i],n=i,i<<=1;e.heap[n]=r}function Y(e,t,n){var r,i,s,o,a=0;if(0!==e.last_lit)do{r=e.pending_buf[e.d_buf+2*a]<<8|e.pending_buf[e.d_buf+2*a+1],i=e.pending_buf[e.l_buf+a],a++,0===r?W(e,i,t):(W(e,(s=$[i])+f+1,t),0!==(o=T[s])&&U(e,i-=N[s],o),W(e,s=L(--r),n),0!==(o=x[s])&&U(e,r-=z[s],o))}while(a<e.last_lit);W(e,w,t)}function G(e,t){var n,r,i,s=t.dyn_tree,o=t.stat_desc.static_tree,a=t.stat_desc.has_stree,l=t.stat_desc.elems,c=-1;for(e.heap_len=0,e.heap_max=y,n=0;n<l;n++)0!==s[2*n]?(e.heap[++e.heap_len]=c=n,e.depth[n]=0):s[2*n+1]=0;for(;e.heap_len<2;)s[2*(i=e.heap[++e.heap_len]=c<2?++c:0)]=1,e.depth[i]=0,e.opt_len--,a&&(e.static_len-=o[2*i+1]);for(t.max_code=c,n=e.heap_len>>1;n>=1;n--)J(e,s,n);i=l;do{n=e.heap[1],e.heap[1]=e.heap[e.heap_len--],J(e,s,1),r=e.heap[1],e.heap[--e.heap_max]=n,e.heap[--e.heap_max]=r,s[2*i]=s[2*n]+s[2*r],e.depth[i]=(e.depth[n]>=e.depth[r]?e.depth[n]:e.depth[r])+1,s[2*n+1]=s[2*r+1]=i,e.heap[1]=i++,J(e,s,1)}while(e.heap_len>=2);e.heap[--e.heap_max]=e.heap[1],function(e,t){var n,r,i,s,o,a,l=t.dyn_tree,c=t.max_code,h=t.stat_desc.static_tree,u=t.stat_desc.has_stree,d=t.stat_desc.extra_bits,f=t.stat_desc.extra_base,p=t.stat_desc.max_length,m=0;for(s=0;s<=_;s++)e.bl_count[s]=0;for(l[2*e.heap[e.heap_max]+1]=0,n=e.heap_max+1;n<y;n++)(s=l[2*l[2*(r=e.heap[n])+1]+1]+1)>p&&(s=p,m++),l[2*r+1]=s,r>c||(e.bl_count[s]++,o=0,r>=f&&(o=d[r-f]),a=l[2*r],e.opt_len+=a*(s+o),u&&(e.static_len+=a*(h[2*r+1]+o)));if(0!==m){do{for(s=p-1;0===e.bl_count[s];)s--;e.bl_count[s]--,e.bl_count[s+1]+=2,e.bl_count[p]--,m-=2}while(m>0);for(s=p;0!==s;s--)for(r=e.bl_count[s];0!==r;)(i=e.heap[--n])>c||(l[2*i+1]!==s&&(e.opt_len+=(s-l[2*i+1])*l[2*i],l[2*i+1]=s),r--)}}(e,t),q(s,c,e.bl_count)}function X(e,t,n){var r,i,s=-1,o=t[1],a=0,l=7,c=4;for(0===o&&(l=138,c=3),t[2*(n+1)+1]=65535,r=0;r<=n;r++)i=o,o=t[2*(r+1)+1],++a<l&&i===o||(a<c?e.bl_tree[2*i]+=a:0!==i?(i!==s&&e.bl_tree[2*i]++,e.bl_tree[2*S]++):a<=10?e.bl_tree[2*k]++:e.bl_tree[2*C]++,a=0,s=i,0===o?(l=138,c=3):i===o?(l=6,c=3):(l=7,c=4))}function Q(e,t,n){var r,i,s=-1,o=t[1],a=0,l=7,c=4;for(0===o&&(l=138,c=3),r=0;r<=n;r++)if(i=o,o=t[2*(r+1)+1],!(++a<l&&i===o)){if(a<c)do{W(e,i,e.bl_tree)}while(0!=--a);else 0!==i?(i!==s&&(W(e,i,e.bl_tree),a--),W(e,S,e.bl_tree),U(e,a-3,2)):a<=10?(W(e,k,e.bl_tree),U(e,a-3,3)):(W(e,C,e.bl_tree),U(e,a-11,7));a=0,s=i,0===o?(l=138,c=3):i===o?(l=6,c=3):(l=7,c=4)}}l(z);var ee=!1;function te(e,t,n,i){U(e,(c<<1)+(i?1:0),3),function(e,t,n,i){K(e),i&&(D(e,n),D(e,~n)),r.arraySet(e.pending_buf,e.window,t,n,e.pending),e.pending+=n}(e,t,n,!0)}t._tr_init=function(e){ee||(function(){var e,t,n,r,i,s=new Array(_+1);for(n=0,r=0;r<d-1;r++)for(N[r]=n,e=0;e<1<<T[r];e++)$[n++]=r;for($[n-1]=r,i=0,r=0;r<16;r++)for(z[r]=i,e=0;e<1<<x[r];e++)O[i++]=r;for(i>>=7;r<m;r++)for(z[r]=i<<7,e=0;e<1<<x[r]-7;e++)O[256+i++]=r;for(t=0;t<=_;t++)s[t]=0;for(e=0;e<=143;)A[2*e+1]=8,e++,s[8]++;for(;e<=255;)A[2*e+1]=9,e++,s[9]++;for(;e<=279;)A[2*e+1]=7,e++,s[7]++;for(;e<=287;)A[2*e+1]=8,e++,s[8]++;for(q(A,p+1,s),e=0;e<m;e++)I[2*e+1]=5,I[2*e]=H(e,5);B=new M(A,T,f+1,p,_),j=new M(I,x,0,m,_),P=new M(new Array(0),E,0,g,v)}(),ee=!0),e.l_desc=new F(e.dyn_ltree,B),e.d_desc=new F(e.dyn_dtree,j),e.bl_desc=new F(e.bl_tree,P),e.bi_buf=0,e.bi_valid=0,V(e)},t._tr_stored_block=te,t._tr_flush_block=function(e,t,n,r){var l,c,d=0;e.level>0?(e.strm.data_type===a&&(e.strm.data_type=function(e){var t,n=4093624447;for(t=0;t<=31;t++,n>>>=1)if(1&n&&0!==e.dyn_ltree[2*t])return s;if(0!==e.dyn_ltree[18]||0!==e.dyn_ltree[20]||0!==e.dyn_ltree[26])return o;for(t=32;t<f;t++)if(0!==e.dyn_ltree[2*t])return o;return s}(e)),G(e,e.l_desc),G(e,e.d_desc),d=function(e){var t;for(X(e,e.dyn_ltree,e.l_desc.max_code),X(e,e.dyn_dtree,e.d_desc.max_code),G(e,e.bl_desc),t=g-1;t>=3&&0===e.bl_tree[2*R[t]+1];t--);return e.opt_len+=3*(t+1)+5+5+4,t}(e),l=e.opt_len+3+7>>>3,(c=e.static_len+3+7>>>3)<=l&&(l=c)):l=c=n+5,n+4<=l&&-1!==t?te(e,t,n,r):e.strategy===i||c===l?(U(e,(h<<1)+(r?1:0),3),Y(e,A,I)):(U(e,(u<<1)+(r?1:0),3),function(e,t,n,r){var i;for(U(e,t-257,5),U(e,n-1,5),U(e,r-4,4),i=0;i<r;i++)U(e,e.bl_tree[2*R[i]+1],3);Q(e,e.dyn_ltree,t-1),Q(e,e.dyn_dtree,n-1)}(e,e.l_desc.max_code+1,e.d_desc.max_code+1,d+1),Y(e,e.dyn_ltree,e.dyn_dtree)),V(e),r&&K(e)},t._tr_tally=function(e,t,n){return e.pending_buf[e.d_buf+2*e.last_lit]=t>>>8&255,e.pending_buf[e.d_buf+2*e.last_lit+1]=255&t,e.pending_buf[e.l_buf+e.last_lit]=255&n,e.last_lit++,0===t?e.dyn_ltree[2*n]++:(e.matches++,t--,e.dyn_ltree[2*($[n]+f+1)]++,e.dyn_dtree[2*L(t)]++),e.last_lit===e.lit_bufsize-1},t._tr_align=function(e){U(e,h<<1,3),W(e,w,A),function(e){16===e.bi_valid?(D(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):e.bi_valid>=8&&(e.pending_buf[e.pending++]=255&e.bi_buf,e.bi_buf>>=8,e.bi_valid-=8)}(e)}},function(e,t,n){\"use strict\";var r=n(73),i=n(4),s=n(38),o=n(40),a=n(20),l=n(39),c=n(76),h=Object.prototype.toString;function u(e){if(!(this instanceof u))return new u(e);this.options=i.assign({chunkSize:16384,windowBits:0,to:\"\"},e||{});var t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,0===t.windowBits&&(t.windowBits=-15)),!(t.windowBits>=0&&t.windowBits<16)||e&&e.windowBits||(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&0==(15&t.windowBits)&&(t.windowBits|=15),this.err=0,this.msg=\"\",this.ended=!1,this.chunks=[],this.strm=new l,this.strm.avail_out=0;var n=r.inflateInit2(this.strm,t.windowBits);if(n!==o.Z_OK)throw new Error(a[n]);if(this.header=new c,r.inflateGetHeader(this.strm,this.header),t.dictionary&&(\"string\"==typeof t.dictionary?t.dictionary=s.string2buf(t.dictionary):\"[object ArrayBuffer]\"===h.call(t.dictionary)&&(t.dictionary=new Uint8Array(t.dictionary)),t.raw&&(n=r.inflateSetDictionary(this.strm,t.dictionary))!==o.Z_OK))throw new Error(a[n])}function d(e,t){var n=new u(t);if(n.push(e,!0),n.err)throw n.msg||a[n.err];return n.result}u.prototype.push=function(e,t){var n,a,l,c,u,d=this.strm,f=this.options.chunkSize,p=this.options.dictionary,m=!1;if(this.ended)return!1;a=t===~~t?t:!0===t?o.Z_FINISH:o.Z_NO_FLUSH,\"string\"==typeof e?d.input=s.binstring2buf(e):\"[object ArrayBuffer]\"===h.call(e)?d.input=new Uint8Array(e):d.input=e,d.next_in=0,d.avail_in=d.input.length;do{if(0===d.avail_out&&(d.output=new i.Buf8(f),d.next_out=0,d.avail_out=f),(n=r.inflate(d,o.Z_NO_FLUSH))===o.Z_NEED_DICT&&p&&(n=r.inflateSetDictionary(this.strm,p)),n===o.Z_BUF_ERROR&&!0===m&&(n=o.Z_OK,m=!1),n!==o.Z_STREAM_END&&n!==o.Z_OK)return this.onEnd(n),this.ended=!0,!1;d.next_out&&(0!==d.avail_out&&n!==o.Z_STREAM_END&&(0!==d.avail_in||a!==o.Z_FINISH&&a!==o.Z_SYNC_FLUSH)||(\"string\"===this.options.to?(l=s.utf8border(d.output,d.next_out),c=d.next_out-l,u=s.buf2string(d.output,l),d.next_out=c,d.avail_out=f-c,c&&i.arraySet(d.output,d.output,l,c,0),this.onData(u)):this.onData(i.shrinkBuf(d.output,d.next_out)))),0===d.avail_in&&0===d.avail_out&&(m=!0)}while((d.avail_in>0||0===d.avail_out)&&n!==o.Z_STREAM_END);return n===o.Z_STREAM_END&&(a=o.Z_FINISH),a===o.Z_FINISH?(n=r.inflateEnd(this.strm),this.onEnd(n),this.ended=!0,n===o.Z_OK):a!==o.Z_SYNC_FLUSH||(this.onEnd(o.Z_OK),d.avail_out=0,!0)},u.prototype.onData=function(e){this.chunks.push(e)},u.prototype.onEnd=function(e){e===o.Z_OK&&(\"string\"===this.options.to?this.result=this.chunks.join(\"\"):this.result=i.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg},t.Inflate=u,t.inflate=d,t.inflateRaw=function(e,t){return(t=t||{}).raw=!0,d(e,t)},t.ungzip=d},function(e,t,n){\"use strict\";var r=n(4),i=n(36),s=n(37),o=n(74),a=n(75),l=0,c=1,h=2,u=4,d=5,f=6,p=0,m=1,g=2,y=-2,_=-3,b=-4,v=-5,w=8,S=1,k=2,C=3,T=4,x=5,E=6,R=7,A=8,I=9,O=10,$=11,N=12,B=13,j=14,P=15,z=16,M=17,F=18,L=19,D=20,U=21,W=22,H=23,q=24,V=25,K=26,Z=27,J=28,Y=29,G=30,X=31,Q=32,ee=852,te=592,ne=15;function re(e){return(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24)}function ie(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new r.Buf16(320),this.work=new r.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function se(e){var t;return e&&e.state?(t=e.state,e.total_in=e.total_out=t.total=0,e.msg=\"\",t.wrap&&(e.adler=1&t.wrap),t.mode=S,t.last=0,t.havedict=0,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new r.Buf32(ee),t.distcode=t.distdyn=new r.Buf32(te),t.sane=1,t.back=-1,p):y}function oe(e){var t;return e&&e.state?((t=e.state).wsize=0,t.whave=0,t.wnext=0,se(e)):y}function ae(e,t){var n,r;return e&&e.state?(r=e.state,t<0?(n=0,t=-t):(n=1+(t>>4),t<48&&(t&=15)),t&&(t<8||t>15)?y:(null!==r.window&&r.wbits!==t&&(r.window=null),r.wrap=n,r.wbits=t,oe(e))):y}function le(e,t){var n,r;return e?(r=new ie,e.state=r,r.window=null,(n=ae(e,t))!==p&&(e.state=null),n):y}var ce,he,ue=!0;function de(e){if(ue){var t;for(ce=new r.Buf32(512),he=new r.Buf32(32),t=0;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(a(c,e.lens,0,288,ce,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;a(h,e.lens,0,32,he,0,e.work,{bits:5}),ue=!1}e.lencode=ce,e.lenbits=9,e.distcode=he,e.distbits=5}function fe(e,t,n,i){var s,o=e.state;return null===o.window&&(o.wsize=1<<o.wbits,o.wnext=0,o.whave=0,o.window=new r.Buf8(o.wsize)),i>=o.wsize?(r.arraySet(o.window,t,n-o.wsize,o.wsize,0),o.wnext=0,o.whave=o.wsize):((s=o.wsize-o.wnext)>i&&(s=i),r.arraySet(o.window,t,n-i,s,o.wnext),(i-=s)?(r.arraySet(o.window,t,n-i,i,0),o.wnext=i,o.whave=o.wsize):(o.wnext+=s,o.wnext===o.wsize&&(o.wnext=0),o.whave<o.wsize&&(o.whave+=s))),0}t.inflateReset=oe,t.inflateReset2=ae,t.inflateResetKeep=se,t.inflateInit=function(e){return le(e,ne)},t.inflateInit2=le,t.inflate=function(e,t){var n,ee,te,ne,ie,se,oe,ae,le,ce,he,ue,pe,me,ge,ye,_e,be,ve,we,Se,ke,Ce,Te,xe=0,Ee=new r.Buf8(4),Re=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!e||!e.state||!e.output||!e.input&&0!==e.avail_in)return y;(n=e.state).mode===N&&(n.mode=B),ie=e.next_out,te=e.output,oe=e.avail_out,ne=e.next_in,ee=e.input,se=e.avail_in,ae=n.hold,le=n.bits,ce=se,he=oe,ke=p;e:for(;;)switch(n.mode){case S:if(0===n.wrap){n.mode=B;break}for(;le<16;){if(0===se)break e;se--,ae+=ee[ne++]<<le,le+=8}if(2&n.wrap&&35615===ae){n.check=0,Ee[0]=255&ae,Ee[1]=ae>>>8&255,n.check=s(n.check,Ee,2,0),ae=0,le=0,n.mode=k;break}if(n.flags=0,n.head&&(n.head.done=!1),!(1&n.wrap)||(((255&ae)<<8)+(ae>>8))%31){e.msg=\"incorrect header check\",n.mode=G;break}if((15&ae)!==w){e.msg=\"unknown compression method\",n.mode=G;break}if(le-=4,Se=8+(15&(ae>>>=4)),0===n.wbits)n.wbits=Se;else if(Se>n.wbits){e.msg=\"invalid window size\",n.mode=G;break}n.dmax=1<<Se,e.adler=n.check=1,n.mode=512&ae?O:N,ae=0,le=0;break;case k:for(;le<16;){if(0===se)break e;se--,ae+=ee[ne++]<<le,le+=8}if(n.flags=ae,(255&n.flags)!==w){e.msg=\"unknown compression method\",n.mode=G;break}if(57344&n.flags){e.msg=\"unknown header flags set\",n.mode=G;break}n.head&&(n.head.text=ae>>8&1),512&n.flags&&(Ee[0]=255&ae,Ee[1]=ae>>>8&255,n.check=s(n.check,Ee,2,0)),ae=0,le=0,n.mode=C;case C:for(;le<32;){if(0===se)break e;se--,ae+=ee[ne++]<<le,le+=8}n.head&&(n.head.time=ae),512&n.flags&&(Ee[0]=255&ae,Ee[1]=ae>>>8&255,Ee[2]=ae>>>16&255,Ee[3]=ae>>>24&255,n.check=s(n.check,Ee,4,0)),ae=0,le=0,n.mode=T;case T:for(;le<16;){if(0===se)break e;se--,ae+=ee[ne++]<<le,le+=8}n.head&&(n.head.xflags=255&ae,n.head.os=ae>>8),512&n.flags&&(Ee[0]=255&ae,Ee[1]=ae>>>8&255,n.check=s(n.check,Ee,2,0)),ae=0,le=0,n.mode=x;case x:if(1024&n.flags){for(;le<16;){if(0===se)break e;se--,ae+=ee[ne++]<<le,le+=8}n.length=ae,n.head&&(n.head.extra_len=ae),512&n.flags&&(Ee[0]=255&ae,Ee[1]=ae>>>8&255,n.check=s(n.check,Ee,2,0)),ae=0,le=0}else n.head&&(n.head.extra=null);n.mode=E;case E:if(1024&n.flags&&((ue=n.length)>se&&(ue=se),ue&&(n.head&&(Se=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Array(n.head.extra_len)),r.arraySet(n.head.extra,ee,ne,ue,Se)),512&n.flags&&(n.check=s(n.check,ee,ue,ne)),se-=ue,ne+=ue,n.length-=ue),n.length))break e;n.length=0,n.mode=R;case R:if(2048&n.flags){if(0===se)break e;ue=0;do{Se=ee[ne+ue++],n.head&&Se&&n.length<65536&&(n.head.name+=String.fromCharCode(Se))}while(Se&&ue<se);if(512&n.flags&&(n.check=s(n.check,ee,ue,ne)),se-=ue,ne+=ue,Se)break e}else n.head&&(n.head.name=null);n.length=0,n.mode=A;case A:if(4096&n.flags){if(0===se)break e;ue=0;do{Se=ee[ne+ue++],n.head&&Se&&n.length<65536&&(n.head.comment+=String.fromCharCode(Se))}while(Se&&ue<se);if(512&n.flags&&(n.check=s(n.check,ee,ue,ne)),se-=ue,ne+=ue,Se)break e}else n.head&&(n.head.comment=null);n.mode=I;case I:if(512&n.flags){for(;le<16;){if(0===se)break e;se--,ae+=ee[ne++]<<le,le+=8}if(ae!==(65535&n.check)){e.msg=\"header crc mismatch\",n.mode=G;break}ae=0,le=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),e.adler=n.check=0,n.mode=N;break;case O:for(;le<32;){if(0===se)break e;se--,ae+=ee[ne++]<<le,le+=8}e.adler=n.check=re(ae),ae=0,le=0,n.mode=$;case $:if(0===n.havedict)return e.next_out=ie,e.avail_out=oe,e.next_in=ne,e.avail_in=se,n.hold=ae,n.bits=le,g;e.adler=n.check=1,n.mode=N;case N:if(t===d||t===f)break e;case B:if(n.last){ae>>>=7&le,le-=7&le,n.mode=Z;break}for(;le<3;){if(0===se)break e;se--,ae+=ee[ne++]<<le,le+=8}switch(n.last=1&ae,le-=1,3&(ae>>>=1)){case 0:n.mode=j;break;case 1:if(de(n),n.mode=D,t===f){ae>>>=2,le-=2;break e}break;case 2:n.mode=M;break;case 3:e.msg=\"invalid block type\",n.mode=G}ae>>>=2,le-=2;break;case j:for(ae>>>=7&le,le-=7&le;le<32;){if(0===se)break e;se--,ae+=ee[ne++]<<le,le+=8}if((65535&ae)!=(ae>>>16^65535)){e.msg=\"invalid stored block lengths\",n.mode=G;break}if(n.length=65535&ae,ae=0,le=0,n.mode=P,t===f)break e;case P:n.mode=z;case z:if(ue=n.length){if(ue>se&&(ue=se),ue>oe&&(ue=oe),0===ue)break e;r.arraySet(te,ee,ne,ue,ie),se-=ue,ne+=ue,oe-=ue,ie+=ue,n.length-=ue;break}n.mode=N;break;case M:for(;le<14;){if(0===se)break e;se--,ae+=ee[ne++]<<le,le+=8}if(n.nlen=257+(31&ae),ae>>>=5,le-=5,n.ndist=1+(31&ae),ae>>>=5,le-=5,n.ncode=4+(15&ae),ae>>>=4,le-=4,n.nlen>286||n.ndist>30){e.msg=\"too many length or distance symbols\",n.mode=G;break}n.have=0,n.mode=F;case F:for(;n.have<n.ncode;){for(;le<3;){if(0===se)break e;se--,ae+=ee[ne++]<<le,le+=8}n.lens[Re[n.have++]]=7&ae,ae>>>=3,le-=3}for(;n.have<19;)n.lens[Re[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,Ce={bits:n.lenbits},ke=a(l,n.lens,0,19,n.lencode,0,n.work,Ce),n.lenbits=Ce.bits,ke){e.msg=\"invalid code lengths set\",n.mode=G;break}n.have=0,n.mode=L;case L:for(;n.have<n.nlen+n.ndist;){for(;ye=(xe=n.lencode[ae&(1<<n.lenbits)-1])>>>16&255,_e=65535&xe,!((ge=xe>>>24)<=le);){if(0===se)break e;se--,ae+=ee[ne++]<<le,le+=8}if(_e<16)ae>>>=ge,le-=ge,n.lens[n.have++]=_e;else{if(16===_e){for(Te=ge+2;le<Te;){if(0===se)break e;se--,ae+=ee[ne++]<<le,le+=8}if(ae>>>=ge,le-=ge,0===n.have){e.msg=\"invalid bit length repeat\",n.mode=G;break}Se=n.lens[n.have-1],ue=3+(3&ae),ae>>>=2,le-=2}else if(17===_e){for(Te=ge+3;le<Te;){if(0===se)break e;se--,ae+=ee[ne++]<<le,le+=8}le-=ge,Se=0,ue=3+(7&(ae>>>=ge)),ae>>>=3,le-=3}else{for(Te=ge+7;le<Te;){if(0===se)break e;se--,ae+=ee[ne++]<<le,le+=8}le-=ge,Se=0,ue=11+(127&(ae>>>=ge)),ae>>>=7,le-=7}if(n.have+ue>n.nlen+n.ndist){e.msg=\"invalid bit length repeat\",n.mode=G;break}for(;ue--;)n.lens[n.have++]=Se}}if(n.mode===G)break;if(0===n.lens[256]){e.msg=\"invalid code -- missing end-of-block\",n.mode=G;break}if(n.lenbits=9,Ce={bits:n.lenbits},ke=a(c,n.lens,0,n.nlen,n.lencode,0,n.work,Ce),n.lenbits=Ce.bits,ke){e.msg=\"invalid literal/lengths set\",n.mode=G;break}if(n.distbits=6,n.distcode=n.distdyn,Ce={bits:n.distbits},ke=a(h,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,Ce),n.distbits=Ce.bits,ke){e.msg=\"invalid distances set\",n.mode=G;break}if(n.mode=D,t===f)break e;case D:n.mode=U;case U:if(se>=6&&oe>=258){e.next_out=ie,e.avail_out=oe,e.next_in=ne,e.avail_in=se,n.hold=ae,n.bits=le,o(e,he),ie=e.next_out,te=e.output,oe=e.avail_out,ne=e.next_in,ee=e.input,se=e.avail_in,ae=n.hold,le=n.bits,n.mode===N&&(n.back=-1);break}for(n.back=0;ye=(xe=n.lencode[ae&(1<<n.lenbits)-1])>>>16&255,_e=65535&xe,!((ge=xe>>>24)<=le);){if(0===se)break e;se--,ae+=ee[ne++]<<le,le+=8}if(ye&&0==(240&ye)){for(be=ge,ve=ye,we=_e;ye=(xe=n.lencode[we+((ae&(1<<be+ve)-1)>>be)])>>>16&255,_e=65535&xe,!(be+(ge=xe>>>24)<=le);){if(0===se)break e;se--,ae+=ee[ne++]<<le,le+=8}ae>>>=be,le-=be,n.back+=be}if(ae>>>=ge,le-=ge,n.back+=ge,n.length=_e,0===ye){n.mode=K;break}if(32&ye){n.back=-1,n.mode=N;break}if(64&ye){e.msg=\"invalid literal/length code\",n.mode=G;break}n.extra=15&ye,n.mode=W;case W:if(n.extra){for(Te=n.extra;le<Te;){if(0===se)break e;se--,ae+=ee[ne++]<<le,le+=8}n.length+=ae&(1<<n.extra)-1,ae>>>=n.extra,le-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=H;case H:for(;ye=(xe=n.distcode[ae&(1<<n.distbits)-1])>>>16&255,_e=65535&xe,!((ge=xe>>>24)<=le);){if(0===se)break e;se--,ae+=ee[ne++]<<le,le+=8}if(0==(240&ye)){for(be=ge,ve=ye,we=_e;ye=(xe=n.distcode[we+((ae&(1<<be+ve)-1)>>be)])>>>16&255,_e=65535&xe,!(be+(ge=xe>>>24)<=le);){if(0===se)break e;se--,ae+=ee[ne++]<<le,le+=8}ae>>>=be,le-=be,n.back+=be}if(ae>>>=ge,le-=ge,n.back+=ge,64&ye){e.msg=\"invalid distance code\",n.mode=G;break}n.offset=_e,n.extra=15&ye,n.mode=q;case q:if(n.extra){for(Te=n.extra;le<Te;){if(0===se)break e;se--,ae+=ee[ne++]<<le,le+=8}n.offset+=ae&(1<<n.extra)-1,ae>>>=n.extra,le-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){e.msg=\"invalid distance too far back\",n.mode=G;break}n.mode=V;case V:if(0===oe)break e;if(ue=he-oe,n.offset>ue){if((ue=n.offset-ue)>n.whave&&n.sane){e.msg=\"invalid distance too far back\",n.mode=G;break}ue>n.wnext?(ue-=n.wnext,pe=n.wsize-ue):pe=n.wnext-ue,ue>n.length&&(ue=n.length),me=n.window}else me=te,pe=ie-n.offset,ue=n.length;ue>oe&&(ue=oe),oe-=ue,n.length-=ue;do{te[ie++]=me[pe++]}while(--ue);0===n.length&&(n.mode=U);break;case K:if(0===oe)break e;te[ie++]=n.length,oe--,n.mode=U;break;case Z:if(n.wrap){for(;le<32;){if(0===se)break e;se--,ae|=ee[ne++]<<le,le+=8}if(he-=oe,e.total_out+=he,n.total+=he,he&&(e.adler=n.check=n.flags?s(n.check,te,he,ie-he):i(n.check,te,he,ie-he)),he=oe,(n.flags?ae:re(ae))!==n.check){e.msg=\"incorrect data check\",n.mode=G;break}ae=0,le=0}n.mode=J;case J:if(n.wrap&&n.flags){for(;le<32;){if(0===se)break e;se--,ae+=ee[ne++]<<le,le+=8}if(ae!==(4294967295&n.total)){e.msg=\"incorrect length check\",n.mode=G;break}ae=0,le=0}n.mode=Y;case Y:ke=m;break e;case G:ke=_;break e;case X:return b;case Q:default:return y}return e.next_out=ie,e.avail_out=oe,e.next_in=ne,e.avail_in=se,n.hold=ae,n.bits=le,(n.wsize||he!==e.avail_out&&n.mode<G&&(n.mode<Z||t!==u))&&fe(e,e.output,e.next_out,he-e.avail_out)?(n.mode=X,b):(ce-=e.avail_in,he-=e.avail_out,e.total_in+=ce,e.total_out+=he,n.total+=he,n.wrap&&he&&(e.adler=n.check=n.flags?s(n.check,te,he,e.next_out-he):i(n.check,te,he,e.next_out-he)),e.data_type=n.bits+(n.last?64:0)+(n.mode===N?128:0)+(n.mode===D||n.mode===P?256:0),(0===ce&&0===he||t===u)&&ke===p&&(ke=v),ke)},t.inflateEnd=function(e){if(!e||!e.state)return y;var t=e.state;return t.window&&(t.window=null),e.state=null,p},t.inflateGetHeader=function(e,t){var n;return e&&e.state?0==(2&(n=e.state).wrap)?y:(n.head=t,t.done=!1,p):y},t.inflateSetDictionary=function(e,t){var n,r=t.length;return e&&e.state?0!==(n=e.state).wrap&&n.mode!==$?y:n.mode===$&&i(1,t,r,0)!==n.check?_:fe(e,t,r,r)?(n.mode=X,b):(n.havedict=1,p):y},t.inflateInfo=\"pako inflate (from Nodeca project)\"},function(e,t,n){\"use strict\";e.exports=function(e,t){var n,r,i,s,o,a,l,c,h,u,d,f,p,m,g,y,_,b,v,w,S,k,C,T,x;n=e.state,r=e.next_in,T=e.input,i=r+(e.avail_in-5),s=e.next_out,x=e.output,o=s-(t-e.avail_out),a=s+(e.avail_out-257),l=n.dmax,c=n.wsize,h=n.whave,u=n.wnext,d=n.window,f=n.hold,p=n.bits,m=n.lencode,g=n.distcode,y=(1<<n.lenbits)-1,_=(1<<n.distbits)-1;e:do{p<15&&(f+=T[r++]<<p,p+=8,f+=T[r++]<<p,p+=8),b=m[f&y];t:for(;;){if(f>>>=v=b>>>24,p-=v,0===(v=b>>>16&255))x[s++]=65535&b;else{if(!(16&v)){if(0==(64&v)){b=m[(65535&b)+(f&(1<<v)-1)];continue t}if(32&v){n.mode=12;break e}e.msg=\"invalid literal/length code\",n.mode=30;break e}w=65535&b,(v&=15)&&(p<v&&(f+=T[r++]<<p,p+=8),w+=f&(1<<v)-1,f>>>=v,p-=v),p<15&&(f+=T[r++]<<p,p+=8,f+=T[r++]<<p,p+=8),b=g[f&_];n:for(;;){if(f>>>=v=b>>>24,p-=v,!(16&(v=b>>>16&255))){if(0==(64&v)){b=g[(65535&b)+(f&(1<<v)-1)];continue n}e.msg=\"invalid distance code\",n.mode=30;break e}if(S=65535&b,p<(v&=15)&&(f+=T[r++]<<p,(p+=8)<v&&(f+=T[r++]<<p,p+=8)),(S+=f&(1<<v)-1)>l){e.msg=\"invalid distance too far back\",n.mode=30;break e}if(f>>>=v,p-=v,S>(v=s-o)){if((v=S-v)>h&&n.sane){e.msg=\"invalid distance too far back\",n.mode=30;break e}if(k=0,C=d,0===u){if(k+=c-v,v<w){w-=v;do{x[s++]=d[k++]}while(--v);k=s-S,C=x}}else if(u<v){if(k+=c+u-v,(v-=u)<w){w-=v;do{x[s++]=d[k++]}while(--v);if(k=0,u<w){w-=v=u;do{x[s++]=d[k++]}while(--v);k=s-S,C=x}}}else if(k+=u-v,v<w){w-=v;do{x[s++]=d[k++]}while(--v);k=s-S,C=x}for(;w>2;)x[s++]=C[k++],x[s++]=C[k++],x[s++]=C[k++],w-=3;w&&(x[s++]=C[k++],w>1&&(x[s++]=C[k++]))}else{k=s-S;do{x[s++]=x[k++],x[s++]=x[k++],x[s++]=x[k++],w-=3}while(w>2);w&&(x[s++]=x[k++],w>1&&(x[s++]=x[k++]))}break}}break}}while(r<i&&s<a);r-=w=p>>3,f&=(1<<(p-=w<<3))-1,e.next_in=r,e.next_out=s,e.avail_in=r<i?i-r+5:5-(r-i),e.avail_out=s<a?a-s+257:257-(s-a),n.hold=f,n.bits=p}},function(e,t,n){\"use strict\";var r=n(4),i=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],s=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],o=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],a=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];e.exports=function(e,t,n,l,c,h,u,d){var f,p,m,g,y,_,b,v,w,S=d.bits,k=0,C=0,T=0,x=0,E=0,R=0,A=0,I=0,O=0,$=0,N=null,B=0,j=new r.Buf16(16),P=new r.Buf16(16),z=null,M=0;for(k=0;k<=15;k++)j[k]=0;for(C=0;C<l;C++)j[t[n+C]]++;for(E=S,x=15;x>=1&&0===j[x];x--);if(E>x&&(E=x),0===x)return c[h++]=20971520,c[h++]=20971520,d.bits=1,0;for(T=1;T<x&&0===j[T];T++);for(E<T&&(E=T),I=1,k=1;k<=15;k++)if(I<<=1,(I-=j[k])<0)return-1;if(I>0&&(0===e||1!==x))return-1;for(P[1]=0,k=1;k<15;k++)P[k+1]=P[k]+j[k];for(C=0;C<l;C++)0!==t[n+C]&&(u[P[t[n+C]]++]=C);if(0===e?(N=z=u,_=19):1===e?(N=i,B-=257,z=s,M-=257,_=256):(N=o,z=a,_=-1),$=0,C=0,k=T,y=h,R=E,A=0,m=-1,g=(O=1<<E)-1,1===e&&O>852||2===e&&O>592)return 1;for(;;){b=k-A,u[C]<_?(v=0,w=u[C]):u[C]>_?(v=z[M+u[C]],w=N[B+u[C]]):(v=96,w=0),f=1<<k-A,T=p=1<<R;do{c[y+($>>A)+(p-=f)]=b<<24|v<<16|w|0}while(0!==p);for(f=1<<k-1;$&f;)f>>=1;if(0!==f?($&=f-1,$+=f):$=0,C++,0==--j[k]){if(k===x)break;k=t[n+u[C]]}if(k>E&&($&g)!==m){for(0===A&&(A=E),y+=T,I=1<<(R=k-A);R+A<x&&!((I-=j[R+A])<=0);)R++,I<<=1;if(O+=1<<R,1===e&&O>852||2===e&&O>592)return 1;c[m=$&g]=E<<24|R<<16|y-h|0}}return 0!==$&&(c[y+$]=k-A<<24|64<<16|0),d.bits=E,0}},function(e,t,n){\"use strict\";e.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name=\"\",this.comment=\"\",this.hcrc=0,this.done=!1}},function(e,t,n){\"use strict\";var r=n(0),i=n(1),s=n(5),o=n(19),a=n(41),l=function(e,t){var n,r=\"\";for(n=0;n<t;n++)r+=String.fromCharCode(255&e),e>>>=8;return r},c=function(e,t,n,i,c,h){var u,d,f=e.file,p=e.compression,m=h!==s.utf8encode,g=r.transformTo(\"string\",h(f.name)),y=r.transformTo(\"string\",s.utf8encode(f.name)),_=f.comment,b=r.transformTo(\"string\",h(_)),v=r.transformTo(\"string\",s.utf8encode(_)),w=y.length!==f.name.length,S=v.length!==_.length,k=\"\",C=\"\",T=\"\",x=f.dir,E=f.date,R={crc32:0,compressedSize:0,uncompressedSize:0};t&&!n||(R.crc32=e.crc32,R.compressedSize=e.compressedSize,R.uncompressedSize=e.uncompressedSize);var A=0;t&&(A|=8),m||!w&&!S||(A|=2048);var I,O,$,N=0,B=0;x&&(N|=16),\"UNIX\"===c?(B=798,N|=(I=f.unixPermissions,O=x,$=I,I||($=O?16893:33204),(65535&$)<<16)):(B=20,N|=63&(f.dosPermissions||0)),u=E.getUTCHours(),u<<=6,u|=E.getUTCMinutes(),u<<=5,u|=E.getUTCSeconds()/2,d=E.getUTCFullYear()-1980,d<<=4,d|=E.getUTCMonth()+1,d<<=5,d|=E.getUTCDate(),w&&(C=l(1,1)+l(o(g),4)+y,k+=\"up\"+l(C.length,2)+C),S&&(T=l(1,1)+l(o(b),4)+v,k+=\"uc\"+l(T.length,2)+T);var j=\"\";return j+=\"\\n\\0\",j+=l(A,2),j+=p.magic,j+=l(u,2),j+=l(d,2),j+=l(R.crc32,4),j+=l(R.compressedSize,4),j+=l(R.uncompressedSize,4),j+=l(g.length,2),j+=l(k.length,2),{fileRecord:a.LOCAL_FILE_HEADER+j+g+k,dirRecord:a.CENTRAL_FILE_HEADER+l(B,2)+j+l(b.length,2)+\"\\0\\0\\0\\0\"+l(N,4)+l(i,4)+g+k+b}},h=function(e){return a.DATA_DESCRIPTOR+l(e.crc32,4)+l(e.compressedSize,4)+l(e.uncompressedSize,4)};function u(e,t,n,r){i.call(this,\"ZipFileWorker\"),this.bytesWritten=0,this.zipComment=t,this.zipPlatform=n,this.encodeFileName=r,this.streamFiles=e,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}r.inherits(u,i),u.prototype.push=function(e){var t=e.meta.percent||0,n=this.entriesCount,r=this._sources.length;this.accumulate?this.contentBuffer.push(e):(this.bytesWritten+=e.data.length,i.prototype.push.call(this,{data:e.data,meta:{currentFile:this.currentFile,percent:n?(t+100*(n-r-1))/n:100}}))},u.prototype.openedSource=function(e){this.currentSourceOffset=this.bytesWritten,this.currentFile=e.file.name;var t=this.streamFiles&&!e.file.dir;if(t){var n=c(e,t,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:n.fileRecord,meta:{percent:0}})}else this.accumulate=!0},u.prototype.closedSource=function(e){this.accumulate=!1;var t=this.streamFiles&&!e.file.dir,n=c(e,t,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(n.dirRecord),t)this.push({data:h(e),meta:{percent:100}});else for(this.push({data:n.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},u.prototype.flush=function(){for(var e=this.bytesWritten,t=0;t<this.dirRecords.length;t++)this.push({data:this.dirRecords[t],meta:{percent:100}});var n=this.bytesWritten-e,i=function(e,t,n,i,s){var o=r.transformTo(\"string\",s(i));return a.CENTRAL_DIRECTORY_END+\"\\0\\0\\0\\0\"+l(e,2)+l(e,2)+l(t,4)+l(n,4)+l(o.length,2)+o}(this.dirRecords.length,n,e,this.zipComment,this.encodeFileName);this.push({data:i,meta:{percent:100}})},u.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},u.prototype.registerPrevious=function(e){this._sources.push(e);var t=this;return e.on(\"data\",function(e){t.processChunk(e)}),e.on(\"end\",function(){t.closedSource(t.previous.streamInfo),t._sources.length?t.prepareNextSource():t.end()}),e.on(\"error\",function(e){t.error(e)}),this},u.prototype.resume=function(){return!!i.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},u.prototype.error=function(e){var t=this._sources;if(!i.prototype.error.call(this,e))return!1;for(var n=0;n<t.length;n++)try{t[n].error(e)}catch(e){}return!0},u.prototype.lock=function(){i.prototype.lock.call(this);for(var e=this._sources,t=0;t<e.length;t++)e[t].lock()},e.exports=u},function(e,t,n){\"use strict\";var r=n(0),i=n(1);function s(e,t){i.call(this,\"Nodejs stream input adapter for \"+e),this._upstreamEnded=!1,this._bindStream(t)}r.inherits(s,i),s.prototype._bindStream=function(e){var t=this;this._stream=e,e.pause(),e.on(\"data\",function(e){t.push({data:e,meta:{percent:0}})}).on(\"error\",function(e){t.isPaused?this.generatedError=e:t.error(e)}).on(\"end\",function(){t.isPaused?t._upstreamEnded=!0:t.end()})},s.prototype.pause=function(){return!!i.prototype.pause.call(this)&&(this._stream.pause(),!0)},s.prototype.resume=function(){return!!i.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},e.exports=s},function(e,t,n){\"use strict\";var r=n(0),i=n(11),s=n(5),o=(r=n(0),n(80)),a=n(34),l=n(16);function c(e){return new i.Promise(function(t,n){var r=e.decompressed.getContentWorker().pipe(new a);r.on(\"error\",function(e){n(e)}).on(\"end\",function(){r.streamInfo.crc32!==e.decompressed.crc32?n(new Error(\"Corrupted zip : CRC32 mismatch\")):t()}).resume()})}e.exports=function(e,t){var n=this;return t=r.extend(t||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:s.utf8decode}),l.isNode&&l.isStream(e)?i.Promise.reject(new Error(\"JSZip can't accept a stream when loading a zip file.\")):r.prepareContent(\"the loaded zip file\",e,!0,t.optimizedBinaryString,t.base64).then(function(e){var n=new o(t);return n.load(e),n}).then(function(e){var n=[i.Promise.resolve(e)],r=e.files;if(t.checkCRC32)for(var s=0;s<r.length;s++)n.push(c(r[s]));return i.Promise.all(n)}).then(function(e){for(var r=e.shift(),i=r.files,s=0;s<i.length;s++){var o=i[s];n.file(o.fileNameStr,o.decompressed,{binary:!0,optimizedBinaryString:!0,date:o.date,dir:o.dir,comment:o.fileCommentStr.length?o.fileCommentStr:null,unixPermissions:o.unixPermissions,dosPermissions:o.dosPermissions,createFolders:t.createFolders})}return r.zipComment.length&&(n.comment=r.zipComment),n})}},function(e,t,n){\"use strict\";var r=n(42),i=n(0),s=n(41),o=n(83),a=(n(5),n(3));function l(e){this.files=[],this.loadOptions=e}l.prototype={checkSignature:function(e){if(!this.reader.readAndCheckSignature(e)){this.reader.index-=4;var t=this.reader.readString(4);throw new Error(\"Corrupted zip or bug: unexpected signature (\"+i.pretty(t)+\", expected \"+i.pretty(e)+\")\")}},isSignature:function(e,t){var n=this.reader.index;this.reader.setIndex(e);var r=this.reader.readString(4)===t;return this.reader.setIndex(n),r},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var e=this.reader.readData(this.zipCommentLength),t=a.uint8array?\"uint8array\":\"array\",n=i.transformTo(t,e);this.zipComment=this.loadOptions.decodeFileName(n)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var e,t,n,r=this.zip64EndOfCentralSize-44;0<r;)e=this.reader.readInt(2),t=this.reader.readInt(4),n=this.reader.readData(t),this.zip64ExtensibleData[e]={id:e,length:t,value:n}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),this.disksCount>1)throw new Error(\"Multi-volumes zip are not supported\")},readLocalFiles:function(){var e,t;for(e=0;e<this.files.length;e++)t=this.files[e],this.reader.setIndex(t.localHeaderOffset),this.checkSignature(s.LOCAL_FILE_HEADER),t.readLocalPart(this.reader),t.handleUTF8(),t.processAttributes()},readCentralDir:function(){var e;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(s.CENTRAL_FILE_HEADER);)(e=new o({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(e);if(this.centralDirRecords!==this.files.length&&0!==this.centralDirRecords&&0===this.files.length)throw new Error(\"Corrupted zip or bug: expected \"+this.centralDirRecords+\" records in central dir, got \"+this.files.length)},readEndOfCentral:function(){var e=this.reader.lastIndexOfSignature(s.CENTRAL_DIRECTORY_END);if(e<0)throw!this.isSignature(0,s.LOCAL_FILE_HEADER)?new Error(\"Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html\"):new Error(\"Corrupted zip: can't find end of central directory\");this.reader.setIndex(e);var t=e;if(this.checkSignature(s.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===i.MAX_VALUE_16BITS||this.diskWithCentralDirStart===i.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===i.MAX_VALUE_16BITS||this.centralDirRecords===i.MAX_VALUE_16BITS||this.centralDirSize===i.MAX_VALUE_32BITS||this.centralDirOffset===i.MAX_VALUE_32BITS){if(this.zip64=!0,(e=this.reader.lastIndexOfSignature(s.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error(\"Corrupted zip: can't find the ZIP64 end of central directory locator\");if(this.reader.setIndex(e),this.checkSignature(s.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,s.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(s.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error(\"Corrupted zip: can't find the ZIP64 end of central directory\");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(s.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var n=this.centralDirOffset+this.centralDirSize;this.zip64&&(n+=20,n+=12+this.zip64EndOfCentralSize);var r=t-n;if(r>0)this.isSignature(t,s.CENTRAL_FILE_HEADER)||(this.reader.zero=r);else if(r<0)throw new Error(\"Corrupted zip: missing \"+Math.abs(r)+\" bytes.\")},prepareReader:function(e){this.reader=r(e)},load:function(e){this.prepareReader(e),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},e.exports=l},function(e,t,n){\"use strict\";var r=n(44);function i(e){r.call(this,e)}n(0).inherits(i,r),i.prototype.byteAt=function(e){return this.data.charCodeAt(this.zero+e)},i.prototype.lastIndexOfSignature=function(e){return this.data.lastIndexOf(e)-this.zero},i.prototype.readAndCheckSignature=function(e){return e===this.readData(4)},i.prototype.readData=function(e){this.checkOffset(e);var t=this.data.slice(this.zero+this.index,this.zero+this.index+e);return this.index+=e,t},e.exports=i},function(e,t,n){\"use strict\";var r=n(45);function i(e){r.call(this,e)}n(0).inherits(i,r),i.prototype.readData=function(e){this.checkOffset(e);var t=this.data.slice(this.zero+this.index,this.zero+this.index+e);return this.index+=e,t},e.exports=i},function(e,t,n){\"use strict\";var r=n(42),i=n(0),s=n(18),o=n(19),a=n(5),l=n(35),c=n(3);function h(e,t){this.options=e,this.loadOptions=t}h.prototype={isEncrypted:function(){return 1==(1&this.bitFlag)},useUTF8:function(){return 2048==(2048&this.bitFlag)},readLocalPart:function(e){var t,n;if(e.skip(22),this.fileNameLength=e.readInt(2),n=e.readInt(2),this.fileName=e.readData(this.fileNameLength),e.skip(n),-1===this.compressedSize||-1===this.uncompressedSize)throw new Error(\"Bug or corrupted zip : didn't get enough informations from the central directory (compressedSize === -1 || uncompressedSize === -1)\");if(null===(t=function(e){for(var t in l)if(l.hasOwnProperty(t)&&l[t].magic===e)return l[t];return null}(this.compressionMethod)))throw new Error(\"Corrupted zip : compression \"+i.pretty(this.compressionMethod)+\" unknown (inner file : \"+i.transformTo(\"string\",this.fileName)+\")\");this.decompressed=new s(this.compressedSize,this.uncompressedSize,this.crc32,t,e.readData(this.compressedSize))},readCentralPart:function(e){this.versionMadeBy=e.readInt(2),e.skip(2),this.bitFlag=e.readInt(2),this.compressionMethod=e.readString(2),this.date=e.readDate(),this.crc32=e.readInt(4),this.compressedSize=e.readInt(4),this.uncompressedSize=e.readInt(4);var t=e.readInt(2);if(this.extraFieldsLength=e.readInt(2),this.fileCommentLength=e.readInt(2),this.diskNumberStart=e.readInt(2),this.internalFileAttributes=e.readInt(2),this.externalFileAttributes=e.readInt(4),this.localHeaderOffset=e.readInt(4),this.isEncrypted())throw new Error(\"Encrypted zip are not supported\");e.skip(t),this.readExtraFields(e),this.parseZIP64ExtraField(e),this.fileComment=e.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var e=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),0===e&&(this.dosPermissions=63&this.externalFileAttributes),3===e&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||\"/\"!==this.fileNameStr.slice(-1)||(this.dir=!0)},parseZIP64ExtraField:function(e){if(this.extraFields[1]){var t=r(this.extraFields[1].value);this.uncompressedSize===i.MAX_VALUE_32BITS&&(this.uncompressedSize=t.readInt(8)),this.compressedSize===i.MAX_VALUE_32BITS&&(this.compressedSize=t.readInt(8)),this.localHeaderOffset===i.MAX_VALUE_32BITS&&(this.localHeaderOffset=t.readInt(8)),this.diskNumberStart===i.MAX_VALUE_32BITS&&(this.diskNumberStart=t.readInt(4))}},readExtraFields:function(e){var t,n,r,i=e.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});e.index<i;)t=e.readInt(2),n=e.readInt(2),r=e.readData(n),this.extraFields[t]={id:t,length:n,value:r}},handleUTF8:function(){var e=c.uint8array?\"uint8array\":\"array\";if(this.useUTF8())this.fileNameStr=a.utf8decode(this.fileName),this.fileCommentStr=a.utf8decode(this.fileComment);else{var t=this.findExtraFieldUnicodePath();if(null!==t)this.fileNameStr=t;else{var n=i.transformTo(e,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(n)}var r=this.findExtraFieldUnicodeComment();if(null!==r)this.fileCommentStr=r;else{var s=i.transformTo(e,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(s)}}},findExtraFieldUnicodePath:function(){var e=this.extraFields[28789];if(e){var t=r(e.value);return 1!==t.readInt(1)?null:o(this.fileName)!==t.readInt(4)?null:a.utf8decode(t.readData(e.length-5))}return null},findExtraFieldUnicodeComment:function(){var e=this.extraFields[25461];if(e){var t=r(e.value);return 1!==t.readInt(1)?null:o(this.fileComment)!==t.readInt(4)?null:a.utf8decode(t.readData(e.length-5))}return null}},e.exports=h},function(e,t,n){\"use strict\";n.r(t);var r=n(48),i=n.n(r),s=n(7),o=n.n(s),a=n(12),l=n.n(a),c=n(49),h=n.n(c),u=n(46),d=n.n(u),f=n(2),p=n(21),m=n(17),g=n(50),y=n(8);const _=Symbol(\"buffer\"),b=Symbol(\"type\");class v{constructor(){this[b]=\"\";const e=arguments[0],t=arguments[1],n=[];if(e){const t=e,r=Number(t.length);for(let e=0;e<r;e++){const r=t[e];let i;i=r instanceof Buffer?r:ArrayBuffer.isView(r)?Buffer.from(r.buffer,r.byteOffset,r.byteLength):r instanceof ArrayBuffer?Buffer.from(r):r instanceof v?r[_]:Buffer.from(\"string\"==typeof r?r:String(r)),n.push(i)}}this[_]=Buffer.concat(n);let r=t&&void 0!==t.type&&String(t.type).toLowerCase();r&&!/[^\\u0020-\\u007E]/.test(r)&&(this[b]=r)}get size(){return this[_].length}get type(){return this[b]}slice(){const e=this.size,t=arguments[0],n=arguments[1];let r,i;r=void 0===t?0:t<0?Math.max(e+t,0):Math.min(t,e),i=void 0===n?e:n<0?Math.max(e+n,0):Math.min(n,e);const s=Math.max(i-r,0),o=this[_].slice(r,r+s),a=new v([],{type:arguments[2]});return a[_]=o,a}}function w(e,t,n){Error.call(this,e),this.message=e,this.type=t,n&&(this.code=this.errno=n.code),Error.captureStackTrace(this,this.constructor)}let S;Object.defineProperties(v.prototype,{size:{enumerable:!0},type:{enumerable:!0},slice:{enumerable:!0}}),Object.defineProperty(v.prototype,Symbol.toStringTag,{value:\"Blob\",writable:!1,enumerable:!1,configurable:!0}),w.prototype=Object.create(Error.prototype),w.prototype.constructor=w,w.prototype.name=\"FetchError\";try{S=require(\"encoding\").convert}catch(e){}const k=Symbol(\"Body internals\"),C=f.PassThrough;function T(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.size;let i=void 0===r?0:r;var s=n.timeout;let o=void 0===s?0:s;null==e?e=null:\"string\"==typeof e||E(e)||e instanceof v||Buffer.isBuffer(e)||\"[object ArrayBuffer]\"===Object.prototype.toString.call(e)||ArrayBuffer.isView(e)||e instanceof f||(e=String(e)),this[k]={body:e,disturbed:!1,error:null},this.size=i,this.timeout=o,e instanceof f&&e.on(\"error\",function(e){const n=\"AbortError\"===e.name?e:new w(`Invalid response body while trying to fetch ${t.url}: ${e.message}`,\"system\",e);t[k].error=n})}function x(){var e=this;if(this[k].disturbed)return T.Promise.reject(new TypeError(`body used already for: ${this.url}`));if(this[k].disturbed=!0,this[k].error)return T.Promise.reject(this[k].error);if(null===this.body)return T.Promise.resolve(Buffer.alloc(0));if(\"string\"==typeof this.body)return T.Promise.resolve(Buffer.from(this.body));if(this.body instanceof v)return T.Promise.resolve(this.body[_]);if(Buffer.isBuffer(this.body))return T.Promise.resolve(this.body);if(\"[object ArrayBuffer]\"===Object.prototype.toString.call(this.body))return T.Promise.resolve(Buffer.from(this.body));if(ArrayBuffer.isView(this.body))return T.Promise.resolve(Buffer.from(this.body.buffer,this.body.byteOffset,this.body.byteLength));if(!(this.body instanceof f))return T.Promise.resolve(Buffer.alloc(0));let t=[],n=0,r=!1;return new T.Promise(function(i,s){let o;e.timeout&&(o=setTimeout(function(){r=!0,s(new w(`Response timeout while trying to fetch ${e.url} (over ${e.timeout}ms)`,\"body-timeout\"))},e.timeout)),e.body.on(\"error\",function(t){\"AbortError\"===t.name?(r=!0,s(t)):s(new w(`Invalid response body while trying to fetch ${e.url}: ${t.message}`,\"system\",t))}),e.body.on(\"data\",function(i){if(!r&&null!==i){if(e.size&&n+i.length>e.size)return r=!0,void s(new w(`content size at ${e.url} over limit: ${e.size}`,\"max-size\"));n+=i.length,t.push(i)}}),e.body.on(\"end\",function(){if(!r){clearTimeout(o);try{i(Buffer.concat(t))}catch(t){s(new w(`Could not create Buffer from response body for ${e.url}: ${t.message}`,\"system\",t))}}})})}function E(e){return\"object\"==typeof e&&\"function\"==typeof e.append&&\"function\"==typeof e.delete&&\"function\"==typeof e.get&&\"function\"==typeof e.getAll&&\"function\"==typeof e.has&&\"function\"==typeof e.set&&(\"URLSearchParams\"===e.constructor.name||\"[object URLSearchParams]\"===Object.prototype.toString.call(e)||\"function\"==typeof e.sort)}function R(e){let t,n,r=e.body;if(e.bodyUsed)throw new Error(\"cannot clone body after it is used\");return r instanceof f&&\"function\"!=typeof r.getBoundary&&(t=new C,n=new C,r.pipe(t),r.pipe(n),e[k].body=t,r=n),r}function A(e){const t=e.body;return null===t?0:\"string\"==typeof t?Buffer.byteLength(t):E(t)?Buffer.byteLength(String(t)):t instanceof v?t.size:Buffer.isBuffer(t)?t.length:\"[object ArrayBuffer]\"===Object.prototype.toString.call(t)?t.byteLength:ArrayBuffer.isView(t)?t.byteLength:t&&\"function\"==typeof t.getLengthSync&&(t._lengthRetrievers&&0==t._lengthRetrievers.length||t.hasKnownLength&&t.hasKnownLength())?t.getLengthSync():null}T.prototype={get body(){return this[k].body},get bodyUsed(){return this[k].disturbed},arrayBuffer(){return x.call(this).then(function(e){return e.buffer.slice(e.byteOffset,e.byteOffset+e.byteLength)})},blob(){let e=this.headers&&this.headers.get(\"content-type\")||\"\";return x.call(this).then(function(t){return Object.assign(new v([],{type:e.toLowerCase()}),{[_]:t})})},json(){var e=this;return x.call(this).then(function(t){try{return JSON.parse(t.toString())}catch(t){return T.Promise.reject(new w(`invalid json response body at ${e.url} reason: ${t.message}`,\"invalid-json\"))}})},text(){return x.call(this).then(function(e){return e.toString()})},buffer(){return x.call(this)},textConverted(){var e=this;return x.call(this).then(function(t){return function(e,t){if(\"function\"!=typeof S)throw new Error(\"The package `encoding` must be installed to use the textConverted() function\");const n=t.get(\"content-type\");let r,i,s=\"utf-8\";n&&(r=/charset=([^;]*)/i.exec(n));i=e.slice(0,1024).toString(),!r&&i&&(r=/<meta.+?charset=(['\"])(.+?)\\1/i.exec(i));!r&&i&&(r=/<meta[\\s]+?http-equiv=(['\"])content-type\\1[\\s]+?content=(['\"])(.+?)\\2/i.exec(i))&&(r=/charset=(.*)/i.exec(r.pop()));!r&&i&&(r=/<\\?xml.+?encoding=(['\"])(.+?)\\1/i.exec(i));r&&(\"gb2312\"!==(s=r.pop())&&\"gbk\"!==s||(s=\"gb18030\"));return S(e,\"UTF-8\",s).toString()}(t,e.headers)})}},Object.defineProperties(T.prototype,{body:{enumerable:!0},bodyUsed:{enumerable:!0},arrayBuffer:{enumerable:!0},blob:{enumerable:!0},json:{enumerable:!0},text:{enumerable:!0}}),T.mixIn=function(e){for(const t of Object.getOwnPropertyNames(T.prototype))if(!(t in e)){const n=Object.getOwnPropertyDescriptor(T.prototype,t);Object.defineProperty(e,t,n)}},T.Promise=global.Promise;const I=/[^\\^_`a-zA-Z\\-0-9!#$%&'*+.|~]/,O=/[^\\t\\x20-\\x7e\\x80-\\xff]/;function $(e){if(e=`${e}`,I.test(e))throw new TypeError(`${e} is not a legal HTTP header name`)}function N(e){if(e=`${e}`,O.test(e))throw new TypeError(`${e} is not a legal HTTP header value`)}function B(e,t){t=t.toLowerCase();for(const n in e)if(n.toLowerCase()===t)return n}const j=Symbol(\"map\");class P{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;if(this[j]=Object.create(null),e instanceof P){const t=e.raw(),n=Object.keys(t);for(const e of n)for(const n of t[e])this.append(e,n)}else if(null==e);else{if(\"object\"!=typeof e)throw new TypeError(\"Provided initializer must be an object\");{const t=e[Symbol.iterator];if(null!=t){if(\"function\"!=typeof t)throw new TypeError(\"Header pairs must be iterable\");const n=[];for(const t of e){if(\"object\"!=typeof t||\"function\"!=typeof t[Symbol.iterator])throw new TypeError(\"Each header pair must be iterable\");n.push(Array.from(t))}for(const e of n){if(2!==e.length)throw new TypeError(\"Each header pair must be a name/value tuple\");this.append(e[0],e[1])}}else for(const t of Object.keys(e)){const n=e[t];this.append(t,n)}}}}get(e){$(e=`${e}`);const t=B(this[j],e);return void 0===t?null:this[j][t].join(\", \")}forEach(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,n=z(this),r=0;for(;r<n.length;){var i=n[r];const s=i[0],o=i[1];e.call(t,o,s,this),n=z(this),r++}}set(e,t){t=`${t}`,$(e=`${e}`),N(t);const n=B(this[j],e);this[j][void 0!==n?n:e]=[t]}append(e,t){t=`${t}`,$(e=`${e}`),N(t);const n=B(this[j],e);void 0!==n?this[j][n].push(t):this[j][e]=[t]}has(e){return $(e=`${e}`),void 0!==B(this[j],e)}delete(e){$(e=`${e}`);const t=B(this[j],e);void 0!==t&&delete this[j][t]}raw(){return this[j]}keys(){return F(this,\"key\")}values(){return F(this,\"value\")}[Symbol.iterator](){return F(this,\"key+value\")}}function z(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:\"key+value\";return Object.keys(e[j]).sort().map(\"key\"===t?function(e){return e.toLowerCase()}:\"value\"===t?function(t){return e[j][t].join(\", \")}:function(t){return[t.toLowerCase(),e[j][t].join(\", \")]})}P.prototype.entries=P.prototype[Symbol.iterator],Object.defineProperty(P.prototype,Symbol.toStringTag,{value:\"Headers\",writable:!1,enumerable:!1,configurable:!0}),Object.defineProperties(P.prototype,{get:{enumerable:!0},forEach:{enumerable:!0},set:{enumerable:!0},append:{enumerable:!0},has:{enumerable:!0},delete:{enumerable:!0},keys:{enumerable:!0},values:{enumerable:!0},entries:{enumerable:!0}});const M=Symbol(\"internal\");function F(e,t){const n=Object.create(L);return n[M]={target:e,kind:t,index:0},n}const L=Object.setPrototypeOf({next(){if(!this||Object.getPrototypeOf(this)!==L)throw new TypeError(\"Value of `this` is not a HeadersIterator\");var e=this[M];const t=e.target,n=e.kind,r=e.index,i=z(t,n);return r>=i.length?{value:void 0,done:!0}:(this[M].index=r+1,{value:i[r],done:!1})}},Object.getPrototypeOf(Object.getPrototypeOf([][Symbol.iterator]())));function D(e){const t=Object.assign({__proto__:null},e[j]),n=B(e[j],\"Host\");return void 0!==n&&(t[n]=t[n][0]),t}Object.defineProperty(L,Symbol.toStringTag,{value:\"HeadersIterator\",writable:!1,enumerable:!1,configurable:!0});const U=Symbol(\"Response internals\"),W=p.STATUS_CODES;class H{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};T.call(this,e,t);const n=t.status||200;this[U]={url:t.url,status:n,statusText:t.statusText||W[n],headers:new P(t.headers)}}get url(){return this[U].url}get status(){return this[U].status}get ok(){return this[U].status>=200&&this[U].status<300}get statusText(){return this[U].statusText}get headers(){return this[U].headers}clone(){return new H(R(this),{url:this.url,status:this.status,statusText:this.statusText,headers:this.headers,ok:this.ok})}}T.mixIn(H.prototype),Object.defineProperties(H.prototype,{url:{enumerable:!0},status:{enumerable:!0},ok:{enumerable:!0},statusText:{enumerable:!0},headers:{enumerable:!0},clone:{enumerable:!0}}),Object.defineProperty(H.prototype,Symbol.toStringTag,{value:\"Response\",writable:!1,enumerable:!1,configurable:!0});const q=Symbol(\"Request internals\"),V=m.parse,K=m.format,Z=\"destroy\"in f.Readable.prototype;function J(e){return\"object\"==typeof e&&\"object\"==typeof e[q]}class Y{constructor(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};J(e)?t=V(e.url):(t=e&&e.href?V(e.href):V(`${e}`),e={});let r=n.method||e.method||\"GET\";if(r=r.toUpperCase(),(null!=n.body||J(e)&&null!==e.body)&&(\"GET\"===r||\"HEAD\"===r))throw new TypeError(\"Request with GET/HEAD method cannot have body\");let i=null!=n.body?n.body:J(e)&&null!==e.body?R(e):null;T.call(this,i,{timeout:n.timeout||e.timeout||0,size:n.size||e.size||0});const s=new P(n.headers||e.headers||{});if(null!=n.body){const e=function(e){const t=e.body;return null===t?null:\"string\"==typeof t?\"text/plain;charset=UTF-8\":E(t)?\"application/x-www-form-urlencoded;charset=UTF-8\":t instanceof v?t.type||null:Buffer.isBuffer(t)?null:\"[object ArrayBuffer]\"===Object.prototype.toString.call(t)?null:ArrayBuffer.isView(t)?null:\"function\"==typeof t.getBoundary?`multipart/form-data;boundary=${t.getBoundary()}`:null}(this);null===e||s.has(\"Content-Type\")||s.append(\"Content-Type\",e)}let o=J(e)?e.signal:null;if(\"signal\"in n&&(o=n.signal),null!=o&&!function(e){const t=e&&\"object\"==typeof e&&Object.getPrototypeOf(e);return!(!t||\"AbortSignal\"!==t.constructor.name)}(o))throw new TypeError(\"Expected signal to be an instanceof AbortSignal\");this[q]={method:r,redirect:n.redirect||e.redirect||\"follow\",headers:s,parsedURL:t,signal:o},this.follow=void 0!==n.follow?n.follow:void 0!==e.follow?e.follow:20,this.compress=void 0!==n.compress?n.compress:void 0===e.compress||e.compress,this.counter=n.counter||e.counter||0,this.agent=n.agent||e.agent}get method(){return this[q].method}get url(){return K(this[q].parsedURL)}get headers(){return this[q].headers}get redirect(){return this[q].redirect}get signal(){return this[q].signal}clone(){return new Y(this)}}function G(e){Error.call(this,e),this.type=\"aborted\",this.message=e,Error.captureStackTrace(this,this.constructor)}T.mixIn(Y.prototype),Object.defineProperty(Y.prototype,Symbol.toStringTag,{value:\"Request\",writable:!1,enumerable:!1,configurable:!0}),Object.defineProperties(Y.prototype,{method:{enumerable:!0},url:{enumerable:!0},headers:{enumerable:!0},redirect:{enumerable:!0},clone:{enumerable:!0},signal:{enumerable:!0}}),G.prototype=Object.create(Error.prototype),G.prototype.constructor=G,G.prototype.name=\"AbortError\";const X=f.PassThrough,Q=m.resolve;function ee(e,t){if(!ee.Promise)throw new Error(\"native promise missing, set fetch.Promise to your favorite alternative\");return T.Promise=ee.Promise,new ee.Promise(function(n,r){const i=new Y(e,t),s=function(e){const t=e[q].parsedURL,n=new P(e[q].headers);if(n.has(\"Accept\")||n.set(\"Accept\",\"*/*\"),!t.protocol||!t.hostname)throw new TypeError(\"Only absolute URLs are supported\");if(!/^https?:$/.test(t.protocol))throw new TypeError(\"Only HTTP(S) protocols are supported\");if(e.signal&&e.body instanceof f.Readable&&!Z)throw new Error(\"Cancellation of streamed requests with AbortSignal is not supported in node < 8\");let r=null;if(null==e.body&&/^(POST|PUT)$/i.test(e.method)&&(r=\"0\"),null!=e.body){const t=A(e);\"number\"==typeof t&&(r=String(t))}return r&&n.set(\"Content-Length\",r),n.has(\"User-Agent\")||n.set(\"User-Agent\",\"node-fetch/1.0 (+https://github.com/bitinn/node-fetch)\"),e.compress&&!n.has(\"Accept-Encoding\")&&n.set(\"Accept-Encoding\",\"gzip,deflate\"),n.has(\"Connection\")||e.agent||n.set(\"Connection\",\"close\"),Object.assign({},t,{method:e.method,headers:D(n),agent:e.agent})}(i),o=(\"https:\"===s.protocol?g:p).request,a=i.signal;let l=null;const c=function(){let e=new G(\"The user aborted a request.\");r(e),i.body&&i.body instanceof f.Readable&&i.body.destroy(e),l&&l.body&&l.body.emit(\"error\",e)};if(a&&a.aborted)return void c();const h=function(){c(),m()},u=o(s);let d;function m(){u.abort(),a&&a.removeEventListener(\"abort\",h),clearTimeout(d)}a&&a.addEventListener(\"abort\",h),i.timeout&&u.once(\"socket\",function(e){d=setTimeout(function(){r(new w(`network timeout at: ${i.url}`,\"request-timeout\")),m()},i.timeout)}),u.on(\"error\",function(e){r(new w(`request to ${i.url} failed, reason: ${e.message}`,\"system\",e)),m()}),u.on(\"response\",function(e){clearTimeout(d);const t=function(e){const t=new P;for(const n of Object.keys(e))if(!I.test(n))if(Array.isArray(e[n]))for(const r of e[n])O.test(r)||(void 0===t[j][n]?t[j][n]=[r]:t[j][n].push(r));else O.test(e[n])||(t[j][n]=[e[n]]);return t}(e.headers);if(ee.isRedirect(e.statusCode)){const s=t.get(\"Location\"),o=null===s?null:Q(i.url,s);switch(i.redirect){case\"error\":return r(new w(`redirect mode is set to error: ${i.url}`,\"no-redirect\")),void m();case\"manual\":if(null!==o)try{t.set(\"Location\",o)}catch(e){r(e)}break;case\"follow\":if(null===o)break;if(i.counter>=i.follow)return r(new w(`maximum redirect reached at: ${i.url}`,\"max-redirect\")),void m();const s={headers:new P(i.headers),follow:i.follow,counter:i.counter+1,agent:i.agent,compress:i.compress,method:i.method,body:i.body,signal:i.signal};return 303!==e.statusCode&&i.body&&null===A(i)?(r(new w(\"Cannot follow redirect with body being a readable stream\",\"unsupported-redirect\")),void m()):(303!==e.statusCode&&(301!==e.statusCode&&302!==e.statusCode||\"POST\"!==i.method)||(s.method=\"GET\",s.body=void 0,s.headers.delete(\"content-length\")),n(ee(new Y(o,s))),void m())}}e.once(\"end\",function(){a&&a.removeEventListener(\"abort\",h)});let s=e.pipe(new X);const o={url:i.url,status:e.statusCode,statusText:e.statusMessage,headers:t,size:i.size,timeout:i.timeout},c=t.get(\"Content-Encoding\");if(!i.compress||\"HEAD\"===i.method||null===c||204===e.statusCode||304===e.statusCode)return l=new H(s,o),void n(l);const u={flush:y.Z_SYNC_FLUSH,finishFlush:y.Z_SYNC_FLUSH};if(\"gzip\"==c||\"x-gzip\"==c)return s=s.pipe(y.createGunzip(u)),l=new H(s,o),void n(l);if(\"deflate\"!=c&&\"x-deflate\"!=c)l=new H(s,o),n(l);else{e.pipe(new X).once(\"data\",function(e){s=8==(15&e[0])?s.pipe(y.createInflate()):s.pipe(y.createInflateRaw()),l=new H(s,o),n(l)})}}),function(e,t){const n=t.body;null===n?e.end():\"string\"==typeof n?(e.write(n),e.end()):E(n)?(e.write(Buffer.from(String(n))),e.end()):n instanceof v?(e.write(n[_]),e.end()):Buffer.isBuffer(n)?(e.write(n),e.end()):\"[object ArrayBuffer]\"===Object.prototype.toString.call(n)?(e.write(Buffer.from(n)),e.end()):ArrayBuffer.isView(n)?(e.write(Buffer.from(n.buffer,n.byteOffset,n.byteLength)),e.end()):n.pipe(e)}(u,i)})}ee.isRedirect=function(e){return 301===e||302===e||303===e||307===e||308===e},ee.Promise=global.Promise;var te=ee,ne=n(47),re=n.n(ne);\n/**\n * @license\n * Copyright (c) 2017 Google Inc. All rights reserved.\n * This code may only be used under the BSD style license found at\n * http://polymer.github.io/LICENSE.txt\n * Code distributed by Google as part of this project is also\n * subject to an additional IP rights grant found at\n * http://polymer.github.io/PATENTS.txt\n */\nconst ie=[\"Text\",\"URL\",\"Number\",\"Boolean\"];class se{static convert(e,t){const n=JSON.parse(e),r={},i={};n[\"@graph\"]||(n[\"@graph\"]=[n]);for(const e of n[\"@graph\"])\"rdf:Property\"===e[\"@type\"]?i[e[\"@id\"]]=e:\"rdfs:Class\"===e[\"@type\"]&&(r[e[\"@id\"]]=e,e.subclasses=[],e.superclass=null);for(const e of Object.values(r))if(void 0!==e[\"rdfs:subClassOf\"]){null==e[\"rdfs:subClassOf\"].length&&(e[\"rdfs:subClassOf\"]=[e[\"rdfs:subClassOf\"]]);for(const t of e[\"rdfs:subClassOf\"]){const n=t[\"@id\"];null==e.superclass&&(e.superclass=[]),r[n]?(r[n].subclasses.push(e),e.superclass.push(r[n])):e.superclass.push({\"@id\":n})}}for(const e of Object.values(r))0===e.subclasses.length&&null==t&&(t=e);const s=[];for(const e of Object.values(i)){let n=e[\"schema:domainIncludes\"];if(n||(n={\"@id\":t[\"@id\"]}),n.length||(n=[n]),(n=n.map(e=>e[\"@id\"])).includes(t[\"@id\"])){const t=e[\"@id\"].split(\":\")[1];let n=e[\"schema:rangeIncludes\"];n||console.log(e),n.length||(n=[n]),(n=(n=n.map(e=>e[\"@id\"].split(\":\")[1])).filter(e=>ie.includes(e))).length>0&&s.push({name:t,type:n})}}const o=t[\"@id\"].split(\":\")[1],a=t&&t.superclass?t.superclass.map(e=>e[\"@id\"].split(\":\")[1]):[];let l=\"\";for(const e of a)l+=`import 'https://schema.org/${e}'\\n\\n`;if(l+=`schema ${o}`,a.length>0&&(l+=` extends ${a.join(\", \")}`),s.length>0)for(const e of s){let t;l+=`\\n  ${t=e.type.length>1?\"(\"+e.type.join(\" or \")+\")\":e.type[0]} ${e.name}`}return l+=\"\\n\"}}\n/**\n * @license\n * Copyright (c) 2017 Google Inc. All rights reserved.\n * This code may only be used under the BSD style license found at\n * http://polymer.github.io/LICENSE.txt\n * Code distributed by Google as part of this project is also\n * subject to an additional IP rights grant found at\n * http://polymer.github.io/PATENTS.txt\n */const oe=()=>Object.create(null),ae=e=>(class extends e{constructor(){super(),this._pendingProps=oe(),this._props=this._getInitialProps()||oe(),this._lastProps=oe(),this._state=this._getInitialState()||oe(),this._lastState=oe()}_getInitialProps(){}_getInitialState(){}_getProperty(e){return this._pendingProps[e]||this._props[e]}_setProperty(e,t){(this._validator||this._wouldChangeProp(e,t))&&(this._pendingProps[e]=t,this._invalidateProps())}_wouldChangeValue(e,t,n){return e[t]!==n}_wouldChangeProp(e,t){return this._wouldChangeValue(this._props,e,t)}_wouldChangeState(e,t){return this._wouldChangeValue(this._state,e,t)}_setProps(e){Object.assign(this._pendingProps,e),this._invalidateProps()}_invalidateProps(){this._propsInvalid=!0,this._invalidate()}_setImmutableState(e,t){\"object\"==typeof e&&(console.warn(\"Xen:: _setImmutableState takes name and value args for a single property, dictionaries not supported.\"),t=Object.values(e)[0],e=Object.names(e)[0]),\"object\"==typeof t&&(t=Object.assign(Object.create(null),t)),this._state[e]=t,this._invalidate()}_setState(e){let t=!1;const n=this._state;for(const r in e){const i=e[r];this._wouldChangeState(r,i)&&(t=!0,n[r]=i)}if(t)return this._invalidate(),!0}_async(e){return Promise.resolve().then(e.bind(this))}_invalidate(){this._validator||(this._validator=this._async(this._validate))}_getStateArgs(){return[this._props,this._state,this._lastProps,this._lastState]}_validate(){const e=this._getStateArgs();try{Object.assign(this._props,this._pendingProps),this._propsInvalid&&(this._willReceiveProps(...e),this._propsInvalid=!1),this._shouldUpdate(...e)&&(this._ensureMount(),this._doUpdate(...e))}catch(e){console.error(e)}this._validator=null,this._lastProps=Object.assign(oe(),this._props),this._lastState=Object.assign(oe(),this._state)}_doUpdate(...e){this._update(...e),this._didUpdate(...e)}_ensureMount(){}_willReceiveProps(){}_shouldUpdate(){return!0}_update(){}_didUpdate(){}_debounce(e,t,n){e=`_debounce_${e}`,this._state[e]=((e,t,n)=>{if(e&&clearTimeout(e),t&&n)return setTimeout(t,n)})(this._state[e],t,null!=n?n:16)}});class le extends Error{constructor(e,t,n,r){super(),this.cause=e,this.method=t,this.particleId=n,this.particleName=r,this.stack+=`\\nCaused by: ${this.cause.stack}`}toLiteral(){return{exceptionType:this.constructor.name,cause:{name:this.cause.name,message:this.cause.message,stack:this.cause.stack},method:this.method,particleId:this.particleId,particleName:this.particleName,stack:this.stack}}static fromLiteral(e){const t=e.cause;let n;switch(e.exceptionType){case ce.name:n=new ce(t,e.method,e.particleId,e.particleName);break;case he.name:n=new he(t,e.method,e.particleId,e.particleName);break;default:throw new Error(`Unknown exception type: ${e.exceptionType}`)}return n.stack=e.stack,n}}class ce extends le{get message(){const e=this.particleName?this.particleName:this.particleId;return`SystemException: exception ${this.cause.name} raised when invoking system function ${this.method} on behalf of particle ${e}: ${this.cause.message}`}}class he extends le{get message(){const e=this.particleName?this.particleName:this.particleId;return`UserException: exception ${this.cause.name} raised when invoking function ${this.method} on particle ${e}: ${this.cause.message}`}}const ue=[];var de,fe;de=(e=>{throw console.log(e.method,e.particleName),e}),ue.includes(de)||ue.push(de),function(e){e.Dom=\"dom\",e.DomTouch=\"dom-touch\",e.Vr=\"vr\",e.Voice=\"voice\"}(fe||(fe={}));class pe{constructor(e){this.names=e}static create(e){return d()(e.every(e=>pe.all.names.includes(e)),`Unsupported modality in: ${e}`),new pe(e)}intersection(e){return new pe(this.names.filter(t=>e.names.includes(t)))}isResolved(){return this.names.length>0}isCompatible(e){return this.intersection(pe.create(e)).isResolved()}static get Name(){return fe}}\n/**\n * @license\n * Copyright (c) 2017 Google Inc. All rights reserved.\n * This code may only be used under the BSD style license found at\n * http://polymer.github.io/LICENSE.txt\n * Code distributed by Google as part of this project is also\n * subject to an additional IP rights grant found at\n * http://polymer.github.io/PATENTS.txt\n */\nfunction me(e){return De.fromLiteral(e)}function ge(e){return\"object\"==typeof e?me(e):e}function ye({type:e,name:t,direction:n}){return{type:e?me(e):void 0,name:t?ge(t):void 0,direction:n}}function _e({name:e,direction:t,isRequired:n,isSet:r}){return{name:e?ge(e):void 0,direction:t,isRequired:n,isSet:r}}function be(e){return e instanceof We?e.toLiteral():e}function ve({type:e,name:t,direction:n}){return{type:e?e.toLiteral():void 0,name:t?be(t):void 0,direction:n}}function we({name:e,direction:t,isRequired:n,isSet:r}){return{name:e?be(e):void 0,direction:t,isRequired:n,isSet:r}}pe.all=new pe([pe.Name.Dom,pe.Name.DomTouch,pe.Name.Vr,pe.Name.Voice]),pe.dom=new pe([pe.Name.Dom]),pe.domTouch=new pe([pe.Name.DomTouch]),pe.voice=new pe([pe.Name.Voice]),pe.vr=new pe([pe.Name.Vr]);const Se=[\"type\",\"name\",\"direction\"],ke=[\"name\",\"direction\",\"isRequired\",\"isSet\"];class Ce{constructor(e,t,n){d()(e),d()(void 0!==t),d()(void 0!==n),this.name=e,this.handles=t,this.slots=n,this.typeVars=[];for(const e of t)for(const t of Se)Ce.isTypeVar(e[t])&&this.typeVars.push({object:e,field:t});for(const e of n)for(const t of ke)Ce.isTypeVar(e[t])&&this.typeVars.push({object:e,field:t})}toPrettyString(){return\"InterfaceInfo\"}mergeTypeVariablesByName(e){this.typeVars.map(({object:t,field:n})=>t[n]=t[n].mergeTypeVariablesByName(e))}get canReadSubset(){return this._cloneAndUpdate(e=>e.canReadSubset)}get canWriteSuperset(){return this._cloneAndUpdate(e=>e.canWriteSuperset)}isMoreSpecificThan(e){if(this.handles.length!==e.handles.length||this.slots.length!==e.slots.length)return!1;for(let t=0;t<this.typeVars.length;t++){const n=this.typeVars[t],r=e.typeVars[t];if(!n.object[n.field].isMoreSpecificThan(r.object[r.field]))return!1}return!0}_applyExistenceTypeTest(e){for(const t of this.typeVars)if(e(t.object[t.field]))return!0;return!1}_handlesToManifestString(){return this.handles.map(e=>`  ${e.direction?e.direction+\" \":\"\"}${e.type.toString()} ${e.name?e.name:\"*\"}`).join(\"\\n\")}_slotsToManifestString(){return this.slots.map(e=>`  ${e.direction} ${e.isSet?\"set of \":\"\"}${e.name?e.name+\" \":\"\"}`).join(\"\\n\")}toString(){return`interface ${this.name}\\n${this._handlesToManifestString()}\\n${this._slotsToManifestString()}`}static fromLiteral(e){const t=e.handles.map(ye),n=e.slots.map(_e);return new Ce(e.name,t,n)}toLiteral(){const e=this.handles.map(ve),t=this.slots.map(we);return{name:this.name,handles:e,slots:t}}clone(e){const t=this.handles.map(({name:t,direction:n,type:r})=>({name:t,direction:n,type:r?r.clone(e):void 0})),n=this.slots.map(({name:e,direction:t,isRequired:n,isSet:r})=>({name:e,direction:t,isRequired:n,isSet:r}));return new Ce(this.name,t,n)}cloneWithResolutions(e){return this._cloneWithResolutions(e)}_cloneWithResolutions(e){const t=this.handles.map(({name:t,direction:n,type:r})=>({name:t,direction:n,type:r?r._cloneWithResolutions(e):void 0})),n=this.slots.map(({name:e,direction:t,isRequired:n,isSet:r})=>({name:e,direction:t,isRequired:n,isSet:r}));return new Ce(this.name,t,n)}canEnsureResolved(){for(const e of this.typeVars)if(!e.object[e.field].canEnsureResolved())return!1;return!0}maybeEnsureResolved(){for(const e of this.typeVars){let t=e.object[e.field];if(!(t=t.clone(new Map)).maybeEnsureResolved())return!1}for(const e of this.typeVars)e.object[e.field].maybeEnsureResolved();return!0}tryMergeTypeVariablesWith(e){if(!this._equalItems(e.slots,this.slots,this._equalSlot))return null;if(e.handles.length!==this.handles.length)return null;const t=new Set(this.handles),n=new Set(e.handles),r=new Map;let i=t.size;for(;t.size>0;){const e=[...t.values()].map(e=>({handle:e,match:[...n.values()].filter(t=>this._equalHandle(e,t))}));for(const i of e){if(0===i.match.length)return null;1===i.match.length&&(r.set(i.handle,i.match[0]),n.delete(i.match[0]),t.delete(i.handle))}if(t.size===i)return null;i=t.size}const s=[];for(const e of this.handles){const t=r.get(e);let n;if(e.type.hasVariable||t.type.hasVariable){if(!(n=Xe._tryMergeTypeVariable(e.type,t.type)))return null}else n=e.type||t.type;s.push({name:e.name||t.name,direction:e.direction||t.direction,type:n})}const o=this.slots.map(({name:e,direction:t,isRequired:n,isSet:r})=>({name:e,direction:t,isRequired:n,isSet:r}));return new Ce(this.name,s,o)}resolvedType(){return this._cloneAndUpdate(e=>e.resolvedType())}equals(e){return this.handles.length===e.handles.length&&(!!this._equalItems(e.handles,this.handles,this._equalHandle)&&!!this._equalItems(e.slots,this.slots,this._equalSlot))}_equalHandle(e,t){return e.name===t.name&&e.direction===t.direction&&Xe.compareTypes({type:e.type},{type:t.type})}_equalSlot(e,t){return e.name===t.name&&e.direction===t.direction&&e.isRequired===t.isRequired&&e.isSet===t.isSet}_equalItems(e,t,n){for(const r of e){let e=!1;for(const i of t)if(n(i,r)){e=!0;break}if(!e)return!1}return!0}_cloneAndUpdate(e){const t=this.clone(new Map);return t.typeVars.forEach(t=>Ce._updateTypeVar(t,e)),t}static _updateTypeVar(e,t){e.object[e.field]=t(e.object[e.field])}static isTypeVar(e){return e instanceof We||e instanceof De&&e.hasVariable}static mustMatch(e){return!(null==e||Ce.isTypeVar(e))}static handlesMatch(e,t){if(Ce.mustMatch(e.name)&&e.name!==t.name)return!1;if(Ce.mustMatch(e.direction)&&e.direction!==t.direction)return!1;if(null==e.type)return!0;const[n,r]=De.unwrapPair(e.type,t.type);return n instanceof We?[{var:n,value:r,direction:e.direction}]:Xe.compareTypes({type:n},{type:r})}static slotsMatch(e,t){return(!Ce.mustMatch(e.name)||e.name===t.name)&&((!Ce.mustMatch(e.direction)||e.direction===t.direction)&&((!Ce.mustMatch(e.isRequired)||e.isRequired===t.isRequired)&&(!Ce.mustMatch(e.isSet)||e.isSet===t.isSet)))}particleMatches(e){return!1!==this.cloneWithResolutions(new Map).restrictType(e)}restrictType(e){return this._restrictThis(e)}_restrictThis(e){const t=this.handles.map(t=>e.handleConnections.map(e=>({match:e,result:Ce.handlesMatch(t,e)})).filter(e=>!1!==e.result)),n=[];e.slotConnections.forEach(e=>{n.push({name:e.name,direction:\"consume\",isRequired:e.isRequired,isSet:e.isSet}),e.provideSlotConnections.forEach(e=>{n.push({name:e.name,direction:\"provide\",isRequired:!1,isSet:e.isSet})})});const r=this.slots.map(e=>n.filter(t=>Ce.slotsMatch(e,t))).map(e=>e.map(e=>({match:e,result:!0})));function i(e,t){if(0===e.length)return[];const n=e.pop();for(const r of n){if(t.includes(r.match))continue;const n=t.slice();n.push(r.match);const s=i(e,n);if(!1!==s)return\"boolean\"==typeof r.result?s:s.concat(r.result)}return!1}const s=i(t,[]),o=i(r,[]);if(!1===s||!1===o)return!1;for(const e of s)if(e.var.variable.resolution){if(e.var.variable.resolution instanceof We){if(!Xe.processTypeList(e.var,[{type:e.value,direction:e.direction}]))return!1}else if(!Xe.compareTypes({type:e.var.variable.resolution},{type:e.value}))return!1}else e.var.variable.resolution=e.value;return!0}}\n// @license\nconst Te={identifier:Symbol(\"id\")};\n/** @license\n * Copyright (c) 2018 Google Inc. All rights reserved.\n * This code may only be used under the BSD style license found at\n * http://polymer.github.io/LICENSE.txt\n * Code distributed by Google as part of this project is also\n * subject to an additional IP rights grant found at\n * http://polymer.github.io/PATENTS.txt\n */var xe;!function(e){e[e.Unstored=0]=\"Unstored\",e[e.Stored=1]=\"Stored\"}(xe||(xe={}));class Ee{constructor(e,t,n){this.entity=null,this.storageProxy=null,this.handle=null,this.id=e.id,this.storageKey=e.storageKey,this.context=n,this.type=t}async ensureStorageProxy(){null==this.storageProxy&&(this.storageProxy=await this.context.getStorageProxy(this.storageKey,this.type.referredType),this.handle=function(e,t,n=null,r=\"\",i=!0,s=!0){let o;o=e.type instanceof He?new ft(e,t,n,r,i,s):e.type instanceof qe?new gt(e,t,n,r,i,s):new pt(e,t,n,r,i,s);const a=e.type.getContainedType()||e.type;a instanceof Ue&&(o.entityClass=a.entitySchema.entityClass(e.pec));return o}\n/**\n * @license\n * Copyright (c) 2017 Google Inc. All rights reserved.\n * This code may only be used under the BSD style license found at\n * http://polymer.github.io/LICENSE.txt\n * Code distributed by Google as part of this project is also\n * subject to an additional IP rights grant found at\n * http://polymer.github.io/PATENTS.txt\n */(this.storageProxy,this.context.idGenerator),this.storageKey?d()(this.storageKey===this.storageProxy.storageKey):this.storageKey=this.storageProxy.storageKey)}async dereference(){return d()(this.context,\"Must have context to dereference\"),this.entity?this.entity:(await this.ensureStorageProxy(),this.entity=await this.handle.get(this.id),this.entity)}dataClone(){return{storageKey:this.storageKey,id:this.id}}serialize(){return{id:this.id,rawData:this.dataClone()}}}class Re extends Ee{constructor(e,t){super({id:e.id,storageKey:null},new Je(e.entityClass.type),t),this.mode=xe.Unstored,this.entity=e,this.stored=new Promise(async(t,n)=>{await this.storeReference(e),t()})}async storeReference(e){await this.ensureStorageProxy(),await this.handle.store(e),this.mode=xe.Stored}async dereference(){return this.mode===xe.Unstored?null:super.dereference()}isIdentified(){return this.entity.isIdentified()}static newClientReference(e){return class extends Re{constructor(t){super(t,e)}}}}\n// @license\nclass Ae{constructor(e,t,n,r){this._mutable=!0,d()(!r||-1===r.indexOf(\":\"),\"user IDs must not contain the ':' character\"),je(this,void 0),this.userIDComponent=r,this.schema=t,this.context=n,d()(e,\"can't construct entity with null data\"),this.rawData=Ne(e,t,n)}get mutable(){return this._mutable}set mutable(e){if(!this.mutable&&e)throw new Error(\"You cannot make an immutable entity mutable again.\");this._mutable=e}mutate(e){if(!this.mutable)throw new Error(\"Entity is immutable.\");let t;\"function\"==typeof e?e(t=this.dataClone()):t=e,this.rawData=Ne(t,this.schema,this.context)}getUserID(){return this.userIDComponent}isIdentified(){return void 0!==Be(this)}get id(){return d()(!!this.isIdentified()),Be(this)}identify(e){d()(!this.isIdentified()),je(this,e);const t=e.split(\":\"),n=t.lastIndexOf(\"uid\");this.userIDComponent=n>0?t.slice(n+1).join(\":\"):\"\"}createIdentity(e,t){let n;d()(!this.isIdentified()),je(this,n=this.userIDComponent?`${e.toString()}:uid:${this.userIDComponent}`:t.newChildId(e).toString())}toLiteral(){return this.rawData}toJSON(){return this.rawData}dataClone(){const e={},t=this.schema.fields;for(const n of Object.keys(t))void 0!==this.rawData[n]&&(t[n]&&\"schema-reference\"===t[n].kind?this.rawData[n]&&(e[n]=this.rawData[n].dataClone()):t[n]&&\"schema-collection\"===t[n].kind?this.rawData[n]&&(e[n]=[...this.rawData[n]].map(e=>e.dataClone())):e[n]=this.rawData[n]);return e}serialize(){return{id:Be(this),rawData:this.dataClone()}}static createEntityClass(e,t){const n=class extends Ae{constructor(n,r){super(n,e,t,r)}get entityClass(){return n}static get type(){return new Ue(e)}static get key(){return{tag:\"entity\",schema:e}}static get schema(){return e}};Object.defineProperty(n,\"name\",{value:e.name});for(const t of Object.keys(e.fields))Object.defineProperty(n.prototype,t,{get(){return this.rawData[t]},set(e){this.rawData[t]=e}});return n}}function Ie(e,t){switch(e.type){case\"Text\":case\"URL\":return\"string\";case\"Number\":return\"number\";case\"Boolean\":return\"boolean\";case\"Bytes\":return\"Uint8Array\";case\"Object\":return\"object\";default:throw new Error(`Unknown field type ${e.type} in schema ${t}`)}}function Oe({op:e,name:t,value:n,schema:r,fieldType:i}){if(void 0===(i=i||r.fields[t]))throw new Error(`Can't ${e} field ${t}; not in schema ${r.name}`);if(null!=n)switch(i.kind){case\"schema-primitive\":if((\"Uint8Array\"===n.constructor.name?\"Uint8Array\":typeof n)!==Ie(i,r.name))throw new TypeError(`Type mismatch ${e}ting field ${t} (type ${i.type}); `+`value '${n}' is type ${typeof n}`);break;case\"schema-union\":for(const e of i.types)if(typeof n===Ie(e,r.name))return;throw new TypeError(`Type mismatch ${e}ting field ${t} (union [${i.types}]); `+`value '${n}' is type ${typeof n}`);case\"schema-tuple\":if(!Array.isArray(n))throw new TypeError(`Cannot ${e} tuple ${t} with non-array value '${n}'`);if(n.length!==i.types.length)throw new TypeError(`Length mismatch ${e}ting tuple ${t} `+`[${i.types}] with value '${n}'`);i.types.map((s,o)=>{if(void 0!==n[o]&&null!==n[o]&&typeof n[o]!==Ie(s,r.name))throw new TypeError(`Type mismatch ${e}ting field ${t} (tuple [${i.types}]); `+`value '${n}' has type ${typeof n[o]} at index ${o}`)});break;case\"schema-reference\":if(!(n instanceof Ee))throw new TypeError(`Cannot ${e} reference ${t} with non-reference '${n}'`);if(!Xe.compareTypes({type:n.type},{type:new Je(i.schema.model)}))throw new TypeError(`Cannot ${e} reference ${t} with value '${n}' of mismatched type`);break;case\"schema-collection\":if(\"Set\"!==n.constructor.name)throw new TypeError(`Cannot ${e} collection ${t} with non-Set '${n}'`);for(const s of n)Oe({op:e,name:t,value:s,schema:r,fieldType:i.schema});break;default:throw new Error(`Unknown kind ${i.kind} in schema ${r.name}`)}}function $e(e,t,n,r){if(!e)return t;if(\"schema-reference\"===e.kind&&t){if(t instanceof Ee)return t;if(t.id&&t.storageKey)return new Ee(t,new Je(e.schema.model),r);throw new TypeError(`Cannot set reference ${n} with non-reference '${t}'`)}if(\"schema-collection\"===e.kind&&t){if(\"Set\"===t.constructor.name)return t;if(t.length&&t instanceof Object)return new Set(t.map(t=>$e(e.schema,t,n,r)));throw new TypeError(`Cannot set collection ${n} with non-collection '${t}'`)}return t}function Ne(e,t,n){const r=[\"toJSON\",\"prototype\",\"toString\",\"inspect\"],i=function(e,t,n){const r={};for(const[i,s]of Object.entries(e)){const e=$e(t.fields[i],s,i,n);Oe({op:\"set\",name:i,value:e,schema:t}),r[i]=e}return r}(e,t,n);return new Proxy(i,{get:(e,n)=>{if(r.includes(n)||n.constructor===Symbol)return;const i=e[n];return Oe({op:\"get\",name:n,value:i,schema:t}),i},set:(e,t,n)=>{throw new Error(`Tried to modify entity field '${t}'. Use the mutate method instead.`)}})}function Be(e){return e[Te.identifier]}function je(e,t){e[Te.identifier]=t}\n/**\n * @license\n * Copyright (c) 2017 Google Inc. All rights reserved.\n * This code may only be used under the BSD style license found at\n * http://polymer.github.io/LICENSE.txt\n * Code distributed by Google as part of this project is also\n * subject to an additional IP rights grant found at\n * http://polymer.github.io/PATENTS.txt\n */class Pe{constructor(e,t,n){this.description={},this.names=e,this.fields={};for(const[e,n]of Object.entries(t))this.fields[e]=\"string\"==typeof n?{kind:\"schema-primitive\",type:n}:n;n&&n.description.forEach(e=>this.description[e.name]=e.pattern||e.patterns[0])}toLiteral(){const e={},t=e=>{if(\"schema-reference\"===e.kind){const t=e.schema;return{kind:\"schema-reference\",schema:{kind:t.kind,model:t.model.toLiteral()}}}return\"schema-collection\"===e.kind?{kind:\"schema-collection\",schema:t(e.schema)}:e};for(const n of Object.keys(this.fields))e[n]=t(this.fields[n]);return{names:this.names,fields:e,description:this.description}}static fromLiteral(e={fields:{},names:[],description:{}}){const t={},n=e=>{if(\"schema-reference\"===e.kind){const t=e.schema;return{kind:\"schema-reference\",schema:{kind:t.kind,model:De.fromLiteral(t.model)}}}return\"schema-collection\"===e.kind?{kind:\"schema-collection\",schema:n(e.schema)}:e};for(const r of Object.keys(e.fields))t[r]=n(e.fields[r]);const r=new Pe(e.names,t);return r.description=e.description||{},r}get name(){return this.names[0]}static typesEqual(e,t){return Pe._typeString(e)===Pe._typeString(t)}static _typeString(e){switch(e.kind){case\"schema-primitive\":return e.type;case\"schema-union\":return`(${e.types.map(e=>e.type).join(\" or \")})`;case\"schema-tuple\":return`(${e.types.map(e=>e.type).join(\", \")})`;case\"schema-reference\":return`Reference<${Pe._typeString(e.schema)}>`;case\"type-name\":case\"schema-inline\":return e.model.entitySchema.toInlineSchemaString();case\"schema-collection\":return`[${Pe._typeString(e.schema)}]`;default:throw new Error(`Unknown type kind ${e.kind} in schema ${this.name}`)}}static union(e,t){const n=[...new Set([...e.names,...t.names])],r={};for(const[n,i]of[...Object.entries(e.fields),...Object.entries(t.fields)])if(r[n]){if(!Pe.typesEqual(r[n],i))return null}else r[n]=i;return new Pe(n,r)}static intersect(e,t){const n=[...e.names].filter(e=>t.names.includes(e)),r={};for(const[n,i]of Object.entries(e.fields)){const e=t.fields[n];e&&Pe.typesEqual(i,e)&&(r[n]=i)}return new Pe(n,r)}equals(e){return this===e||this.name===e.name&&this.isMoreSpecificThan(e)&&e.isMoreSpecificThan(this)}isMoreSpecificThan(e){const t=new Set(this.names);for(const n of e.names)if(!t.has(n))return!1;const n={};for(const[e,t]of Object.entries(this.fields))n[e]=t;for(const[t,r]of Object.entries(e.fields)){if(null==n[t])return!1;if(!Pe.typesEqual(n[t],r))return!1}return!0}get type(){return new Ue(this)}entityClass(e=null){return Ae.createEntityClass(this,e)}toInlineSchemaString(e){const t=this.names.join(\" \")||\"*\",n=Object.entries(this.fields).map(([e,t])=>`${Pe._typeString(t)} ${e}`).join(\", \");return`${t} {${n.length>0&&e&&e.hideFields?\"...\":n}}`}toManifestString(){const e=[];if(e.push(`schema ${this.names.join(\" \")}`),e.push(...Object.entries(this.fields).map(([e,t])=>`  ${Pe._typeString(t)} ${e}`)),Object.keys(this.description).length>0){e.push(`  description \\`${this.description.pattern}\\``);for(const t of Object.keys(this.description))\"pattern\"!==t&&e.push(`    ${t} \\`${this.description[t]}\\``)}return e.join(\"\\n\")}}\n// @license\nclass ze{constructor(e,t){this.formFactor=e,this.handle=t}toLiteral(){return this}static fromLiteral({formFactor:e,handle:t}){return new ze(e,t)}}\n// @license\nclass Me{constructor(e,t){this.id=e.toString(),this.serialization=t.replace(/\\bimport .*\\n/g,\"\")}static extractSerialization(e){return e.serialization.replace(/\\bimport .*\\n/g,\"\")}}class Fe{constructor(e,t,n,r){this.id=e,this.storageKey=t,this.type=n,this.tags=r}}\n// @license\nclass Le{constructor(e,t,n){this.name=e,this._canWriteSuperset=t,this._canReadSubset=n,this._resolution=null}maybeMergeConstraints(e){return!!this.maybeMergeCanReadSubset(e.canReadSubset)&&this.maybeMergeCanWriteSuperset(e.canWriteSuperset)}maybeMergeCanReadSubset(e){if(null==e)return!0;if(null==this.canReadSubset)return this.canReadSubset=e,!0;if(this.canReadSubset instanceof Ze&&e instanceof Ze)return!0;if(this.canReadSubset instanceof Ue&&e instanceof Ue){const t=Pe.intersect(this.canReadSubset.entitySchema,e.entitySchema);return!!t&&(this.canReadSubset=new Ue(t),!0)}return!1}maybeMergeCanWriteSuperset(e){if(null==e)return!0;if(null==this.canWriteSuperset)return this.canWriteSuperset=e,!0;if(this.canWriteSuperset instanceof Ze&&e instanceof Ze)return!0;if(this.canWriteSuperset instanceof Ue&&e instanceof Ue){const t=Pe.union(this.canWriteSuperset.entitySchema,e.entitySchema);return!!t&&(this.canWriteSuperset=new Ue(t),!0)}return!1}isSatisfiedBy(e){const t=this._canWriteSuperset;if(!t)return!0;if(!(t instanceof Ue&&e instanceof Ue))throw new Error(`constraint checking not implemented for ${this} and ${e}`);return e.getEntitySchema().isMoreSpecificThan(t.getEntitySchema())}get resolution(){return this._resolution?this._resolution.resolvedType():null}isValidResolutionCandidate(e){const t=e.resolvedType().getContainedType();return t instanceof We&&t.variable===this?{result:!1,detail:\"variable cannot resolve to collection of itself\"}:{result:!0}}set resolution(e){d()(!this._resolution);const t=this.isValidResolutionCandidate(e);d()(t.result,t.detail);let n=e;for(;n&&n instanceof We;){if(n.variable===this)return;n=n.variable.resolution}this._resolution=e,this._canWriteSuperset=null,this._canReadSubset=null}get canWriteSuperset(){return this._resolution?(d()(!this._canWriteSuperset),this._resolution instanceof We?this._resolution.variable.canWriteSuperset:null):this._canWriteSuperset}set canWriteSuperset(e){d()(!this._resolution),this._canWriteSuperset=e}get canReadSubset(){return this._resolution?(d()(!this._canReadSubset),this._resolution instanceof We?this._resolution.variable.canReadSubset:null):this._canReadSubset}set canReadSubset(e){d()(!this._resolution),this._canReadSubset=e}get hasConstraint(){return null!==this._canReadSubset||null!==this._canWriteSuperset}canEnsureResolved(){return this._resolution?this._resolution.canEnsureResolved():!(!this._canWriteSuperset&&!this._canReadSubset)}maybeEnsureResolved(){return this._resolution?this._resolution.maybeEnsureResolved():this._canWriteSuperset?(this.resolution=this._canWriteSuperset,!0):!!this._canReadSubset&&(this.resolution=this._canReadSubset,!0)}toLiteral(){return d()(null==this.resolution),this.toLiteralIgnoringResolutions()}toLiteralIgnoringResolutions(){return{name:this.name,canWriteSuperset:this._canWriteSuperset&&this._canWriteSuperset.toLiteral(),canReadSubset:this._canReadSubset&&this._canReadSubset.toLiteral()}}static fromLiteral(e){return new Le(e.name,e.canWriteSuperset?De.fromLiteral(e.canWriteSuperset):null,e.canReadSubset?De.fromLiteral(e.canReadSubset):null)}isResolved(){return this._resolution&&this._resolution.isResolved()}}\n// @license\nclass De{constructor(e){this.tag=e}static fromLiteral(e){switch(e.tag){case\"Entity\":return new Ue(Pe.fromLiteral(e.data));case\"TypeVariable\":return new We(Le.fromLiteral(e.data));case\"Collection\":return new He(De.fromLiteral(e.data));case\"BigCollection\":return new qe(De.fromLiteral(e.data));case\"Relation\":return new Ve(e.data.map(e=>De.fromLiteral(e)));case\"Interface\":return new Ke(Ce.fromLiteral(e.data));case\"Slot\":return new Ze(ze.fromLiteral(e.data));case\"Reference\":return new Je(De.fromLiteral(e.data));case\"Arc\":return new Ye;case\"Handle\":return new Ge;default:throw new Error(`fromLiteral: unknown type ${e}`)}}static unwrapPair(e,t){if(e.tag===t.tag){const n=e.getContainedType();if(null!==n)return De.unwrapPair(n,t.getContainedType())}return[e,t]}static canMergeConstraints(e,t){return De._canMergeCanReadSubset(e,t)&&De._canMergeCanWriteSuperset(e,t)}static _canMergeCanReadSubset(e,t){if(e.canReadSubset&&t.canReadSubset){if(e.canReadSubset.tag!==t.canReadSubset.tag)return!1;if(e.canReadSubset instanceof Ue)return null!==Pe.intersect(e.canReadSubset.entitySchema,t.canReadSubset.entitySchema);throw new Error(`_canMergeCanReadSubset not implemented for types tagged with ${e.canReadSubset.tag}`)}return!0}static _canMergeCanWriteSuperset(e,t){if(e.canWriteSuperset&&t.canWriteSuperset){if(e.canWriteSuperset.tag!==t.canWriteSuperset.tag)return!1;if(e.canWriteSuperset instanceof Ue)return null!==Pe.union(e.canWriteSuperset.entitySchema,t.canWriteSuperset.entitySchema)}return!0}isCollectionType(){return this instanceof He}isBigCollectionType(){return this instanceof qe}isResolved(){return!this.hasUnresolvedVariable}mergeTypeVariablesByName(e){return this}_applyExistenceTypeTest(e){return e(this)}get hasVariable(){return this._applyExistenceTypeTest(e=>e instanceof We)}get hasUnresolvedVariable(){return this._applyExistenceTypeTest(e=>e instanceof We&&!e.variable.isResolved())}getContainedType(){return null}isTypeContainer(){return!1}collectionOf(){return new He(this)}bigCollectionOf(){return new qe(this)}resolvedType(){return this}canEnsureResolved(){return this.isResolved()||this._canEnsureResolved()}_canEnsureResolved(){return!0}maybeEnsureResolved(){return!0}get canWriteSuperset(){throw new Error(`canWriteSuperset not implemented for ${this}`)}get canReadSubset(){throw new Error(`canReadSubset not implemented for ${this}`)}isMoreSpecificThan(e){return this.tag===e.tag&&this._isMoreSpecificThan(e)}_isMoreSpecificThan(e){throw new Error(`isMoreSpecificThan not implemented for ${this}`)}clone(e){return this.resolvedType()._clone(e)}_clone(e){return De.fromLiteral(this.toLiteral())}_cloneWithResolutions(e){return De.fromLiteral(this.toLiteral())}hasProperty(e){return e(this)||this._hasProperty(e)}_hasProperty(e){return!1}toString(e){return this.tag}getEntitySchema(){return null}toPrettyString(){return null}}class Ue extends De{constructor(e){super(\"Entity\"),this.entitySchema=e}static make(e,t,n){return new Ue(new Pe(e,t,n))}get isEntity(){return!0}get canWriteSuperset(){return this}get canReadSubset(){return this}_isMoreSpecificThan(e){return this.entitySchema.isMoreSpecificThan(e.entitySchema)}toLiteral(){return{tag:this.tag,data:this.entitySchema.toLiteral()}}toString(e){return this.entitySchema.toInlineSchemaString(e)}getEntitySchema(){return this.entitySchema}_cloneWithResolutions(e){if(e.has(this.entitySchema))return e.get(this.entitySchema);const t=new Ue(this.entitySchema);return e.set(this.entitySchema,t),t}toPrettyString(){return this.entitySchema.description.pattern?this.entitySchema.description.pattern:this.entitySchema.name?this.entitySchema.name.replace(/([^A-Z])([A-Z])/g,\"$1 $2\").replace(/([A-Z][^A-Z])/g,\" $1\").replace(/[\\s]+/g,\" \").trim():JSON.stringify(this.entitySchema.toLiteral())}}class We extends De{constructor(e){super(\"TypeVariable\"),this.variable=e}static make(e,t,n){return new We(new Le(e,t,n))}get isVariable(){return!0}mergeTypeVariablesByName(e){const t=this.variable.name;let n=e.get(t);if(n){if(n instanceof We&&(n.variable.hasConstraint||this.variable.hasConstraint)){if(!n.variable.maybeMergeConstraints(this.variable))throw new Error(\"could not merge type variables\")}}else n=this,e.set(t,this);return n}resolvedType(){return this.variable.resolution||this}_canEnsureResolved(){return this.variable.canEnsureResolved()}maybeEnsureResolved(){return this.variable.maybeEnsureResolved()}get canWriteSuperset(){return this.variable.canWriteSuperset}get canReadSubset(){return this.variable.canReadSubset}_clone(e){const t=this.variable.name;if(e.has(t))return new We(e.get(t));{const n=Le.fromLiteral(this.variable.toLiteral());return e.set(t,n),new We(n)}}_cloneWithResolutions(e){if(e.has(this.variable))return new We(e.get(this.variable));{const t=Le.fromLiteral(this.variable.toLiteralIgnoringResolutions());return this.variable.resolution&&(t._resolution=this.variable._resolution._cloneWithResolutions(e)),this.variable._canReadSubset&&(t.canReadSubset=this.variable.canReadSubset._cloneWithResolutions(e)),this.variable._canWriteSuperset&&(t.canWriteSuperset=this.variable.canWriteSuperset._cloneWithResolutions(e)),e.set(this.variable,t),new We(t)}}toLiteral(){return this.variable.resolution?this.variable.resolution.toLiteral():{tag:this.tag,data:this.variable.toLiteral()}}toString(e){return`~${this.variable.name}`}getEntitySchema(){return this.variable.isResolved()?this.resolvedType().getEntitySchema():null}toPrettyString(){return this.variable.isResolved()?this.resolvedType().toPrettyString():`[~${this.variable.name}]`}}class He extends De{constructor(e){super(\"Collection\"),this.collectionType=e}get isCollection(){return!0}mergeTypeVariablesByName(e){const t=this.collectionType,n=t.mergeTypeVariablesByName(e);return n===t?this:n.collectionOf()}_applyExistenceTypeTest(e){return this.collectionType._applyExistenceTypeTest(e)}getContainedType(){return this.collectionType}isTypeContainer(){return!0}resolvedType(){const e=this.collectionType,t=e.resolvedType();return e!==t?t.collectionOf():this}_canEnsureResolved(){return this.collectionType.canEnsureResolved()}maybeEnsureResolved(){return this.collectionType.maybeEnsureResolved()}_clone(e){const t=this.collectionType.clone(e).toLiteral();return De.fromLiteral({tag:this.tag,data:t})}_cloneWithResolutions(e){return new He(this.collectionType._cloneWithResolutions(e))}toLiteral(){return{tag:this.tag,data:this.collectionType.toLiteral()}}_hasProperty(e){return this.collectionType.hasProperty(e)}toString(e){return`[${this.collectionType.toString(e)}]`}getEntitySchema(){return this.collectionType.getEntitySchema()}toPrettyString(){const e=this.getEntitySchema();return e&&e.description.plural?e.description.plural:`${this.collectionType.toPrettyString()} List`}}class qe extends De{constructor(e){super(\"BigCollection\"),this.bigCollectionType=e}get isBigCollection(){return!0}mergeTypeVariablesByName(e){const t=this.bigCollectionType,n=t.mergeTypeVariablesByName(e);return n===t?this:n.bigCollectionOf()}_applyExistenceTypeTest(e){return this.bigCollectionType._applyExistenceTypeTest(e)}getContainedType(){return this.bigCollectionType}isTypeContainer(){return!0}resolvedType(){const e=this.bigCollectionType,t=e.resolvedType();return e!==t?t.bigCollectionOf():this}_canEnsureResolved(){return this.bigCollectionType.canEnsureResolved()}maybeEnsureResolved(){return this.bigCollectionType.maybeEnsureResolved()}_clone(e){const t=this.bigCollectionType.clone(e).toLiteral();return De.fromLiteral({tag:this.tag,data:t})}_cloneWithResolutions(e){return new qe(this.bigCollectionType._cloneWithResolutions(e))}toLiteral(){return{tag:this.tag,data:this.bigCollectionType.toLiteral()}}_hasProperty(e){return this.bigCollectionType.hasProperty(e)}toString(e){return`BigCollection<${this.bigCollectionType.toString(e)}>`}getEntitySchema(){return this.bigCollectionType.getEntitySchema()}toPrettyString(){const e=this.getEntitySchema();return e&&e.description.plural?e.description.plural:`Collection of ${this.bigCollectionType.toPrettyString()}`}}class Ve extends De{constructor(e){super(\"Relation\"),this.relationEntities=e}get isRelation(){return!0}toLiteral(){return{tag:this.tag,data:this.relationEntities.map(e=>e.toLiteral())}}toPrettyString(){return JSON.stringify(this.relationEntities)}}class Ke extends De{constructor(e){super(\"Interface\"),this.interfaceInfo=e}static make(e,t,n){return new Ke(new Ce(e,t,n))}get isInterface(){return!0}mergeTypeVariablesByName(e){const t=this.interfaceInfo.clone(new Map);return t.mergeTypeVariablesByName(e),new Ke(t)}_applyExistenceTypeTest(e){return this.interfaceInfo._applyExistenceTypeTest(e)}resolvedType(){return new Ke(this.interfaceInfo.resolvedType())}_canEnsureResolved(){return this.interfaceInfo.canEnsureResolved()}maybeEnsureResolved(){return this.interfaceInfo.maybeEnsureResolved()}get canWriteSuperset(){return new Ke(this.interfaceInfo.canWriteSuperset)}get canReadSubset(){return new Ke(this.interfaceInfo.canReadSubset)}_isMoreSpecificThan(e){return this.interfaceInfo.isMoreSpecificThan(e.interfaceInfo)}_clone(e){const t=this.interfaceInfo.clone(e).toLiteral();return De.fromLiteral({tag:this.tag,data:t})}_cloneWithResolutions(e){return new Ke(this.interfaceInfo._cloneWithResolutions(e))}toLiteral(){return{tag:this.tag,data:this.interfaceInfo.toLiteral()}}toString(e){return this.interfaceInfo.name}toPrettyString(){return this.interfaceInfo.toPrettyString()}}class Ze extends De{constructor(e){super(\"Slot\"),this.slot=e}static make(e,t){return new Ze(new ze(e,t))}get isSlot(){return!0}get canWriteSuperset(){return this}get canReadSubset(){return this}_isMoreSpecificThan(e){return!0}toLiteral(){return{tag:this.tag,data:this.slot.toLiteral()}}toString(e){const t=[];for(const e of Object.keys(this.slot))void 0!==this.slot[e]&&t.push(`${e}:${this.slot[e]}`);let n=\"\";return 0!==t.length&&(n=` {${t.join(\", \")}}`),`Slot${n}`}toPrettyString(){const e=[];for(const t of Object.keys(this.slot))void 0!==this.slot[t]&&e.push(`${t}:${this.slot[t]}`);let t=\"\";return 0!==e.length&&(t=` {${e.join(\", \")}}`),`Slot${t}`}}class Je extends De{constructor(e){super(\"Reference\"),this.referredType=e}get isReference(){return!0}getContainedType(){return this.referredType}isTypeContainer(){return!0}resolvedType(){const e=this.referredType,t=e.resolvedType();return e!==t?new Je(t):this}_canEnsureResolved(){return this.referredType.canEnsureResolved()}maybeEnsureResolved(){return this.referredType.maybeEnsureResolved()}get canReadSubset(){return this.referredType.canReadSubset}_clone(e){const t=this.referredType.clone(e).toLiteral();return De.fromLiteral({tag:this.tag,data:t})}_cloneWithResolutions(e){return new Je(this.referredType._cloneWithResolutions(e))}toLiteral(){return{tag:this.tag,data:this.referredType.toLiteral()}}toString(e){return\"Reference<\"+this.referredType.toString()+\">\"}}class Ye extends De{constructor(){super(\"Arc\")}get isArc(){return!0}newInstance(e,t){return new Me(e,t)}toLiteral(){return{tag:this.tag}}}class Ge extends De{constructor(){super(\"Handle\")}get isHandle(){return!0}toLiteral(){return{tag:this.tag}}}class Xe{static processTypeList(e,t){const n=We.make(\"\",null,null);e&&(n.variable.resolution=e),e=n;const r=[];for(const n of t)if(n.type.resolvedType().hasVariable){if(null==(e=Xe._tryMergeTypeVariable(e,n.type)))return null}else r.push(n);for(const t of r)if(!Xe._tryMergeConstraints(e,t))return null;const i=e=>e instanceof We?null==e.canReadSubset||null==e.canWriteSuperset?e:e.canReadSubset.isMoreSpecificThan(e.canWriteSuperset)?(e.canWriteSuperset.isMoreSpecificThan(e.canReadSubset)&&(e.variable.resolution=e.canReadSubset),e):null:e,s=e.resolvedType();if(s.isCollectionType()){const e=i(s.collectionType);return null!==e?e.collectionOf():null}if(s.isBigCollectionType()){const e=i(s.bigCollectionType);return null!==e?e.bigCollectionOf():null}return i(s)}static _tryMergeTypeVariable(e,t){const[n,r]=De.unwrapPair(e.resolvedType(),t.resolvedType());if(n instanceof We){if(r instanceof We){if(!1===n.variable.maybeMergeConstraints(r.variable))return null;r.variable.resolution=n}else{if(!n.variable.isValidResolutionCandidate(r).result)return null;n.variable.resolution=r}return e}if(r instanceof We)return r.variable.isValidResolutionCandidate(n).result?(r.variable.resolution=n,t):null;if(n instanceof Ke&&r instanceof Ke){const e=n.interfaceInfo.tryMergeTypeVariablesWith(r.interfaceInfo);return null==e?null:new Ke(e)}if(n.isTypeContainer()&&n.hasVariable||r.isTypeContainer()&&r.hasVariable)return null;throw new Error(\"tryMergeTypeVariable shouldn't be called on two types without any type variables\")}static _tryMergeConstraints(e,{type:t,direction:n}){let[r,i]=De.unwrapPair(e.resolvedType(),t.resolvedType());if(r instanceof We){for(;i.isTypeContainer();){if(null!=r.variable.resolution||null!=r.variable.canReadSubset||null!=r.variable.canWriteSuperset)return!1;const e=We.make(\"a\",null,null);r.variable.resolution=i instanceof He?new He(e):i instanceof qe?new qe(e):new Je(e);const t=De.unwrapPair(r.resolvedType(),i);if([r,i]=t,!(r instanceof We))throw new TypeError(\"unwrapping a wrapped TypeVariable somehow didn't become a TypeVariable\")}if((\"out\"===n||\"inout\"===n||\"`provide\"===n)&&!r.variable.maybeMergeCanReadSubset(i.canWriteSuperset))return!1;if((\"in\"===n||\"inout\"===n||\"`consume\"===n)&&!r.variable.maybeMergeCanWriteSuperset(i.canReadSubset))return!1}else{if(i.tag!==r.tag)return!1;if((\"out\"===n||\"inout\"===n)&&!Xe._writeConstraintsApply(r,i))return!1;if((\"in\"===n||\"inout\"===n)&&!Xe._readConstraintsApply(r,i))return!1}return!0}static _writeConstraintsApply(e,t){const n=t.canWriteSuperset;return null==n||null==e.canReadSubset||!!n.isMoreSpecificThan(e.canReadSubset)}static _readConstraintsApply(e,t){const n=t.canReadSubset;return null==n||null==e.canWriteSuperset||!!e.canWriteSuperset.isMoreSpecificThan(n)}static compareTypes(e,t){const n=e.type.resolvedType(),r=t.type.resolvedType(),[i,s]=De.unwrapPair(n,r);if(i instanceof We&&s.isTypeContainer())return!(i.variable.canReadSubset||i.variable.canWriteSuperset);if(s instanceof We&&i.isTypeContainer())return!(s.variable.canReadSubset||s.variable.canWriteSuperset);if(i instanceof We||s instanceof We)return De.canMergeConstraints(i,s);if(void 0===i!=(void 0===s))return!1;if(i===s)return!0;if(i.tag!==s.tag)return!1;if(i instanceof Ze)return!0;if(i instanceof Ke&&s instanceof Ke&&i.interfaceInfo.equals(s.interfaceInfo))return!0;if(!(i instanceof Ue&&s instanceof Ue))return!1;const o=i.entitySchema.isMoreSpecificThan(s.entitySchema),a=s.entitySchema.isMoreSpecificThan(i.entitySchema);if(a&&o)return!0;if(!a&&!o)return!1;const[l,c]=a?[e,t]:[t,e],h=l.direction||(l.connection?l.connection.direction:\"inout\"),u=c.direction||(c.connection?c.connection.direction:\"inout\");return\"in\"===h||\"out\"===u}}\n/**\n * @license\n * Copyright (c) 2017 Google Inc. All rights reserved.\n * This code may only be used under the BSD style license found at\n * http://polymer.github.io/LICENSE.txt\n * Code distributed by Google as part of this project is also\n * subject to an additional IP rights grant found at\n * http://polymer.github.io/PATENTS.txt\n */function Qe(e){return e instanceof De?e:De.fromLiteral(e)}function et(e){return e instanceof De?e.toLiteral():e}class tt{constructor(e,t){this.parentConnection=null,this.rawData=e,this.direction=e.direction,this.name=e.name,this.type=Qe(e.type).mergeTypeVariablesByName(t),this.isOptional=e.isOptional,this.tags=e.tags||[],this.dependentConnections=[]}instantiateDependentConnections(e,t){for(const n of this.rawData.dependentConnections){const r=e.createConnection(n,t);r.parentConnection=this,this.dependentConnections.push(r)}}get isInput(){return\"in\"===this.direction||\"inout\"===this.direction||\"host\"===this.direction}get isOutput(){return\"out\"===this.direction||\"inout\"===this.direction}isCompatibleType(e){return Xe.compareTypes({type:e},{type:this.type,direction:this.direction})}}class nt{constructor(e){this.name=e.name,this.isRequired=e.isRequired||!1,this.isSet=e.isSet||!1,this.tags=e.tags||[],this.formFactor=e.formFactor,this.handles=e.handles||[],this.provideSlotConnections=[],e.provideSlotConnections&&e.provideSlotConnections.forEach(e=>{this.provideSlotConnections.push(new rt(e))})}get isOptional(){return!this.isRequired}get direction(){return\"`consume\"}get type(){return Ze.make(this.formFactor,null)}get dependentConnections(){return this.provideSlotConnections}}class rt extends nt{}class it{constructor(e){this.model=e,this.name=e.name,this.verbs=e.verbs;const t=new Map;this.handleConnectionMap=new Map,e.args.forEach(e=>this.createConnection(e,t)),e.description=e.description||{},this.validateDescription(e.description),this.pattern=e.description.pattern,this.handleConnectionMap.forEach((t,n)=>{t.pattern=e.description[n]}),this.implFile=e.implFile,this.implBlobUrl=e.implBlobUrl,this.modality=pe.create(e.modality||[]),this.slotConnections=new Map,e.slotConnections&&e.slotConnections.forEach(e=>this.slotConnections.set(e.name,new nt(e))),this.slotConnections.forEach(e=>{e.provideSlotConnections.forEach(e=>{e.handles.forEach(e=>d()(this.handleConnectionMap.has(e),\"Cannot provide slot for nonexistent handle constraint \"+e))})})}createConnection(e,t){const n=new tt(e,t);return this.handleConnectionMap.set(n.name,n),n.instantiateDependentConnections(this,t),n}get handleConnections(){return this.connections}get connections(){return[...this.handleConnectionMap.values()]}get inputs(){return this.connections.filter(e=>e.isInput)}get outputs(){return this.connections.filter(e=>e.isOutput)}isInput(e){const t=this.handleConnectionMap.get(e);return t&&t.isInput}isOutput(e){const t=this.handleConnectionMap.get(e);return t&&t.isOutput}getConnectionByName(e){return this.handleConnectionMap.get(e)}getSlotSpec(e){return this.slotConnections.get(e)}get primaryVerb(){return this.verbs.length>0?this.verbs[0]:void 0}isCompatible(e){return 0===this.slotConnections.size||this.modality.intersection(e).isResolved()}setImplBlobUrl(e){this.model.implBlobUrl=this.implBlobUrl=e}toLiteral(){const{args:e,name:t,verbs:n,description:r,implFile:i,implBlobUrl:s,modality:o,slotConnections:a}=this.model,l=({type:e,direction:t,name:n,isOptional:r,dependentConnections:i})=>({type:et(e),direction:t,name:n,isOptional:r,dependentConnections:i.map(l)});return{args:e.map(e=>l(e)),name:t,verbs:n,description:r,implFile:i,implBlobUrl:s,modality:o,slotConnections:a}}static fromLiteral(e){let{args:t,name:n,verbs:r,description:i,implFile:s,implBlobUrl:o,modality:a,slotConnections:l}=e;const c=({type:e,direction:t,name:n,isOptional:r,dependentConnections:i})=>({type:Qe(e),direction:t,name:n,isOptional:r,dependentConnections:i?i.map(c):[]});return t=t.map(c),new it({args:t,name:n,verbs:r||[],description:i,implFile:s,implBlobUrl:o,modality:a,slotConnections:l})}clone(){return it.fromLiteral(this.toLiteral())}cloneWithResolutions(e){const t=this.clone();return this.handleConnectionMap.forEach((n,r)=>{t.handleConnectionMap.get(r).type=n.type._cloneWithResolutions(e)}),t}equals(e){return JSON.stringify(this.toLiteral())===JSON.stringify(e.toLiteral())}validateDescription(e){Object.keys(e||[]).forEach(e=>{d()([\"kind\",\"location\",\"pattern\"].includes(e)||this.handleConnectionMap.has(e),`Unexpected description for ${e}`)})}toInterface(){d()(!this.slotConnections.size,\"please implement slots toInterface\");const e=this.model.args.map(({type:e,name:t,direction:n})=>({type:Qe(e),name:t,direction:n}));return Ke.make(this.name,e,[])}toString(){const e=[];let t=\"\";this.verbs.length>0&&(t=\" \"+this.verbs.map(e=>`&${e}`).join(\" \")),e.push(`particle ${this.name}${t} in '${this.implFile}'`.trim());const n=(t,r)=>{const i=t.tags.map(e=>` #${e}`).join(\"\");e.push(`${r}${t.direction}${t.isOptional?\"?\":\"\"} ${t.type.toString()} ${t.name}${i}`);for(const e of t.dependentConnections)n(e,r+\"  \")};for(const e of this.handleConnections)e.parentConnection||n(e,\"  \");return this.modality.names.forEach(t=>e.push(`  modality ${t}`)),this.slotConnections.forEach(t=>{const n=[];t.isRequired&&n.push(\"must\"),n.push(\"consume\"),t.isSet&&n.push(\"set of\"),n.push(t.name),t.tags.length>0&&n.push(t.tags.map(e=>`#${e}`).join(\" \")),e.push(`  ${n.join(\" \")}`),t.formFactor&&e.push(`    formFactor ${t.formFactor}`),t.provideSlotConnections.forEach(t=>{const n=[];t.isRequired&&n.push(\"must\"),n.push(\"provide\"),t.isSet&&n.push(\"set of\"),n.push(t.name),t.tags.length>0&&n.push(t.tags.map(e=>`#${e}`).join(\" \")),e.push(`    ${n.join(\" \")}`),t.formFactor&&e.push(`      formFactor ${t.formFactor}`),t.handles.forEach(t=>e.push(`      handle ${t}`))})}),this.pattern&&(e.push(`  description \\`${this.pattern}\\``),this.handleConnectionMap.forEach(t=>{t.pattern&&e.push(`    ${t.name} \\`${t.pattern}\\``)})),e.join(\"\\n\")}toManifestString(){return this.toString()}}\n/**\n * @license\n * Copyright (c) 2018 Google Inc. All rights reserved.\n * This code may only be used under the BSD style license found at\n * http://polymer.github.io/LICENSE.txt\n * Code distributed by Google as part of this project is also\n * subject to an additional IP rights grant found at\n * http://polymer.github.io/PATENTS.txt\n */class st{}const ot=new class extends st{next(){return Math.random()}};class at{static next(){return ot.next()}}\n/**\n * @license\n * Copyright (c) 2017 Google Inc. All rights reserved.\n * This code may only be used under the BSD style license found at\n * http://polymer.github.io/LICENSE.txt\n * Code distributed by Google as part of this project is also\n * subject to an additional IP rights grant found at\n * http://polymer.github.io/PATENTS.txt\n */class lt{constructor(e){this._nextComponentId=0,this._currentSessionId=e}static newSession(){const e=Math.floor(at.next()*Math.pow(2,50))+\"\";return new lt(e)}static createWithSessionIdForTesting(e){return new lt(e)}newArcId(e){return ht._newArcIdInternal(this._currentSessionId,e)}newChildId(e,t=\"\"){return t+=this._nextComponentId++,ct._newIdInternal(this._currentSessionId,[...e.idTree,t])}get currentSessionIdForTesting(){return this._currentSessionId}}class ct{constructor(e,t=[]){this.idTree=[],this.root=e,this.idTree=t}static _newIdInternal(e,t=[]){return new ct(e,t)}static fromString(e){const t=e.split(\":\");if(t[0].startsWith(\"!\")){const e=t[0].slice(1),n=t.slice(1).filter(e=>e.length>0);return new ct(e,n)}return new ct(\"\",t)}toString(){return`!${this.root}:${this.idTree.join(\":\")}`}idTreeAsString(){return this.idTree.join(\":\")}equal(e){if(e.root!==this.root||e.idTree.length!==this.idTree.length)return!1;for(let t=0;t<e.idTree.length;t++)if(e.idTree[t]!==this.idTree[t])return!1;return!0}}class ht extends ct{static _newArcIdInternal(e,t){return new ht(e,[t])}static newForTest(e){return lt.newSession().newArcId(e)}}\n/** @license\n * Copyright (c) 2017 Google Inc. All rights reserved.\n * This code may only be used under the BSD style license found at\n * http://polymer.github.io/LICENSE.txt\n * Code distributed by Google as part of this project is also\n * subject to an additional IP rights grant found at\n * http://polymer.github.io/PATENTS.txt\n */function ut(e,t){d()(t,\"Handles need entity classes for deserialization\");const{id:n,rawData:r}=e,i=new t(r);return e.id&&i.identify(e.id),i}class dt{constructor(e,t,n,r,i,s){d()(!(e instanceof dt)),this.storage=e,this.idGenerator=t,this.name=n||this.storage.name,this.canRead=i,this.canWrite=s,this._particleId=r,this.options={keepSynced:!0,notifySync:!0,notifyUpdate:!0,notifyDesync:!1}}reportUserExceptionInHost(e,t,n){this.storage.reportExceptionInHost(new he(e,n,this._particleId,t.spec.name))}reportSystemExceptionInHost(e,t){this.storage.reportExceptionInHost(new ce(e,t,this._particleId))}configure(e){d()(this.canRead,\"configure can only be called on readable Handles\");try{const t=Object.keys(this.options),n=Object.keys(e).filter(e=>!t.includes(e));if(n.length>0)throw new Error(`Invalid option in Handle.configure(): ${n}`);Object.assign(this.options,e)}catch(e){throw this.reportSystemExceptionInHost(e,\"Handle::configure\"),e}}_serialize(e){return d()(e,\"can't serialize a null entity\"),e instanceof Ae&&(e.isIdentified()||e.createIdentity(ct.fromString(this._id),this.idGenerator)),e.serialize()}get type(){return this.storage.type}get _id(){return this.storage.id}toManifestString(){return`'${this._id}'`}generateKey(){return this.idGenerator.newChildId(ct.fromString(this._id),\"key\").toString()}}class ft extends dt{_notify(e,t,n){switch(d()(this.canRead,\"_notify should not be called for non-readable handles\"),e){case\"sync\":try{t.onHandleSync(this,this._restore(n))}catch(e){this.reportUserExceptionInHost(e,t,\"onHandleSync\")}return;case\"update\":{const e={};return\"add\"in n&&(e.added=this._restore(n.add)),\"remove\"in n&&(e.removed=this._restore(n.remove)),e.originator=n.originatorId===this._particleId,void t.onHandleUpdate(this,e)}case\"desync\":return void t.onHandleDesync(this);default:throw new Error(\"unsupported\")}}async get(e){if(!this.canRead)throw new Error(\"Handle not readable\");return this._restore([await this.storage.get(e)])[0]}async toList(){if(!this.canRead)throw new Error(\"Handle not readable\");return this._restore(await this.storage.toList())}_restore(e){return null!==e?e.map(e=>ut(e,this.entityClass)):null}async store(e){if(!this.canWrite)throw new Error(\"Handle not writeable\");const t=this._serialize(e),n=[this.generateKey()];return this.storage.store(t,n,this._particleId)}async clear(){if(!this.canWrite)throw new Error(\"Handle not writeable\");if(this.storage.clear)return this.storage.clear(this._particleId);throw new Error(\"clear not implemented by storage\")}async remove(e){if(!this.canWrite)throw new Error(\"Handle not writeable\");const t=this._serialize(e);this.storage.remove(t.id,[],this._particleId)}}class pt extends dt{async _notify(e,t,n){switch(d()(this.canRead,\"_notify should not be called for non-readable handles\"),e){case\"sync\":try{await t.onHandleSync(this,this._restore(n))}catch(e){this.reportUserExceptionInHost(e,t,\"onHandleSync\")}return;case\"update\":try{const e=this._restore(n.data),r=this._restore(n.oldData);await t.onHandleUpdate(this,{data:e,oldData:r})}catch(e){this.reportUserExceptionInHost(e,t,\"onHandleUpdate\")}return;case\"desync\":try{await t.onHandleDesync(this)}catch(e){this.reportUserExceptionInHost(e,t,\"onHandleDesync\")}return;default:throw new Error(\"unsupported\")}}async get(){if(!this.canRead)throw new Error(\"Handle not readable\");const e=await this.storage.get();return this._restore(e)}_restore(e){if(null==e)return null;if(this.type instanceof Ue)return ut(e,this.entityClass);if(this.type instanceof Ke)return it.fromLiteral(e);if(this.type instanceof Je)return new Ee(e,this.type,this.storage.pec);throw new Error(`Don't know how to deliver handle data of type ${this.type}`)}async set(e){try{if(!this.canWrite)throw new Error(\"Handle not writeable\");const t=this._serialize(e);return this.storage.set(t,this._particleId)}catch(e){throw this.reportSystemExceptionInHost(e,\"Handle::set\"),e}}async clear(){if(!this.canWrite)throw new Error(\"Handle not writeable\");return this.storage.clear(this._particleId)}}class mt{constructor(e,t){this._parent=e,this._cursorId=t}async next(){const e=await this._parent.storage.cursorNext(this._cursorId);return e.done||(e.value=e.value.map(e=>ut(e,this._parent.entityClass))),e}close(){this._parent.storage.cursorClose(this._cursorId)}}class gt extends dt{configure(e){throw new Error(\"BigCollections do not support sync/update configuration\")}async _notify(e,t,n){d()(this.canRead,\"_notify should not be called for non-readable handles\"),d()(\"sync\"===e,\"BigCollection._notify only supports sync events\"),await t.onHandleSync(this,[])}async store(e){if(!this.canWrite)throw new Error(\"Handle not writeable\");const t=this._serialize(e),n=[this.generateKey()];return this.storage.store(t,n,this._particleId)}async remove(e){if(!this.canWrite)throw new Error(\"Handle not writeable\");const t=this._serialize(e);this.storage.remove(t.id,[],this._particleId)}async stream({pageSize:e,forward:t=!0}){if(!this.canRead)throw new Error(\"Handle not readable\");if(isNaN(e)||e<1)throw new Error(\"Streamed reads require a positive pageSize\");const n=await this.storage.stream(e,t);return new mt(this,n)}}class yt{constructor(){this.relevances=[],this._idle=Promise.resolve(),this._busy=0,this.slotProxiesByName=new Map,this.spec=this.constructor.spec,0===this.spec.inputs.length&&(this.extraData=!0)}setCapabilities(e){if(this.capabilities)throw new Error(\"capabilities should only be set once\");this.capabilities=e||{}}async setHandles(e){}onHandleSync(e,t){}async onHandleUpdate(e,t){}async onHandleDesync(e){}async constructInnerArc(){if(!this.capabilities.constructInnerArc)throw new Error(\"This particle is not allowed to construct inner arcs\");return this.capabilities.constructInnerArc(this)}get busy(){return this._busy>0}get idle(){return this._idle}set relevance(e){this.relevances.push(e)}startBusy(){0===this._busy&&(this._idle=new Promise(e=>this._idleResolver=e)),this._busy++}doneBusy(){this._busy--,0===this._busy&&this._idleResolver()}inputs(){return this.spec.inputs}outputs(){return this.spec.outputs}hasSlotProxy(e){return this.slotProxiesByName.has(e)}addSlotProxy(e){this.slotProxiesByName.set(e.slotName,e)}removeSlotProxy(e){this.slotProxiesByName.delete(e)}async service(e){return this.capabilities.serviceRequest?new Promise(t=>{this.capabilities.serviceRequest(this,e,e=>t(e))}):(console.warn(`${this.spec.name} has no service support.`),null)}getSlot(e){return this.slotProxiesByName.get(e)}static buildManifest(e,...t){const n=[];for(let r=0;r<t.length;r++){const i=e[r],s=/ *$/.exec(i)[0];let o;o=(o=\"string\"==typeof t[r]?t[r]:t[r].toManifestString()).replace(/(\\n)/g,\"$1\"+s),n.push(i),n.push(o)}return e.length>t.length&&n.push(e[e.length-1]),n.join(\"\")}setParticleDescription(e){return this.setDescriptionPattern(\"pattern\",e)}setDescriptionPattern(e,t){const n=this.handles.get(\"descriptions\");if(n){const r=n.entityClass;return(n instanceof ft||n instanceof gt)&&n.store(new r({key:e,value:t},this.spec.name+\"-\"+e)),!0}throw new Error(\"A particle needs a description handle to set a decription pattern\")}renderSlot(e,t){}renderHostedSlot(e,t,n){}fireEvent(e,t){}}\n/**\n * @license\n * Copyright (c) 2017 Google Inc. All rights reserved.\n * This code may only be used under the BSD style license found at\n * http://polymer.github.io/LICENSE.txt\n * Code distributed by Google as part of this project is also\n * subject to an additional IP rights grant found at\n * http://polymer.github.io/PATENTS.txt\n */class _t extends yt{get template(){return\"\"}getTemplate(e){return this.template}getTemplateName(e){return\"default\"}shouldRender(e){return!0}render(e){return{}}renderSlot(e,t){const n=this._getStateArgs(),r=this.getSlot(e);if(r){if(this.currentSlotName=e,t.forEach(e=>r.requestedContentTypes.add(e)),this.shouldRender(...n)){const e={};if(r.requestedContentTypes.has(\"template\")&&(e.template=this.getTemplate(r.slotName)),r.requestedContentTypes.has(\"model\")&&(e.model=this.render(...n)),e.templateName=this.getTemplateName(r.slotName),r.providedSlots.size>0&&(e.template&&(\"string\"==typeof e.template?e.template=this.slotNamesToModelReferences(r,e.template):e.template=Object.entries(e.template).reduce((e,[t,n])=>(e[t]=this.slotNamesToModelReferences(r,n),e),{})),e.model)){const t={};r.providedSlots.forEach((e,n)=>t[`$${n}`]=e),e.model=this.enhanceModelWithSlotIDs(e.model,t)}r.render(e)}else r.isRendered&&r.render({});this.currentSlotName=void 0}}slotNamesToModelReferences(e,t){return e.providedSlots.forEach((e,n)=>{t=t.replace(new RegExp(`slotid=\"${n}\"`,\"gi\"),`slotname=\"${n}\" slotid$=\"{{$${n}}}\"`)}),t}enhanceModelWithSlotIDs(e,t,n=!0){n&&(e={...t,...e}),e.hasOwnProperty(\"$template\")&&e.hasOwnProperty(\"models\")&&Array.isArray(e.models)&&(e.models=e.models.map(e=>this.enhanceModelWithSlotIDs(e,t)));for(const[n,r]of Object.entries(e))r&&\"object\"==typeof r&&(e[n]=this.enhanceModelWithSlotIDs(r,t,!1));return e}_getStateArgs(){return[]}forceRenderTemplate(e=\"\"){this.slotProxiesByName.forEach((t,n)=>{e&&n!==e||t.requestedContentTypes.add(\"template\")})}fireEvent(e,{handler:t,data:n}){this[t]&&this[t]({data:n})}setParticleDescription(e){if(\"string\"==typeof e)return super.setParticleDescription(e);if(e.template&&e.model)return super.setDescriptionPattern(\"_template_\",e.template),void super.setDescriptionPattern(\"_model_\",JSON.stringify(e.model));throw new Error(\"Description pattern must either be string or have template and model\")}async clearHandle(e){const t=this.handles.get(e);if(!(t instanceof pt||t instanceof ft))throw new Error(\"Variable/Collection required\");t.clear()}async mergeEntitiesToHandle(e,t){const n={},r=this.handles.get(e);if(!(r instanceof ft))throw new Error(\"Collection required\");(await r.toList()).forEach(e=>n[e.id]=e);for(const e of t)n[e.id]||r.store(e)}async appendEntitiesToHandle(e,t){const n=this.handles.get(e);if(n){if(!(n instanceof ft||n instanceof gt))throw new Error(\"Collection required\");Promise.all(t.map(e=>n.store(e)))}}async appendRawDataToHandle(e,t){const n=this.handles.get(e);if(n&&n.entityClass){if(!(n instanceof ft||n instanceof gt))throw new Error(\"Collection required\");{const e=n.entityClass;Promise.all(t.map(t=>n.store(new e(t))))}}}updateVariable(e,t){const n=this.handles.get(e);if(n&&n.entityClass){if(n instanceof pt){const e=new(0,n.entityClass)(t);return n.set(e),e}throw new Error(\"Variable required\")}}async updateSet(e,t){const n=this.handles.get(e);if(n){if(!(n instanceof ft||n instanceof gt))throw new Error(\"Collection required\");await n.remove(t),await n.store(t)}}boxQuery(e,t){return e&&e.filter(e=>t===e.getUserID().split(\"|\")[0])}}\n/**\n * @license\n * Copyright (c) 2017 Google Inc. All rights reserved.\n * This code may only be used under the BSD style license found at\n * http://polymer.github.io/LICENSE.txt\n * Code distributed by Google as part of this project is also\n * subject to an additional IP rights grant found at\n * http://polymer.github.io/PATENTS.txt\n */class bt extends(ae(_t)){constructor(){super()}willReceiveProps(...e){}update(...e){}shouldRender(...e){return!0}render(...e){return{}}setState(e){return this._setState(e)}get state(){return this._state}set state(e){this.setState(e)}get props(){return this._props}configureHandles(e){}get config(){return{handleNames:this.spec.inputs.map(e=>e.name),slotNames:[...this.spec.slotConnections.values()].map(e=>e.name)}}_willReceiveProps(...e){this.willReceiveProps(...e)}_update(...e){this.update(...e),this.shouldRender(...e)&&(this.relevance=1),this.config.slotNames.forEach(e=>this.renderSlot(e,[\"model\"]))}get _views(){return console.warn(`Particle ${this.spec.name} uses deprecated _views getter.`),this.handles}async setHandles(e){this.configureHandles(e),this.handles=e,this._handlesToSync=new Set;for(const t of this.config.handleNames){const n=e.get(t);n&&n.options.keepSynced&&n.options.notifySync&&this._handlesToSync.add(t)}this._handlesToSync.size||this._invalidate()}async onHandleSync(e,t){this._handlesToSync.delete(e.name),0===this._handlesToSync.size&&await this._handlesToProps()}async onHandleUpdate(e,t){this._debounce(\"handleUpdateDebounce\",()=>{this._handlesToProps()},300)}async _handlesToProps(){const e=Object.create(null),{handleNames:t}=this.config;await Promise.all(t.map(t=>this._addNamedHandleData(e,t))),this._setProps(e)}async _addNamedHandleData(e,t){const n=this.handles.get(t);n&&(e[t]=await this._getHandleData(n))}async _getHandleData(e){return e instanceof ft?await e.toList():e instanceof pt?await e.get():e}fireEvent(e,{handler:t,data:n}){this[t]&&this[t]({data:n},this._state)}_debounce(e,t,n){const r=`_debounce_${e}`;this._state[r]||this.startBusy();super._debounce(e,()=>{this.doneBusy(),t(),this._state[r]=null},n)}}\n/**\n * @license\n * Copyright (c) 2017 Google Inc. All rights reserved.\n * This code may only be used under the BSD style license found at\n * http://polymer.github.io/LICENSE.txt\n * Code distributed by Google as part of this project is also\n * subject to an additional IP rights grant found at\n * http://polymer.github.io/PATENTS.txt\n */class vt extends bt{getTemplate(e){return this._state.template}getTemplateName(e){return this._state.templateName}render(e,t){return t.renderModel}shouldRender(e,t){return Boolean((t.template||t.templateName)&&t.renderModel)}renderHostedSlot(e,t,n){this.combineHostedTemplate(e,t,n),this.combineHostedModel(e,t,n)}combineHostedTemplate(e,t,n){}combineHostedModel(e,t,n){}static propsToItems(e){return e?e.map(({rawData:e,id:t})=>({...e,subId:t})):[]}}\n/**\n * @license\n * Copyright (c) 2017 Google Inc. All rights reserved.\n * This code may only be used under the BSD style license found at\n * http://polymer.github.io/LICENSE.txt\n * Code distributed by Google as part of this project is also\n * subject to an additional IP rights grant found at\n * http://polymer.github.io/PATENTS.txt\n */class wt extends vt{constructor(){super(...arguments),this._itemSubIdByHostedSlotId=new Map,this._connByHostedConn=new Map}async _mapParticleConnections(e,t,n,r,i){const s=[],o=[];let a=2;const l=[e,t];for(const[e,t]of r){if(l.includes(e))continue;const r=t.storage;s.push(`use '${await i.mapHandle(r)}' as v${a}`);const c=n.handleConnections.find(e=>e.isCompatibleType(t.type));c&&(o.push(`${c.name} = v${a++}`),this._connByHostedConn.set(c.name,e))}return[s,o]}async setHandles(e){this.handleIds={};const t=await this.constructInnerArc(),n=e.get(\"hostedParticle\");let r=null,i=[],s=[];n&&(r=await n.get())&&([i,s]=await this._mapParticleConnections(\"list\",\"hostedParticle\",r,e,t)),this.setState({arc:t,type:e.get(\"list\").type,hostedParticle:r,otherMappedHandles:i,otherConnections:s}),await super.setHandles(e)}async willReceiveProps({list:e},{arc:t,type:n,hostedParticle:r,otherMappedHandles:i,otherConnections:s}){e.length>0&&(this.relevance=.1);for(const[o,a]of this.getListEntries(e)){let e=r;if(this.handleIds[a.id]){(await this.handleIds[a.id]).set(a);continue}const l=t.createHandle(n.getContainedType(),`item${o}`);this.handleIds[a.id]=l;const c=await l;if(!e){if(!a.renderParticleSpec)continue;e=it.fromLiteral(JSON.parse(a.renderParticleSpec));const n=\"list\",r=\"renderParticle\";[i,s]=await this._mapParticleConnections(n,r,e,this.handles,t)}const h=[...e.slotConnections.keys()][0],u=[...this.spec.slotConnections.values()][0].name,d=await t.createSlot(this,u,c._id);if(d){this._itemSubIdByHostedSlotId.set(d,a.id);try{const n=this.constructInnerRecipe(e,a,c,{name:h,id:d},{connections:s,handles:i});await t.loadRecipe(n),c.set(a)}catch(e){console.log(e)}}}}combineHostedModel(e,t,n){const r=this._itemSubIdByHostedSlotId.get(t);if(!r)return;const i=this._state.renderModel?this._state.renderModel.items:[],s=i.findIndex(e=>e.subId===r),o={...n.model,subId:r};s>=0&&s<i.length?i[s]=o:i.push(o),this._setState({renderModel:{items:i}})}combineHostedTemplate(e,t,n){const r=this._itemSubIdByHostedSlotId.get(t);if(!r)return;d()(n.templateName,`Template name is missing for slot '${e}' (hosted slot ID: '${t}')`);const i={...this._state.templateName,[r]:`${n.templateName}`};if(this._setState({templateName:i}),n.template){let e=n.template;e=e.replace(new RegExp('slotid=\"[a-z]+\"',\"gi\"),'$& subid$=\"{{subId}}\"'),this._connByHostedConn.forEach((t,n)=>{e=e.replace(new RegExp(`{{${n}.description}}`,\"g\"),`{{${t}.description}}`)}),this._setState({template:{...this._state.template,[n.templateName]:e}}),this.forceRenderTemplate()}}getListEntries(e){return e.entries()}}\n/**\n * @license\n * Copyright (c) 2017 Google Inc. All rights reserved.\n * This code may only be used under the BSD style license found at\n * http://polymer.github.io/LICENSE.txt\n * Code distributed by Google as part of this project is also\n * subject to an additional IP rights grant found at\n * http://polymer.github.io/PATENTS.txt\n */const St=(e,...t)=>(e[0]+t.map((t,n)=>t+e[n+1]).join(\"\")).trim();class kt{path(e){return e.replace(/[\\/][^\\/]+$/,\"/\")}join(e,t){return/^https?:\\/\\//.test(t)?t:\"/\"===t[0]||\":\"===t[1]?t:(e=this.path(e),t=this.normalizeDots(`${e}${t}`))}normalizeDots(e){const t=e=>e.replace(/(?:^|\\/)[^.\\/]*\\/\\.\\./g,\"\");for(let n=t(e=(e=e.replace(/\\\\/g,\"/\")).replace(/\\/\\.\\//g,\"/\"));n!==e;n=t(e=n));return e=e.replace(/([^:])(\\/\\/)/g,\"$1/\")}async loadResource(e){return/^https?:\\/\\//.test(e)?this._loadURL(e):this._loadFile(e,\"utf-8\")}async loadBinary(e){return/^https?:\\/\\//.test(e)?te(e).then(e=>e.arrayBuffer()):this._loadFile(e,null)}async _loadFile(e,t){return new Promise((n,r)=>{o.a.readFile(e,{encoding:t},(e,i)=>{e?r(e):n(t?i:i.buffer)})})}async _loadURL(e){return/\\/\\/schema.org\\//.test(e)?e.endsWith(\"/Thing\")?te(\"https://schema.org/Product.jsonld\").then(e=>e.text()).then(e=>se.convert(e,{\"@id\":\"schema:Thing\"})):te(e+\".jsonld\").then(e=>e.text()).then(e=>se.convert(e)):te(e).then(e=>e.text())}async loadParticleClass(e){const t=await this.requireParticle(e.implFile);return t.spec=e,t}async requireParticle(e){null===e&&(e=\"\");const t=await this.loadResource(e),n=new re.a.Script(t,{filename:e,displayErrors:!0}),r=[],i={defineParticle(e){r.push(e)},console:console,fetch:te,setTimeout:setTimeout,importScripts:e=>null};return n.runInNewContext(i,{filename:e,displayErrors:!0}),d()(r.length>0&&\"function\"==typeof r[0],`Error while instantiating particle implementation from ${e}`),this.unwrapParticle(r[0])}setParticleExecutionContext(e){this.pec=e}unwrapParticle(e){return d()(this.pec),e({Particle:yt,DomParticle:bt,TransformationDomParticle:vt,MultiplexerDomParticle:wt,Reference:Re.newClientReference(this.pec),html:St})}}class Ct extends Error{static buildMessage(e,t){function n(e){return e.charCodeAt(0).toString(16).toUpperCase()}function r(e){return e.replace(/\\\\/g,\"\\\\\\\\\").replace(/\"/g,'\\\\\"').replace(/\\0/g,\"\\\\0\").replace(/\\t/g,\"\\\\t\").replace(/\\n/g,\"\\\\n\").replace(/\\r/g,\"\\\\r\").replace(/[\\x00-\\x0F]/g,e=>\"\\\\x0\"+n(e)).replace(/[\\x10-\\x1F\\x7F-\\x9F]/g,e=>\"\\\\x\"+n(e))}function i(e){return e.replace(/\\\\/g,\"\\\\\\\\\").replace(/\\]/g,\"\\\\]\").replace(/\\^/g,\"\\\\^\").replace(/-/g,\"\\\\-\").replace(/\\0/g,\"\\\\0\").replace(/\\t/g,\"\\\\t\").replace(/\\n/g,\"\\\\n\").replace(/\\r/g,\"\\\\r\").replace(/[\\x00-\\x0F]/g,e=>\"\\\\x0\"+n(e)).replace(/[\\x10-\\x1F\\x7F-\\x9F]/g,e=>\"\\\\x\"+n(e))}function s(e){switch(e.type){case\"literal\":return'\"'+r(e.text)+'\"';case\"class\":const t=e.parts.map(e=>Array.isArray(e)?i(e[0])+\"-\"+i(e[1]):i(e));return\"[\"+(e.inverted?\"^\":\"\")+t+\"]\";case\"any\":return\"any character\";case\"end\":return\"end of input\";case\"other\":return e.description}}return\"Expected \"+function(e){const t=e.map(s);let n,r;if(t.sort(),t.length>0){for(n=1,r=1;n<t.length;n++)t[n-1]!==t[n]&&(t[r]=t[n],r++);t.length=r}switch(t.length){case 1:return t[0];case 2:return t[0]+\" or \"+t[1];default:return t.slice(0,-1).join(\", \")+\", or \"+t[t.length-1]}}(e)+\" but \"+((o=t)?'\"'+r(o)+'\"':\"end of input\")+\" found.\";var o}constructor(e,t,n,r){super(),this.message=e,this.expected=t,this.found=n,this.location=r,this.name=\"SyntaxError\",\"function\"==typeof Error.captureStackTrace&&Error.captureStackTrace(this,Ct)}}const Tt=function(e,t){t=void 0!==t?t:{};const n={},r={Manifest:ss};let i=ss;const s=function(e){const t=e.map(e=>{const t=e[2];return t.annotation=lo(e[0],e=>e[1],null),t});return function e(t){if(![\"string\",\"number\",\"boolean\"].includes(typeof t)&&null!==t){if(void 0===t)throw new Ct(\"result was undefined\",[],\"\",Yi());if(Array.isArray(t))for(const n of t)e(n);else{if(t.model)throw new Ct(`unexpected 'model' in ${JSON.stringify(t)}`,[],\"\",Yi());if(!t.location)throw new Ct(`no 'location' in ${JSON.stringify(t)}`,[],\"\",Yi());if(!t.kind)throw new Ct(`no 'kind' in ${JSON.stringify(t)}`,[],\"\",Yi());for(const n of Object.keys(t))[\"location\",\"kind\"].includes(n)||e(t[n])}}}(t),t},o=es(\"an annotation (e.g. @foo)\"),a=\"@\",l=Xi(\"@\",!1),c=function(e){return e},h=\"resource\",u=Xi(\"resource\",!1),d=function(e,t){return{kind:\"resource\",name:e,data:t,location:Yi()}},f=\"start\",p=Xi(\"start\",!1),m=function(){io=ro},g=function(e){return e.map(e=>e[0].substring(io.length)+e[1]).join(\"\")},y=/^[^\\n]/,_=Qi([\"\\n\"],!0,!1),b=function(){return Ji()},v=\"store\",w=Xi(\"store\",!1),S=\"of\",k=Xi(\"of\",!1),C=\"!!\",T=Xi(\"!!\",!1),x=function(e,t,n,r,i,s,o,a){return a=lo(a,ao,[]),{kind:\"store\",location:Yi(),name:e,type:t,id:lo(n,e=>e[1],null),originalId:lo(r,e=>e[1],null),version:lo(i,e=>e[1],null),tags:lo(s,e=>e[1],null),source:o.source,origin:o.origin,description:a.length>0?a[0][2]:null}},E=\"in\",R=Xi(\"in\",!1),A=function(e){return{origin:\"file\",source:e}},I=function(e){return{origin:\"resource\",source:e}},O=\"at\",$=Xi(\"at\",!1),N=function(e){return{origin:\"storage\",source:e}},B=\"description\",j=Xi(\"description\",!1),P=\"import\",z=Xi(\"import\",!1),M=function(e){return{kind:\"import\",location:Yi(),path:e}},F=es(\"an interface\"),L=\"interface\",D=Xi(\"interface\",!1),U=\"<\",W=Xi(\"<\",!1),H=\">\",q=Xi(\">\",!1),V=function(e,t,n){return{kind:\"interface\",location:Yi(),name:e,args:lo(n,ao,[]).filter(e=>\"interface-argument\"===e.kind),slots:lo(n,ao,[]).filter(e=>\"interface-slot\"===e.kind)}},K=\"*\",Z=Xi(\"*\",!1),J=function(e,t,n){return\"host\"===(e=lo(e,e=>e[0],null))&&Gi(\"Interface cannot have arguments with a 'host' direction.\"),{kind:\"interface-argument\",location:Yi(),direction:e,type:lo(t,e=>e[0],null),name:n}},Y=\"must\",G=Xi(\"must\",!1),X=\"consume\",Q=Xi(\"consume\",!1),ee=\"provide\",te=Xi(\"provide\",!1),ne=\"set of\",re=Xi(\"set of\",!1),ie=function(e,t,n,r){return{kind:\"interface-slot\",location:Yi(),name:lo(r,e=>r[1],null),isRequired:lo(e,e=>\"must\"===e[0],!1),direction:t,isSet:!!n}},se=\"meta\",oe=Xi(\"meta\",!1),ae=function(e){return{kind:\"meta\",items:e=e?ao(e):[],location:Yi()}},le=\"name\",ce=Xi(\"name\",!1),he=\":\",ue=Xi(\":\",!1),de=function(e){return{key:\"name\",value:e,location:Yi(),kind:\"name\"}},fe=\"storageKey\",pe=Xi(\"storageKey\",!1),me=function(e){return{key:\"storageKey\",value:e,location:Yi(),kind:\"storageKey\"}},ge=\"particle\",ye=Xi(\"particle\",!1),_e=function(e,t,n,r){let i=[];const s=[],o=[];let a=null,l=!1;return t=lo(t,e=>e[1],[]),(r=lo(r,ao,[])).forEach(n=>{\"particle-interface\"===n.kind?(/[A-Z]/.test(n.verb[0])&&n.verb!==e&&Gi(`Verb ${n.verb} must start with a lower case character or be same as particle name.`),t.push(n.verb),i=n.args,l=!0):\"particle-argument\"===n.kind?i.push(n):\"particle-slot\"===n.kind?o.push(n):\"description\"===n.kind?(a={kind:\"description\",location:Yi()},n.description.forEach(e=>a[e.name]=e.pattern||e.patterns[0])):n.modality?s.push(n.modality):Gi(`Particle ${e} contains an unknown element: ${n.name}`)}),0===s.length&&s.push(\"dom\"),{kind:\"particle\",location:Yi(),name:e,implFile:lo(n,e=>e[3],null),verbs:t,args:i,modality:s,slotConnections:o,description:a,hasParticleArgument:l}},be=es(\"a particle item\"),ve=function(e,t){return t=lo(t,ao,[]),e.dependentConnections=t,e},we=\"?\",Se=Xi(\"?\",!1),ke=function(e,t,n,r){return{kind:\"particle-argument\",location:Yi(),direction:e,type:n,isOptional:!!t,dependentConnections:[],name:r.name,tags:r.tags}},Ce=es(\"a direction (e.g. inout, in, out, host, `consume, `provide)\"),Te=\"inout\",xe=Xi(\"inout\",!1),Ee=\"out\",Re=Xi(\"out\",!1),Ae=\"host\",Ie=Xi(\"host\",!1),Oe=\"`consume\",$e=Xi(\"`consume\",!1),Ne=\"`provide\",Be=Xi(\"`provide\",!1),je=function(){return Ji()},Pe=\"[\",ze=Xi(\"[\",!1),Me=\"]\",Fe=Xi(\"]\",!1),Le=function(e){return{kind:\"collection-type\",location:Yi(),type:e}},De=\"BigCollection<\",Ue=Xi(\"BigCollection<\",!1),We=function(e){return{kind:\"big-collection-type\",location:Yi(),type:e}},He=\"Reference<\",qe=Xi(\"Reference<\",!1),Ve=function(e){return{kind:\"reference-type\",location:Yi(),type:e}},Ke=es(\"a type variable (e.g. ~foo)\"),Ze=\"~\",Je=Xi(\"~\",!1),Ye=\"with\",Ge=Xi(\"with\",!1),Xe=function(e,t){return{kind:\"variable-type\",location:Yi(),name:e,constraint:lo(t,e=>e[3],null)}},Qe=\"Slot\",et=Xi(\"Slot\",!1),tt=/^[^a-z0-9_]/i,nt=Qi([[\"a\",\"z\"],[\"0\",\"9\"],\"_\"],!0,!0),rt=\"{\",it=Xi(\"{\",!1),st=\",\",ot=Xi(\",\",!1),at=\"}\",lt=Xi(\"}\",!1),ct=function(e){return e=lo(e,e=>{const t=e[2];return[t[0]].concat(t[1].map(e=>e[2]))},[]),{kind:\"slot-type\",location:Yi(),fields:e}},ht=function(e,t){return{kind:\"slot-field\",location:Yi(),name:e,value:t}},ut=function(e){return{kind:\"type-name\",location:Yi(),name:e}},dt=function(e,t){return[e,...t.map(e=>e[2])]},ft=\"modality\",pt=Xi(\"modality\",!1),mt=function(e){return{kind:\"particle-modality\",location:Yi(),modality:e}},gt=\"dom-touch\",yt=Xi(\"dom-touch\",!1),_t=\"dom\",bt=Xi(\"dom\",!1),vt=\"vr\",wt=Xi(\"vr\",!1),St=\"voice\",kt=Xi(\"voice\",!1),Tt=\"mock-dom-touch\",xt=Xi(\"mock-dom-touch\",!1),Et=\"mock-dom\",Rt=Xi(\"mock-dom\",!1),At=\"mock-vr\",It=Xi(\"mock-vr\",!1),Ot=\"mock-voice\",$t=Xi(\"mock-voice\",!1),Nt=function(e,t,n,r,i){let s=null;const o=[];return(i=lo(i,ao,[])).forEach(e=>{\"provided-slot\"===e.kind?o.push(e):\"form-factor\"===e.kind?(s&&Gi(\"duplicate form factor for a slot\"),s=e.formFactor):Gi(\"Unsupported particle slot item \",e)}),{kind:\"particle-slot\",location:Yi(),name:n,tags:lo(r,e=>e[1],[]),isRequired:lo(e,e=>\"must\"===e[0],!1),isSet:!!t,formFactor:s,provideSlotConnections:o}},Bt=\"formFactor\",jt=Xi(\"formFactor\",!1),Pt=\"fullscreen\",zt=Xi(\"fullscreen\",!1),Mt=\"big\",Ft=Xi(\"big\",!1),Lt=\"medium\",Dt=Xi(\"medium\",!1),Ut=\"small\",Wt=Xi(\"small\",!1),Ht=function(e){return{kind:\"form-factor\",location:Yi(),formFactor:e}},qt=function(e,t,n,r,i){let s=null;const o=[];return(i=i?ao(i):[]).forEach(e=>{\"form-factor\"===e.kind?(s&&Gi(\"duplicate form factor for a slot\"),s=e.formFactor):o.push(e.handle)}),{kind:\"provided-slot\",location:Yi(),name:n,tags:lo(r,e=>e[1],[]),isRequired:lo(e,e=>\"must\"===e[0],!1),isSet:!!t,formFactor:s,handles:o}},Vt=\"handle\",Kt=Xi(\"handle\",!1),Zt=function(e){return{kind:\"particle-provided-slot-handle\",location:Yi(),handle:e}},Jt=function(e,t){t=lo(t,ao,[]);const n=[];return e&&n.push(e),t.filter(e=>\"pattern\"===e.name).forEach(e=>n.push(e)),t=t.filter(e=>\"pattern\"!==e.name),{kind:\"description\",location:Yi(),description:[{kind:\"default-description?\",location:Yi(),name:\"pattern\",patterns:n},...t]}},Yt=function(e,t){return{kind:\"handle-description\",location:Yi(),name:e,pattern:t}},Gt=\"recipe\",Xt=Xi(\"recipe\",!1),Qt=function(e,t,n){return t=lo(t,e=>e[1],[]),{kind:\"recipe\",location:Yi(),name:lo(e,e=>e[1],null),verbs:t,items:lo(n,ao,[])}},en=\"as\",tn=Xi(\"as\",!1),nn=function(e){return e},rn=function(e,t,n){const r=[],i=[];if(n){n=ao(n);for(const e of n)\"handle-connection\"===e.kind?r.push(e):i.push(e)}return{kind:\"particle\",location:Yi(),name:lo(t,e=>e[1],null),ref:e,connections:r,slotConnections:i}},sn=function(e,t,n,r){return{kind:\"handle-connection\",location:Yi(),param:e,dir:t,target:lo(n,e=>e[1],null),dependentConnections:lo(r,ao,[])}},on=function(e,t){let n=null,r=null;return(e=lo(e,e=>e,null))&&(e[0].toUpperCase()===e[0]?r=e:n=e),{kind:\"handle-connection-components\",location:Yi(),name:n,particle:r,tags:lo(t,e=>e,[])}},an=function(e,t,n,r){return{kind:\"slot-connection\",location:Yi(),direction:e,param:t.param,tags:t.tags,name:lo(n,e=>e[1],null),dependentSlotConnections:lo(r,ao,[])}},ln=function(e,t){return{kind:\"slot-connection-ref\",location:Yi(),param:e,tags:t}},cn=function(e,t,n){return{kind:\"connection\",location:Yi(),direction:t,from:e,to:n}},hn=\"search\",un=Xi(\"search\",!1),dn=\"tokens\",fn=Xi(\"tokens\",!1),pn=function(e,t){return{kind:\"search\",location:Yi(),phrase:e,tokens:lo(t,e=>e[1][2].map(e=>e[1]),null)}},mn=\"<-\",gn=Xi(\"<-\",!1),yn=\"->\",_n=Xi(\"->\",!1),bn=\"=\",vn=Xi(\"=\",!1),wn=function(e,t){const{param:n,tags:r}=lo(t,e=>e,{param:null,tags:[]});return{kind:\"connection-target\",location:Yi(),targetType:\"verb\",verbs:e,param:n,tags:r}},Sn=function(e){return{kind:\"connection-target\",location:Yi(),targetType:\"tag\",tags:e}},kn=function(e,t){const{param:n,tags:r}=lo(t,e=>e,{param:null,tags:[]});return{kind:\"connection-target\",targetType:\"localName\",location:Yi(),name:e,param:n,tags:r}},Cn=function(e,t){const{param:n,tags:r}=lo(t,e=>e,{param:null,tags:[]});return{kind:\"connection-target\",targetType:\"particle\",location:Yi(),particle:e,param:n,tags:r}},Tn=\".\",xn=Xi(\".\",!1),En=function(e,t){return{param:lo(e,e=>e,null),tags:lo(t,e=>e[1],[])}},Rn=\"use\",An=Xi(\"use\",!1),In=\"map\",On=Xi(\"map\",!1),$n=\"create\",Nn=Xi(\"create\",!1),Bn=\"copy\",jn=Xi(\"copy\",!1),Pn=\"`slot\",zn=Xi(\"`slot\",!1),Mn=function(e,t,n){return{kind:\"handle\",location:Yi(),name:lo(n,e=>e[1],null),ref:lo(t,e=>e[1],oo()),fate:e}},Fn=\"require\",Ln=Xi(\"require\",!1),Dn=function(e){return{kind:\"require\",location:Yi(),items:ao(e)}},Un=function(e,t){return{kind:\"requireHandle\",location:Yi(),name:lo(e,e=>e[1],null),ref:lo(t,e=>e[1],oo())}},Wn=\"#\",Hn=Xi(\"#\",!1),qn=/^[a-zA-Z]/,Vn=Qi([[\"a\",\"z\"],[\"A\",\"Z\"]],!1,!1),Kn=/^[a-zA-Z0-9_]/,Zn=Qi([[\"a\",\"z\"],[\"A\",\"Z\"],[\"0\",\"9\"],\"_\"],!1,!1),Jn=function(){return Ji().substring(1)},Yn=function(e,t){return[e,...t&&t[1]||[]]},Gn=es(\"a verb (e.g. &Verb)\"),Xn=\"&\",Qn=Xi(\"&\",!1),er=function(e){return e},tr=function(e,t){return{location:Yi(),name:e,tags:t=lo(t,e=>e[1],[])}},nr=function(e){return{location:Yi(),name:e,tags:[]}},rr=function(e){return{location:Yi(),name:e[0],tags:e}},ir=function(e){return{kind:\"particle-ref\",location:Yi(),name:e,verbs:[]}},sr=function(e){return{kind:\"particle-ref\",location:Yi(),verbs:[e]}},or=function(e,t){return{kind:\"handle-ref\",location:Yi(),id:e,tags:t||[]}},ar=function(e,t){return{kind:\"handle-ref\",location:Yi(),name:e,tags:t||[]}},lr=function(e){return{kind:\"handle-ref\",location:Yi(),tags:e}},cr=\"slot\",hr=Xi(\"slot\",!1),ur=function(e,t){return{kind:\"slot\",location:Yi(),ref:lo(e,e=>e[1],oo()),name:lo(t,e=>e[1],\"\")}},dr=function(e,t){return{kind:\"schema-inline\",location:Yi(),names:lo(e,e=>e.map(e=>e[0]).filter(e=>\"*\"!==e),[]),fields:lo(t,e=>[e[0],...e[1].map(e=>e[2])],[])}},fr=function(e,t){return{kind:\"schema-inline-field\",location:Yi(),name:t,type:lo(e,e=>e[0],null)}},pr=\"schema\",mr=Xi(\"schema\",!1),gr=function(e,t){return{names:e.map(e=>e[1]).filter(e=>\"*\"!==e),parents:lo(t,e=>e,[])}},yr=\"alias\",_r=Xi(\"alias\",!1),br=function(e,t,n){return{kind:\"schema\",location:Yi(),items:lo(n,ao,[]),alias:t,...e}},vr=function(e,t){return{kind:\"schema\",location:Yi(),items:lo(t,ao,[]),...e}},wr=\"extends\",Sr=Xi(\"extends\",!1),kr=function(e,t){return[e,...t.map(e=>e[3])]},Cr=function(e,t){return{kind:\"schema-field\",location:Yi(),type:e,name:t}},Tr=function(e){return{kind:\"schema-collection\",location:Yi(),schema:e}},xr=function(e){return{kind:\"schema-reference\",location:Yi(),schema:e}},Er=\"Text\",Rr=Xi(\"Text\",!1),Ar=\"URL\",Ir=Xi(\"URL\",!1),Or=\"Number\",$r=Xi(\"Number\",!1),Nr=\"Boolean\",Br=Xi(\"Boolean\",!1),jr=\"Bytes\",Pr=Xi(\"Bytes\",!1),zr=\"Object\",Mr=Xi(\"Object\",!1),Fr=function(e){return{kind:\"schema-primitive\",location:Yi(),type:e}},Lr=\"(\",Dr=Xi(\"(\",!1),Ur=\"or\",Wr=Xi(\"or\",!1),Hr=\")\",qr=Xi(\")\",!1),Vr=function(e,t){const n=[e];for(const e of t)n.push(e[3]);return{kind:\"schema-union\",location:Yi(),types:n}},Kr=function(e,t){const n=[e];for(const e of t)n.push(e[3]);return{kind:\"schema-tuple\",location:Yi(),types:n}},Zr=es(\"a version number (e.g. @012)\"),Jr=/^[0-9]/,Yr=Qi([[\"0\",\"9\"]],!1,!1),Gr=function(e){return Number(e.join(\"\"))},Xr=es(\"indentation\"),Qr=\" \",ei=Xi(\" \",!1),ti=function(e){return(e=e.join(\"\")).length>ro.length&&(so.push(ro),ro=e,!0)},ni=es(\"same indentation\"),ri=function(e){return(e=e.join(\"\")).length===ro.length||e.length<ro.length&&(ro=so.pop(),!1)},ii=es(\"same or more indentation\"),si=function(e){return(e=e.join(\"\")).length>=ro.length||(e.length<ro.length?(ro=so.pop(),!1):void 0)},oi=/^[^a-zA-Z0-9_]/,ai=Qi([[\"a\",\"z\"],[\"A\",\"Z\"],[\"0\",\"9\"],\"_\"],!0,!1),li={type:\"any\"},ci=function(e){throw new Ct(`Expected identifier but keyword, '${e}' found.`,[],\"\",Yi())},hi=es(\"a `backquoted string`\"),ui=\"`\",di=Xi(\"`\",!1),fi=/^[^`]/,pi=Qi([\"`\"],!0,!1),mi=function(e){return e.join(\"\")},gi=es(\"an identifier (e.g. 'id')\"),yi=\"'\",_i=Xi(\"'\",!1),bi=/^[^']/,vi=Qi([\"'\"],!0,!1),wi=function(e){return e.join(\"\")},Si=es(\"an uppercase identifier (e.g. Foo)\"),ki=/^[A-Z]/,Ci=Qi([[\"A\",\"Z\"]],!1,!1),Ti=/^[a-z0-9_]/i,xi=Qi([[\"a\",\"z\"],[\"0\",\"9\"],\"_\"],!1,!0),Ei=es(\"a lowercase identifier (e.g. foo)\"),Ri=/^[a-z]/,Ai=Qi([[\"a\",\"z\"]],!1,!1),Ii=es(\"a field name (e.g. foo9)\"),Oi=es(\"one or more whitespace characters\"),$i=es(\"a group of new lines (and optionally comments)\"),Ni=/^[ ]/,Bi=Qi([\" \"],!1,!1),ji=\"//\",Pi=Xi(\"//\",!1),zi=es(\"a new line\"),Mi=\"\\r\",Fi=Xi(\"\\r\",!1),Li=\"\\n\",Di=Xi(\"\\n\",!1);let Ui=0,Wi=0;const Hi=[{line:1,column:1}];let qi,Vi=0,Ki=[],Zi=0;if(void 0!==t.startRule){if(!(t.startRule in r))throw new Error(\"Can't start parsing from rule \\\"\"+t.startRule+'\".');i=r[t.startRule]}function Ji(){return e.substring(Wi,Ui)}function Yi(){return ns(Wi,Ui)}function Gi(e,t){throw function(e,t){return new Ct(e,[],\"\",t)}(e,t=void 0!==t?t:ns(Wi,Ui))}function Xi(e,t){return{type:\"literal\",text:e,ignoreCase:t}}function Qi(e,t,n){return{type:\"class\",parts:e,inverted:t,ignoreCase:n}}function es(e){return{type:\"other\",description:e}}function ts(t){let n,r=Hi[t];if(r)return r;for(n=t-1;!Hi[n];)n--;for(r={line:(r=Hi[n]).line,column:r.column};n<t;)10===e.charCodeAt(n)?(r.line++,r.column=1):r.column++,n++;return Hi[t]=r,r}function ns(e,t){const n=ts(e),r=ts(t);return{start:{offset:e,line:n.line,column:n.column},end:{offset:t,line:r.line,column:r.column}}}function rs(e){Ui<Vi||(Ui>Vi&&(Vi=Ui,Ki=[]),Ki.push(e))}function is(e,t,n){return new Ct(Ct.buildMessage(e,t),e,t,n)}function ss(){let e,t,r,i,o,a,l,c,h;if(e=Ui,(t=to())===n&&(t=null),t!==n)if((r=Vs())===n&&(r=null),r!==n){for(i=[],o=Ui,a=Ui,(l=Ks())!==n&&(c=as())!==n&&(h=to())!==n?a=l=[l,c,h]:(Ui=a,a=n),a===n&&(a=null),a!==n&&(l=Ks())!==n&&(c=os())!==n?o=a=[a,l,c]:(Ui=o,o=n);o!==n;)i.push(o),o=Ui,a=Ui,(l=Ks())!==n&&(c=as())!==n&&(h=to())!==n?a=l=[l,c,h]:(Ui=a,a=n),a===n&&(a=null),a!==n&&(l=Ks())!==n&&(c=os())!==n?o=a=[a,l,c]:(Ui=o,o=n);i!==n?(Wi=e,e=t=s(i)):(Ui=e,e=n)}else Ui=e,e=n;else Ui=e,e=n;return e}function os(){let t;return(t=function(){let t,r,i,s,o,a,l,c,h,u,d;if(t=Ui,e.substr(Ui,6)===Gt?(r=Gt,Ui+=6):(r=n,0===Zi&&rs(Xt)),r!==n)if(i=Ui,(s=eo())!==n&&(o=Gs())!==n?i=s=[s,o]:(Ui=i,i=n),i===n&&(i=null),i!==n)if(s=Ui,(o=eo())!==n&&(a=Ps())!==n?s=o=[o,a]:(Ui=s,s=n),s===n&&(s=null),s!==n)if((o=to())!==n){if(a=Ui,(l=Vs())!==n){for(c=[],h=Ui,(u=Ks())!==n&&(d=Ts())!==n?h=u=[u,d]:(Ui=h,h=n);h!==n;)c.push(h),h=Ui,(u=Ks())!==n&&(d=Ts())!==n?h=u=[u,d]:(Ui=h,h=n);c!==n?a=l=[l,c]:(Ui=a,a=n)}else Ui=a,a=n;a===n&&(a=null),a!==n?(Wi=t,r=Qt(i,s,a),t=r):(Ui=t,t=n)}else Ui=t,t=n;else Ui=t,t=n;else Ui=t,t=n;else Ui=t,t=n;return t}())===n&&(t=function(){let t,r,i,s,o,a,l,c,h,u,d,f,p;if(t=Ui,e.substr(Ui,8)===ge?(r=ge,Ui+=8):(r=n,0===Zi&&rs(ye)),r!==n)if((i=eo())!==n)if((s=Gs())!==n)if(o=Ui,(a=eo())!==n&&(l=Ps())!==n?o=a=[a,l]:(Ui=o,o=n),o===n&&(o=null),o!==n)if(a=Ui,(l=eo())!==n?(e.substr(Ui,2)===E?(c=E,Ui+=2):(c=n,0===Zi&&rs(R)),c!==n&&(h=eo())!==n&&(u=Ys())!==n?a=l=[l,c,h,u]:(Ui=a,a=n)):(Ui=a,a=n),a===n&&(a=null),a!==n)if((l=to())!==n){if(c=Ui,(h=Vs())!==n){for(u=[],d=Ui,(f=Ks())!==n&&(p=ds())!==n?d=f=[f,p]:(Ui=d,d=n);d!==n;)u.push(d),d=Ui,(f=Ks())!==n&&(p=ds())!==n?d=f=[f,p]:(Ui=d,d=n);u!==n?c=h=[h,u]:(Ui=c,c=n)}else Ui=c,c=n;c===n&&(c=null),c!==n?((h=to())===n&&(h=null),h!==n?(Wi=t,r=_e(s,o,a,c),t=r):(Ui=t,t=n)):(Ui=t,t=n)}else Ui=t,t=n;else Ui=t,t=n;else Ui=t,t=n;else Ui=t,t=n;else Ui=t,t=n;else Ui=t,t=n;return t}())===n&&(t=function(){let t,r,i,s,o;return t=Ui,e.substr(Ui,6)===P?(r=P,Ui+=6):(r=n,0===Zi&&rs(z)),r!==n&&(i=eo())!==n&&(s=Ys())!==n&&(o=to())!==n?(Wi=t,r=M(s),t=r):(Ui=t,t=n),t}())===n&&(t=function(){let e,t,r,i,s,o,a,l,c;if(e=Ui,(t=Us())!==n)if((r=to())!==n){if(i=Ui,(s=Vs())!==n){for(o=[],a=Ui,(l=Ks())!==n&&(c=Ws())!==n?a=l=[l,c]:(Ui=a,a=n);a!==n;)o.push(a),a=Ui,(l=Ks())!==n&&(c=Ws())!==n?a=l=[l,c]:(Ui=a,a=n);o!==n?i=s=[s,o]:(Ui=i,i=n)}else Ui=i,i=n;i===n&&(i=null),i!==n?(Wi=e,t=vr(t,i),e=t):(Ui=e,e=n)}else Ui=e,e=n;else Ui=e,e=n;return e}())===n&&(t=function(){let t,r,i,s,o,a,l,c,h,u,d,f,p;if(t=Ui,e.substr(Ui,5)===yr?(r=yr,Ui+=5):(r=n,0===Zi&&rs(_r)),r!==n)if((i=eo())!==n)if((s=Us())!==n)if((o=eo())!==n)if((a=function(){let t,r,i,s;return t=Ui,e.substr(Ui,2)===en?(r=en,Ui+=2):(r=n,0===Zi&&rs(tn)),r!==n&&(i=eo())!==n&&(s=Gs())!==n?(Wi=t,r=nn(s),t=r):(Ui=t,t=n),t}())!==n)if((l=to())!==n){if(c=Ui,(h=Vs())!==n){for(u=[],d=Ui,(f=Ks())!==n&&(p=Ws())!==n?d=f=[f,p]:(Ui=d,d=n);d!==n;)u.push(d),d=Ui,(f=Ks())!==n&&(p=Ws())!==n?d=f=[f,p]:(Ui=d,d=n);u!==n?c=h=[h,u]:(Ui=c,c=n)}else Ui=c,c=n;c===n&&(c=null),c!==n?(Wi=t,r=br(s,a,c),t=r):(Ui=t,t=n)}else Ui=t,t=n;else Ui=t,t=n;else Ui=t,t=n;else Ui=t,t=n;else Ui=t,t=n;else Ui=t,t=n;return t}())===n&&(t=function(){let t,r,i,s,o,c,h,u,d,f,p,m,g,y,_,b,B,j,P,z,M;if(t=Ui,e.substr(Ui,5)===v?(r=v,Ui+=5):(r=n,0===Zi&&rs(w)),r!==n)if((i=eo())!==n)if((s=Gs())!==n)if((o=eo())!==n)if(e.substr(Ui,2)===S?(c=S,Ui+=2):(c=n,0===Zi&&rs(k)),c!==n)if((h=eo())!==n)if((u=function(){let e;return(e=Ls())===n&&(e=ms())===n&&(e=gs())===n&&(e=bs()),e}())!==n)if(d=Ui,(f=eo())!==n&&(p=Ys())!==n?d=f=[f,p]:(Ui=d,d=n),d===n&&(d=null),d!==n)if(f=Ui,e.substr(Ui,2)===C?(p=C,Ui+=2):(p=n,0===Zi&&rs(T)),p!==n&&(m=Ys())!==n?f=p=[p,m]:(Ui=f,f=n),f===n&&(f=null),f!==n)if(p=Ui,(m=eo())!==n&&(g=function(){let t,r,i,s;if(Zi++,t=Ui,64===e.charCodeAt(Ui)?(r=a,Ui++):(r=n,0===Zi&&rs(l)),r!==n){if(i=[],Jr.test(e.charAt(Ui))?(s=e.charAt(Ui),Ui++):(s=n,0===Zi&&rs(Yr)),s!==n)for(;s!==n;)i.push(s),Jr.test(e.charAt(Ui))?(s=e.charAt(Ui),Ui++):(s=n,0===Zi&&rs(Yr));else i=n;i!==n?(Wi=t,r=Gr(i),t=r):(Ui=t,t=n)}else Ui=t,t=n;return Zi--,t===n&&(r=n,0===Zi&&rs(Zr)),t}())!==n?p=m=[m,g]:(Ui=p,p=n),p===n&&(p=null),p!==n)if(m=Ui,(g=eo())!==n&&(y=Bs())!==n?m=g=[g,y]:(Ui=m,m=n),m===n&&(m=null),m!==n)if((g=eo())!==n)if((y=function(){let t;return(t=function(){let t,r,i,s;return t=Ui,e.substr(Ui,2)===E?(r=E,Ui+=2):(r=n,0===Zi&&rs(R)),r!==n&&(i=eo())!==n&&(s=Ys())!==n?(Wi=t,r=A(s),t=r):(Ui=t,t=n),t}())===n&&(t=function(){let t,r,i,s;return t=Ui,e.substr(Ui,2)===E?(r=E,Ui+=2):(r=n,0===Zi&&rs(R)),r!==n&&(i=eo())!==n&&(s=Gs())!==n?(Wi=t,r=I(s),t=r):(Ui=t,t=n),t}())===n&&(t=function(){let t,r,i,s;return t=Ui,e.substr(Ui,2)===O?(r=O,Ui+=2):(r=n,0===Zi&&rs($)),r!==n&&(i=eo())!==n&&(s=Ys())!==n?(Wi=t,r=N(s),t=r):(Ui=t,t=n),t}()),t}())!==n)if((_=to())!==n){if(b=Ui,(B=Vs())!==n){if(j=[],P=Ui,(z=Ks())!==n&&(M=cs())!==n?P=z=[z,M]:(Ui=P,P=n),P!==n)for(;P!==n;)j.push(P),P=Ui,(z=Ks())!==n&&(M=cs())!==n?P=z=[z,M]:(Ui=P,P=n);else j=n;j!==n?b=B=[B,j]:(Ui=b,b=n)}else Ui=b,b=n;b===n&&(b=null),b!==n?(Wi=t,r=x(s,u,d,f,p,m,y,b),t=r):(Ui=t,t=n)}else Ui=t,t=n;else Ui=t,t=n;else Ui=t,t=n;else Ui=t,t=n;else Ui=t,t=n;else Ui=t,t=n;else Ui=t,t=n;else Ui=t,t=n;else Ui=t,t=n;else Ui=t,t=n;else Ui=t,t=n;else Ui=t,t=n;else Ui=t,t=n;else Ui=t,t=n;return t}())===n&&(t=function(){let t,r,i,s,o,a,l,c,h,u,d,f;if(Zi++,t=Ui,e.substr(Ui,9)===L?(r=L,Ui+=9):(r=n,0===Zi&&rs(D)),r!==n)if((i=eo())!==n)if((s=Gs())!==n)if(o=Ui,(a=eo())===n&&(a=null),a!==n?(60===e.charCodeAt(Ui)?(l=U,Ui++):(l=n,0===Zi&&rs(W)),l!==n?((c=eo())===n&&(c=null),c!==n&&(h=function(){let t,r,i,s,o,a,l;if(t=Ui,(r=ys())!==n){for(i=[],s=Ui,44===e.charCodeAt(Ui)?(o=st,Ui++):(o=n,0===Zi&&rs(ot)),o!==n&&(a=eo())!==n&&(l=ys())!==n?s=o=[o,a,l]:(Ui=s,s=n);s!==n;)i.push(s),s=Ui,44===e.charCodeAt(Ui)?(o=st,Ui++):(o=n,0===Zi&&rs(ot)),o!==n&&(a=eo())!==n&&(l=ys())!==n?s=o=[o,a,l]:(Ui=s,s=n);i!==n?(Wi=t,r=dt(r,i),t=r):(Ui=t,t=n)}else Ui=t,t=n;return t}())!==n?((u=eo())===n&&(u=null),u!==n?(62===e.charCodeAt(Ui)?(d=H,Ui++):(d=n,0===Zi&&rs(q)),d!==n?o=a=[a,l,c,h,u,d]:(Ui=o,o=n)):(Ui=o,o=n)):(Ui=o,o=n)):(Ui=o,o=n)):(Ui=o,o=n),o===n&&(o=null),o!==n)if((a=to())!==n){if(l=Ui,(c=Vs())!==n){for(h=[],u=Ui,(d=Ks())!==n&&(f=hs())!==n?u=d=[d,f]:(Ui=u,u=n);u!==n;)h.push(u),u=Ui,(d=Ks())!==n&&(f=hs())!==n?u=d=[d,f]:(Ui=u,u=n);h!==n?l=c=[c,h]:(Ui=l,l=n)}else Ui=l,l=n;l===n&&(l=null),l!==n?((c=to())===n&&(c=null),c!==n?(Wi=t,r=V(s,o,l),t=r):(Ui=t,t=n)):(Ui=t,t=n)}else Ui=t,t=n;else Ui=t,t=n;else Ui=t,t=n;else Ui=t,t=n;else Ui=t,t=n;return Zi--,t===n&&(r=n,0===Zi&&rs(F)),t}())===n&&(t=function(){let t,r,i,s,o,a,l,c,h;if(t=Ui,e.substr(Ui,4)===se?(r=se,Ui+=4):(r=n,0===Zi&&rs(oe)),r!==n)if((i=to())!==n){if(s=Ui,(o=Vs())!==n){for(a=[],l=Ui,(c=Ks())!==n&&(h=us())!==n?l=c=[c,h]:(Ui=l,l=n);l!==n;)a.push(l),l=Ui,(c=Ks())!==n&&(h=us())!==n?l=c=[c,h]:(Ui=l,l=n);a!==n?s=o=[o,a]:(Ui=s,s=n)}else Ui=s,s=n;s===n&&(s=null),s!==n?((o=to())===n&&(o=null),o!==n?(Wi=t,r=ae(s),t=r):(Ui=t,t=n)):(Ui=t,t=n)}else Ui=t,t=n;else Ui=t,t=n;return t}())===n&&(t=function(){let t,r,i,s,o,a,l,c,y,_;return t=Ui,e.substr(Ui,8)===h?(r=h,Ui+=8):(r=n,0===Zi&&rs(u)),r!==n&&(i=eo())!==n&&(s=Gs())!==n&&(o=to())!==n&&(a=Vs())!==n&&(l=Ks())!==n&&(c=function(){let t,r,i;return t=Ui,e.substr(Ui,5)===f?(r=f,Ui+=5):(r=n,0===Zi&&rs(p)),r!==n&&(i=no())!==n?(Wi=t,r=m(),t=r):(Ui=t,t=n),t}())!==n&&(y=function(){let e,t,r,i,s;if(e=Ui,t=[],r=Ui,(i=Zs())!==n&&(s=ls())!==n?r=i=[i,s]:(Ui=r,r=n),r!==n)for(;r!==n;)t.push(r),r=Ui,(i=Zs())!==n&&(s=ls())!==n?r=i=[i,s]:(Ui=r,r=n);else t=n;return t!==n&&(Wi=e,t=g(t)),e=t}())!==n?((_=to())===n&&(_=null),_!==n?(Wi=t,r=d(s,y),t=r):(Ui=t,t=n)):(Ui=t,t=n),t}()),t}function as(){let t,r,i;return Zi++,t=Ui,64===e.charCodeAt(Ui)?(r=a,Ui++):(r=n,0===Zi&&rs(l)),r!==n&&(i=Xs())!==n?(Wi=t,t=r=c(i)):(Ui=t,t=n),Zi--,t===n&&(r=n,0===Zi&&rs(o)),t}function ls(){let t,r,i;for(t=Ui,r=[],y.test(e.charAt(Ui))?(i=e.charAt(Ui),Ui++):(i=n,0===Zi&&rs(_));i!==n;)r.push(i),y.test(e.charAt(Ui))?(i=e.charAt(Ui),Ui++):(i=n,0===Zi&&rs(_));return r!==n&&(i=no())!==n?(Wi=t,t=r=b()):(Ui=t,t=n),t}function cs(){let t,r,i,s,o;return t=Ui,e.substr(Ui,11)===B?(r=B,Ui+=11):(r=n,0===Zi&&rs(j)),r!==n&&(i=eo())!==n&&(s=Js())!==n&&(o=to())!==n?t=r=[r,i,s,o]:(Ui=t,t=n),t}function hs(){let t;return(t=function(){let t,r,i,s,o,a,l;return t=Ui,r=Ui,e.substr(Ui,4)===Y?(i=Y,Ui+=4):(i=n,0===Zi&&rs(G)),i!==n&&(s=eo())!==n?r=i=[i,s]:(Ui=r,r=n),r===n&&(r=null),r!==n?(e.substr(Ui,7)===X?(i=X,Ui+=7):(i=n,0===Zi&&rs(Q)),i===n&&(e.substr(Ui,7)===ee?(i=ee,Ui+=7):(i=n,0===Zi&&rs(te))),i!==n?(s=Ui,(o=eo())!==n?(e.substr(Ui,6)===ne?(a=ne,Ui+=6):(a=n,0===Zi&&rs(re)),a!==n?s=o=[o,a]:(Ui=s,s=n)):(Ui=s,s=n),s===n&&(s=null),s!==n?(o=Ui,(a=eo())!==n&&(l=Xs())!==n?o=a=[a,l]:(Ui=o,o=n),o===n&&(o=null),o!==n&&(a=to())!==n?(Wi=t,r=ie(r,i,s,o),t=r):(Ui=t,t=n)):(Ui=t,t=n)):(Ui=t,t=n)):(Ui=t,t=n),t}())===n&&(t=function(){let t,r,i,s,o;return t=Ui,r=Ui,(i=fs())!==n&&(s=eo())!==n?r=i=[i,s]:(Ui=r,r=n),r===n&&(r=null),r!==n?(i=Ui,(s=ps())!==n&&(o=eo())!==n?i=s=[s,o]:(Ui=i,i=n),i===n&&(i=null),i!==n?((s=Xs())===n&&(42===e.charCodeAt(Ui)?(s=K,Ui++):(s=n,0===Zi&&rs(Z))),s!==n&&(o=to())!==n?(Wi=t,r=J(r,i,s),t=r):(Ui=t,t=n)):(Ui=t,t=n)):(Ui=t,t=n),t}()),t}function us(){let t;return(t=function(){let t,r,i,s,o,a,l;return t=Ui,e.substr(Ui,10)===fe?(r=fe,Ui+=10):(r=n,0===Zi&&rs(pe)),r!==n?((i=eo())===n&&(i=null),i!==n?(58===e.charCodeAt(Ui)?(s=he,Ui++):(s=n,0===Zi&&rs(ue)),s!==n?((o=eo())===n&&(o=null),o!==n&&(a=Ys())!==n&&(l=to())!==n?(Wi=t,r=me(a),t=r):(Ui=t,t=n)):(Ui=t,t=n)):(Ui=t,t=n)):(Ui=t,t=n),t}())===n&&(t=function(){let t,r,i,s,o,a,l;return t=Ui,e.substr(Ui,4)===le?(r=le,Ui+=4):(r=n,0===Zi&&rs(ce)),r!==n?((i=eo())===n&&(i=null),i!==n?(58===e.charCodeAt(Ui)?(s=he,Ui++):(s=n,0===Zi&&rs(ue)),s!==n?((o=eo())===n&&(o=null),o!==n&&(a=Ys())!==n&&(l=to())!==n?(Wi=t,r=de(a),t=r):(Ui=t,t=n)):(Ui=t,t=n)):(Ui=t,t=n)):(Ui=t,t=n),t}()),t}function ds(){let t,r;return Zi++,(t=function(){let t,r,i,s,o;return t=Ui,e.substr(Ui,8)===ft?(r=ft,Ui+=8):(r=n,0===Zi&&rs(pt)),r!==n&&(i=eo())!==n&&(s=function(){let t;return e.substr(Ui,9)===gt?(t=gt,Ui+=9):(t=n,0===Zi&&rs(yt)),t===n&&(e.substr(Ui,3)===_t?(t=_t,Ui+=3):(t=n,0===Zi&&rs(bt)),t===n&&(e.substr(Ui,2)===vt?(t=vt,Ui+=2):(t=n,0===Zi&&rs(wt)),t===n&&(e.substr(Ui,5)===St?(t=St,Ui+=5):(t=n,0===Zi&&rs(kt)),t===n&&(e.substr(Ui,14)===Tt?(t=Tt,Ui+=14):(t=n,0===Zi&&rs(xt)),t===n&&(e.substr(Ui,8)===Et?(t=Et,Ui+=8):(t=n,0===Zi&&rs(Rt)),t===n&&(e.substr(Ui,7)===At?(t=At,Ui+=7):(t=n,0===Zi&&rs(It)),t===n&&(e.substr(Ui,10)===Ot?(t=Ot,Ui+=10):(t=n,0===Zi&&rs($t))))))))),t}())!==n&&(o=to())!==n?(Wi=t,r=mt(s),t=r):(Ui=t,t=n),t}())===n&&(t=function(){let t,r,i,s,o,a,l,c,h,u,d,f,p,m;if(t=Ui,r=Ui,e.substr(Ui,4)===Y?(i=Y,Ui+=4):(i=n,0===Zi&&rs(G)),i!==n&&(s=eo())!==n?r=i=[i,s]:(Ui=r,r=n),r===n&&(r=null),r!==n)if(e.substr(Ui,7)===X?(i=X,Ui+=7):(i=n,0===Zi&&rs(Q)),i!==n)if((s=eo())!==n)if(o=Ui,e.substr(Ui,6)===ne?(a=ne,Ui+=6):(a=n,0===Zi&&rs(re)),a!==n&&(l=eo())!==n?o=a=[a,l]:(Ui=o,o=n),o===n&&(o=null),o!==n)if((a=Xs())!==n)if(l=Ui,(c=eo())!==n&&(h=Bs())!==n?l=c=[c,h]:(Ui=l,l=n),l===n&&(l=null),l!==n)if((c=to())!==n){if(h=Ui,(u=Vs())!==n){for(d=[],f=Ui,(p=Ks())!==n&&(m=vs())!==n?f=p=[p,m]:(Ui=f,f=n);f!==n;)d.push(f),f=Ui,(p=Ks())!==n&&(m=vs())!==n?f=p=[p,m]:(Ui=f,f=n);d!==n?h=u=[u,d]:(Ui=h,h=n)}else Ui=h,h=n;h===n&&(h=null),h!==n?(Wi=t,r=Nt(r,o,a,l,h),t=r):(Ui=t,t=n)}else Ui=t,t=n;else Ui=t,t=n;else Ui=t,t=n;else Ui=t,t=n;else Ui=t,t=n;else Ui=t,t=n;else Ui=t,t=n;return t}())===n&&(t=ks())===n&&(t=function t(){let r,i,s,o,a,l,c,h,u;if(r=Ui,(i=function(){let t,r,i,s,o,a,l;return t=Ui,(r=fs())!==n?(63===e.charCodeAt(Ui)?(i=we,Ui++):(i=n,0===Zi&&rs(Se)),i===n&&(i=null),i!==n&&(s=eo())!==n&&(o=ps())!==n&&(a=eo())!==n&&(l=function(){let e,t,r,i,s;return e=Ui,(t=Xs())!==n?(r=Ui,(i=eo())!==n&&(s=Bs())!==n?r=i=[i,s]:(Ui=r,r=n),r===n&&(r=null),r!==n?(Wi=e,t=tr(t,r),e=t):(Ui=e,e=n)):(Ui=e,e=n),e===n&&(e=Ui,(t=eo())!==n&&(r=Xs())!==n?(Wi=e,t=nr(r),e=t):(Ui=e,e=n),e===n&&(e=Ui,(t=eo())!==n&&(r=Bs())!==n?(Wi=e,t=rr(r),e=t):(Ui=e,e=n))),e}())!==n?(Wi=t,r=ke(r,i,o,l),t=r):(Ui=t,t=n)):(Ui=t,t=n),t}())!==n)if((s=to())!==n){if(o=Ui,(a=Vs())!==n){for(l=[],c=Ui,(h=Ks())!==n&&(u=t())!==n?c=h=[h,u]:(Ui=c,c=n);c!==n;)l.push(c),c=Ui,(h=Ks())!==n&&(u=t())!==n?c=h=[h,u]:(Ui=c,c=n);l!==n?o=a=[a,l]:(Ui=o,o=n)}else Ui=o,o=n;o===n&&(o=null),o!==n?(Wi=r,i=ve(i,o),r=i):(Ui=r,r=n)}else Ui=r,r=n;else Ui=r,r=n;return r}()),Zi--,t===n&&(r=n,0===Zi&&rs(be)),t}function fs(){let t,r;return Zi++,e.substr(Ui,5)===Te?(t=Te,Ui+=5):(t=n,0===Zi&&rs(xe)),t===n&&(e.substr(Ui,2)===E?(t=E,Ui+=2):(t=n,0===Zi&&rs(R)),t===n&&(e.substr(Ui,3)===Ee?(t=Ee,Ui+=3):(t=n,0===Zi&&rs(Re)),t===n&&(e.substr(Ui,4)===Ae?(t=Ae,Ui+=4):(t=n,0===Zi&&rs(Ie)),t===n&&(e.substr(Ui,8)===Oe?(t=Oe,Ui+=8):(t=n,0===Zi&&rs($e)),t===n&&(t=Ui,e.substr(Ui,8)===Ne?(r=Ne,Ui+=8):(r=n,0===Zi&&rs(Be)),r!==n&&(Wi=t,r=je()),t=r))))),Zi--,t===n&&(r=n,0===Zi&&rs(Ce)),t}function ps(){let t;return(t=ys())===n&&(t=ms())===n&&(t=gs())===n&&(t=function(){let t,r,i,s;return t=Ui,e.substr(Ui,10)===He?(r=He,Ui+=10):(r=n,0===Zi&&rs(qe)),r!==n&&(i=ps())!==n?(62===e.charCodeAt(Ui)?(s=H,Ui++):(s=n,0===Zi&&rs(q)),s!==n?(Wi=t,r=Ve(i),t=r):(Ui=t,t=n)):(Ui=t,t=n),t}())===n&&(t=function(){let t,r,i,s,o,a,l,c,h,u,d,f,p;if(t=Ui,e.substr(Ui,4)===Qe?(r=Qe,Ui+=4):(r=n,0===Zi&&rs(et)),r!==n)if(i=Ui,Zi++,tt.test(e.charAt(Ui))?(s=e.charAt(Ui),Ui++):(s=n,0===Zi&&rs(nt)),Zi--,s!==n?(Ui=i,i=void 0):i=n,i!==n){if(s=Ui,(o=eo())!==n)if(123===e.charCodeAt(Ui)?(a=rt,Ui++):(a=n,0===Zi&&rs(it)),a!==n){if(l=Ui,(c=_s())!==n){for(h=[],u=Ui,44===e.charCodeAt(Ui)?(d=st,Ui++):(d=n,0===Zi&&rs(ot)),d!==n&&(f=eo())!==n&&(p=_s())!==n?u=d=[d,f,p]:(Ui=u,u=n);u!==n;)h.push(u),u=Ui,44===e.charCodeAt(Ui)?(d=st,Ui++):(d=n,0===Zi&&rs(ot)),d!==n&&(f=eo())!==n&&(p=_s())!==n?u=d=[d,f,p]:(Ui=u,u=n);h!==n?l=c=[c,h]:(Ui=l,l=n)}else Ui=l,l=n;l===n&&(l=null),l!==n?(125===e.charCodeAt(Ui)?(c=at,Ui++):(c=n,0===Zi&&rs(lt)),c!==n?s=o=[o,a,l,c]:(Ui=s,s=n)):(Ui=s,s=n)}else Ui=s,s=n;else Ui=s,s=n;s===n&&(s=null),s!==n?(Wi=t,r=ct(s),t=r):(Ui=t,t=n)}else Ui=t,t=n;else Ui=t,t=n;return t}())===n&&(t=Ls())===n&&(t=bs()),t}function ms(){let t,r,i,s;return t=Ui,91===e.charCodeAt(Ui)?(r=Pe,Ui++):(r=n,0===Zi&&rs(ze)),r!==n&&(i=ps())!==n?(93===e.charCodeAt(Ui)?(s=Me,Ui++):(s=n,0===Zi&&rs(Fe)),s!==n?(Wi=t,t=r=Le(i)):(Ui=t,t=n)):(Ui=t,t=n),t}function gs(){let t,r,i,s;return t=Ui,e.substr(Ui,14)===De?(r=De,Ui+=14):(r=n,0===Zi&&rs(Ue)),r!==n&&(i=ps())!==n?(62===e.charCodeAt(Ui)?(s=H,Ui++):(s=n,0===Zi&&rs(q)),s!==n?(Wi=t,t=r=We(i)):(Ui=t,t=n)):(Ui=t,t=n),t}function ys(){let t,r,i,s,o,a,l,c;return Zi++,t=Ui,126===e.charCodeAt(Ui)?(r=Ze,Ui++):(r=n,0===Zi&&rs(Je)),r!==n&&(i=Xs())!==n?(s=Ui,(o=eo())!==n?(e.substr(Ui,4)===Ye?(a=Ye,Ui+=4):(a=n,0===Zi&&rs(Ge)),a!==n&&(l=eo())!==n&&(c=ps())!==n?s=o=[o,a,l,c]:(Ui=s,s=n)):(Ui=s,s=n),s===n&&(s=null),s!==n?(Wi=t,t=r=Xe(i,s)):(Ui=t,t=n)):(Ui=t,t=n),Zi--,t===n&&(r=n,0===Zi&&rs(Ke)),t}function _s(){let t,r,i,s,o,a;return t=Ui,(r=Qs())!==n?((i=eo())===n&&(i=null),i!==n?(58===e.charCodeAt(Ui)?(s=he,Ui++):(s=n,0===Zi&&rs(ue)),s!==n?((o=eo())===n&&(o=null),o!==n&&(a=Xs())!==n?(Wi=t,t=r=ht(r,a)):(Ui=t,t=n)):(Ui=t,t=n)):(Ui=t,t=n)):(Ui=t,t=n),t}function bs(){let e,t;return e=Ui,(t=Gs())!==n&&(Wi=e,t=ut(t)),e=t}function vs(){let t;return(t=ws())===n&&(t=function(){let t,r,i,s,o,a,l,c,h,u,d,f,p,m;if(t=Ui,r=Ui,e.substr(Ui,4)===Y?(i=Y,Ui+=4):(i=n,0===Zi&&rs(G)),i!==n&&(s=eo())!==n?r=i=[i,s]:(Ui=r,r=n),r===n&&(r=null),r!==n)if(e.substr(Ui,7)===ee?(i=ee,Ui+=7):(i=n,0===Zi&&rs(te)),i!==n)if((s=eo())!==n)if(o=Ui,e.substr(Ui,6)===ne?(a=ne,Ui+=6):(a=n,0===Zi&&rs(re)),a!==n&&(l=eo())!==n?o=a=[a,l]:(Ui=o,o=n),o===n&&(o=null),o!==n)if((a=Xs())!==n)if(l=Ui,(c=eo())!==n&&(h=Bs())!==n?l=c=[c,h]:(Ui=l,l=n),l===n&&(l=null),l!==n)if((c=to())!==n){if(h=Ui,(u=Vs())!==n){for(d=[],f=Ui,(p=Ks())!==n&&(m=Ss())!==n?f=p=[p,m]:(Ui=f,f=n);f!==n;)d.push(f),f=Ui,(p=Ks())!==n&&(m=Ss())!==n?f=p=[p,m]:(Ui=f,f=n);d!==n?h=u=[u,d]:(Ui=h,h=n)}else Ui=h,h=n;h===n&&(h=null),h!==n?(Wi=t,r=qt(r,o,a,l,h),t=r):(Ui=t,t=n)}else Ui=t,t=n;else Ui=t,t=n;else Ui=t,t=n;else Ui=t,t=n;else Ui=t,t=n;else Ui=t,t=n;else Ui=t,t=n;return t}()),t}function ws(){let t,r,i,s,o;return t=Ui,e.substr(Ui,10)===Bt?(r=Bt,Ui+=10):(r=n,0===Zi&&rs(jt)),r!==n&&(i=eo())!==n?(e.substr(Ui,10)===Pt?(s=Pt,Ui+=10):(s=n,0===Zi&&rs(zt)),s===n&&(e.substr(Ui,3)===Mt?(s=Mt,Ui+=3):(s=n,0===Zi&&rs(Ft)),s===n&&(e.substr(Ui,6)===Lt?(s=Lt,Ui+=6):(s=n,0===Zi&&rs(Dt)),s===n&&(e.substr(Ui,5)===Ut?(s=Ut,Ui+=5):(s=n,0===Zi&&rs(Wt))))),s!==n&&(o=to())!==n?(Wi=t,t=r=Ht(s)):(Ui=t,t=n)):(Ui=t,t=n),t}function Ss(){let t;return(t=ws())===n&&(t=function(){let t,r,i,s,o;return t=Ui,e.substr(Ui,6)===Vt?(r=Vt,Ui+=6):(r=n,0===Zi&&rs(Kt)),r!==n&&(i=eo())!==n&&(s=Xs())!==n&&(o=to())!==n?(Wi=t,r=Zt(s),t=r):(Ui=t,t=n),t}()),t}function ks(){let t,r,i,s,o,a,l,c,h,u,d;if(t=Ui,e.substr(Ui,11)===B?(r=B,Ui+=11):(r=n,0===Zi&&rs(j)),r!==n)if((i=eo())!==n)if((s=Js())!==n)if((o=to())!==n){if(a=Ui,(l=Vs())!==n){if(c=[],h=Ui,(u=Ks())!==n&&(d=Cs())!==n?h=u=[u,d]:(Ui=h,h=n),h!==n)for(;h!==n;)c.push(h),h=Ui,(u=Ks())!==n&&(d=Cs())!==n?h=u=[u,d]:(Ui=h,h=n);else c=n;c!==n?a=l=[l,c]:(Ui=a,a=n)}else Ui=a,a=n;a===n&&(a=null),a!==n?(Wi=t,t=r=Jt(s,a)):(Ui=t,t=n)}else Ui=t,t=n;else Ui=t,t=n;else Ui=t,t=n;else Ui=t,t=n;return t}function Cs(){let e,t,r,i,s;return e=Ui,(t=Xs())!==n&&(r=eo())!==n&&(i=Js())!==n&&(s=to())!==n?(Wi=e,e=t=Yt(t,i)):(Ui=e,e=n),e}function Ts(){let t;return(t=Es())===n&&(t=function(){let e,t,r,i,s,o;return e=Ui,(t=$s())!==n?(r=Ui,(i=eo())!==n&&(s=Ms())!==n?r=i=[i,s]:(Ui=r,r=n),r===n&&(r=null),r!==n?(i=Ui,(s=eo())!==n&&(o=xs())!==n?i=s=[s,o]:(Ui=i,i=n),i===n&&(i=null),i!==n&&(s=to())!==n?(Wi=e,t=Mn(t,r,i),e=t):(Ui=e,e=n)):(Ui=e,e=n)):(Ui=e,e=n),e}())===n&&(t=Ns())===n&&(t=function(){let t,r,i,s,o,a,l,c,h;if(t=Ui,e.substr(Ui,7)===Fn?(r=Fn,Ui+=7):(r=n,0===Zi&&rs(Ln)),r!==n)if((i=to())!==n){if(s=Ui,(o=Vs())!==n){for(a=[],l=Ui,(c=Ks())!==n?((h=Es())===n&&(h=Ns())===n&&(h=Fs()),h!==n?l=c=[c,h]:(Ui=l,l=n)):(Ui=l,l=n);l!==n;)a.push(l),l=Ui,(c=Ks())!==n?((h=Es())===n&&(h=Ns())===n&&(h=Fs()),h!==n?l=c=[c,h]:(Ui=l,l=n)):(Ui=l,l=n);a!==n?s=o=[o,a]:(Ui=s,s=n)}else Ui=s,s=n;s===n&&(s=null),s!==n?(Wi=t,r=Dn(s),t=r):(Ui=t,t=n)}else Ui=t,t=n;else Ui=t,t=n;return t}())===n&&(t=Fs())===n&&(t=function(){let t,r,i,s,o,a,l,c,h,u,d,f,p,m;if(t=Ui,e.substr(Ui,6)===hn?(r=hn,Ui+=6):(r=n,0===Zi&&rs(un)),r!==n)if((i=eo())!==n)if((s=Js())!==n)if((o=to())!==n){if(a=Ui,(l=Vs())!==n){if(c=Ui,(h=Ks())!==n)if(e.substr(Ui,6)===dn?(u=dn,Ui+=6):(u=n,0===Zi&&rs(fn)),u!==n){if(d=[],f=Ui,(p=eo())!==n&&(m=Js())!==n?f=p=[p,m]:(Ui=f,f=n),f!==n)for(;f!==n;)d.push(f),f=Ui,(p=eo())!==n&&(m=Js())!==n?f=p=[p,m]:(Ui=f,f=n);else d=n;d!==n&&(f=to())!==n?c=h=[h,u,d,f]:(Ui=c,c=n)}else Ui=c,c=n;else Ui=c,c=n;c!==n?a=l=[l,c]:(Ui=a,a=n)}else Ui=a,a=n;a===n&&(a=null),a!==n?(Wi=t,r=pn(s,a),t=r):(Ui=t,t=n)}else Ui=t,t=n;else Ui=t,t=n;else Ui=t,t=n;else Ui=t,t=n;return t}())===n&&(t=function(){let e,t,r,i,s,o,a;return e=Ui,(t=Is())!==n&&(r=eo())!==n&&(i=As())!==n&&(s=eo())!==n&&(o=Is())!==n&&(a=to())!==n?(Wi=e,t=cn(t,i,o),e=t):(Ui=e,e=n),e}())===n&&(t=ks()),t}function xs(){let t,r,i,s;return t=Ui,e.substr(Ui,2)===en?(r=en,Ui+=2):(r=n,0===Zi&&rs(tn)),r!==n&&(i=eo())!==n&&(s=Xs())!==n?(Wi=t,t=r=nn(s)):(Ui=t,t=n),t}function Es(){let t,r,i,s,o,a,l,c,h,u;if(t=Ui,(r=function(){let e,t;return e=Ui,(t=Gs())!==n&&(Wi=e,t=ir(t)),(e=t)===n&&(e=Ui,(t=js())!==n&&(Wi=e,t=sr(t)),e=t),e}())===n&&(42===e.charCodeAt(Ui)?(r=K,Ui++):(r=n,0===Zi&&rs(Z))),r!==n)if(i=Ui,(s=eo())!==n&&(o=xs())!==n?i=s=[s,o]:(Ui=i,i=n),i===n&&(i=null),i!==n)if((s=to())!==n){if(o=Ui,(a=Vs())!==n){for(l=[],c=Ui,(h=Ks())!==n&&(u=Rs())!==n?c=h=[h,u]:(Ui=c,c=n);c!==n;)l.push(c),c=Ui,(h=Ks())!==n&&(u=Rs())!==n?c=h=[h,u]:(Ui=c,c=n);l!==n?o=a=[a,l]:(Ui=o,o=n)}else Ui=o,o=n;o===n&&(o=null),o!==n?(Wi=t,t=r=rn(r,i,o)):(Ui=t,t=n)}else Ui=t,t=n;else Ui=t,t=n;else Ui=t,t=n;return t}function Rs(){let t;return(t=function t(){let r,i,s,o,a,l,c,h,u,d,f,p;if(r=Ui,(i=function(){let t;return e.substr(Ui,7)===ee?(t=ee,Ui+=7):(t=n,0===Zi&&rs(te)),t===n&&(e.substr(Ui,7)===X?(t=X,Ui+=7):(t=n,0===Zi&&rs(Q))),t}())!==n)if((s=eo())!==n)if((o=function(){let e,t,r;return e=Ui,(t=Xs())!==n?((r=zs())===n&&(r=null),r!==n?(Wi=e,t=ln(t,r),e=t):(Ui=e,e=n)):(Ui=e,e=n),e}())!==n)if(a=Ui,(l=eo())!==n&&(c=xs())!==n?a=l=[l,c]:(Ui=a,a=n),a===n&&(a=null),a!==n)if((l=to())!==n){if(c=Ui,(h=Vs())!==n){for(u=[],d=Ui,(f=Ks())!==n&&(p=t())!==n?d=f=[f,p]:(Ui=d,d=n);d!==n;)u.push(d),d=Ui,(f=Ks())!==n&&(p=t())!==n?d=f=[f,p]:(Ui=d,d=n);u!==n?c=h=[h,u]:(Ui=c,c=n)}else Ui=c,c=n;c===n&&(c=null),c!==n?(Wi=r,i=an(i,o,a,c),r=i):(Ui=r,r=n)}else Ui=r,r=n;else Ui=r,r=n;else Ui=r,r=n;else Ui=r,r=n;else Ui=r,r=n;return r}())===n&&(t=function t(){let r,i,s,o,a,l,c,h,u,d,f,p;if(r=Ui,(i=Xs())===n&&(42===e.charCodeAt(Ui)?(i=K,Ui++):(i=n,0===Zi&&rs(Z))),i!==n)if((s=eo())!==n)if((o=As())!==n)if(a=Ui,(l=eo())!==n&&(c=function(){let e,t,r,i;return e=Ui,(t=Gs())===n&&(t=Xs()),t===n&&(t=null),t!==n?((r=eo())===n&&(r=null),r!==n?((i=Bs())===n&&(i=null),i!==n?(Wi=e,t=on(t,i),e=t):(Ui=e,e=n)):(Ui=e,e=n)):(Ui=e,e=n),e}())!==n?a=l=[l,c]:(Ui=a,a=n),a===n&&(a=null),a!==n)if((l=to())!==n){if(c=Ui,(h=Vs())!==n){for(u=[],d=Ui,(f=Ks())!==n&&(p=t())!==n?d=f=[f,p]:(Ui=d,d=n);d!==n;)u.push(d),d=Ui,(f=Ks())!==n&&(p=t())!==n?d=f=[f,p]:(Ui=d,d=n);u!==n?c=h=[h,u]:(Ui=c,c=n)}else Ui=c,c=n;c===n&&(c=null),c!==n?(Wi=r,i=sn(i,o,a,c),r=i):(Ui=r,r=n)}else Ui=r,r=n;else Ui=r,r=n;else Ui=r,r=n;else Ui=r,r=n;else Ui=r,r=n;return r}()),t}function As(){let t;return e.substr(Ui,2)===mn?(t=mn,Ui+=2):(t=n,0===Zi&&rs(gn)),t===n&&(e.substr(Ui,2)===yn?(t=yn,Ui+=2):(t=n,0===Zi&&rs(_n)),t===n&&(61===e.charCodeAt(Ui)?(t=bn,Ui++):(t=n,0===Zi&&rs(vn)),t===n&&(e.substr(Ui,7)===X?(t=X,Ui+=7):(t=n,0===Zi&&rs(Q)),t===n&&(e.substr(Ui,7)===ee?(t=ee,Ui+=7):(t=n,0===Zi&&rs(te)))))),t}function Is(){let e;return(e=function(){let e,t,r;return e=Ui,(t=Ps())!==n?((r=Os())===n&&(r=null),r!==n?(Wi=e,t=wn(t,r),e=t):(Ui=e,e=n)):(Ui=e,e=n),e}())===n&&(e=function(){let e,t;return e=Ui,(t=Bs())!==n&&(Wi=e,t=Sn(t)),e=t}())===n&&(e=function(){let e,t,r;return e=Ui,(t=Gs())!==n?((r=Os())===n&&(r=null),r!==n?(Wi=e,t=Cn(t,r),e=t):(Ui=e,e=n)):(Ui=e,e=n),e}())===n&&(e=function(){let e,t,r;return e=Ui,(t=Xs())!==n?((r=Os())===n&&(r=null),r!==n?(Wi=e,t=kn(t,r),e=t):(Ui=e,e=n)):(Ui=e,e=n),e}()),e}function Os(){let t,r,i,s,o,a;return t=Ui,46===e.charCodeAt(Ui)?(r=Tn,Ui++):(r=n,0===Zi&&rs(xn)),r!==n?((i=Xs())===n&&(i=null),i!==n?(s=Ui,(o=eo())===n&&(o=null),o!==n&&(a=Bs())!==n?s=o=[o,a]:(Ui=s,s=n),s===n&&(s=null),s!==n?(Wi=t,t=r=En(i,s)):(Ui=t,t=n)):(Ui=t,t=n)):(Ui=t,t=n),t}function $s(){let t;return 63===e.charCodeAt(Ui)?(t=we,Ui++):(t=n,0===Zi&&rs(Se)),t===n&&(e.substr(Ui,3)===Rn?(t=Rn,Ui+=3):(t=n,0===Zi&&rs(An)),t===n&&(e.substr(Ui,3)===In?(t=In,Ui+=3):(t=n,0===Zi&&rs(On)),t===n&&(e.substr(Ui,6)===$n?(t=$n,Ui+=6):(t=n,0===Zi&&rs(Nn)),t===n&&(e.substr(Ui,4)===Bn?(t=Bn,Ui+=4):(t=n,0===Zi&&rs(jn)),t===n&&(e.substr(Ui,5)===Pn?(t=Pn,Ui+=5):(t=n,0===Zi&&rs(zn))))))),t}function Ns(){let t,r,i,s,o,a;return t=Ui,e.substr(Ui,6)===Vt?(r=Vt,Ui+=6):(r=n,0===Zi&&rs(Kt)),r!==n?(i=Ui,(s=eo())!==n&&(o=xs())!==n?i=s=[s,o]:(Ui=i,i=n),i===n&&(i=null),i!==n?(s=Ui,(o=eo())!==n&&(a=Ms())!==n?s=o=[o,a]:(Ui=s,s=n),s===n&&(s=null),s!==n&&(o=to())!==n?(Wi=t,t=r=Un(i,s)):(Ui=t,t=n)):(Ui=t,t=n)):(Ui=t,t=n),t}function Bs(){let t,r,i,s,o;return t=Ui,(r=function(){let t,r,i,s,o;if(t=Ui,35===e.charCodeAt(Ui)?(r=Wn,Ui++):(r=n,0===Zi&&rs(Hn)),r!==n)if(qn.test(e.charAt(Ui))?(i=e.charAt(Ui),Ui++):(i=n,0===Zi&&rs(Vn)),i!==n){for(s=[],Kn.test(e.charAt(Ui))?(o=e.charAt(Ui),Ui++):(o=n,0===Zi&&rs(Zn));o!==n;)s.push(o),Kn.test(e.charAt(Ui))?(o=e.charAt(Ui),Ui++):(o=n,0===Zi&&rs(Zn));s!==n?(Wi=t,t=r=Jn()):(Ui=t,t=n)}else Ui=t,t=n;else Ui=t,t=n;return t}())!==n?(i=Ui,(s=eo())!==n&&(o=Bs())!==n?i=s=[s,o]:(Ui=i,i=n),i===n&&(i=null),i!==n?(Wi=t,t=r=Yn(r,i)):(Ui=t,t=n)):(Ui=t,t=n),t}function js(){let t,r,i,s,o;if(Zi++,t=Ui,38===e.charCodeAt(Ui)?(r=Xn,Ui++):(r=n,0===Zi&&rs(Qn)),r!==n)if(qn.test(e.charAt(Ui))?(i=e.charAt(Ui),Ui++):(i=n,0===Zi&&rs(Vn)),i!==n){for(s=[],Kn.test(e.charAt(Ui))?(o=e.charAt(Ui),Ui++):(o=n,0===Zi&&rs(Zn));o!==n;)s.push(o),Kn.test(e.charAt(Ui))?(o=e.charAt(Ui),Ui++):(o=n,0===Zi&&rs(Zn));s!==n?(Wi=t,t=r=Jn()):(Ui=t,t=n)}else Ui=t,t=n;else Ui=t,t=n;return Zi--,t===n&&(r=n,0===Zi&&rs(Gn)),t}function Ps(){let e,t,r,i,s;return e=Ui,(t=js())!==n?(r=Ui,(i=eo())!==n&&(s=Ps())!==n?r=i=[i,s]:(Ui=r,r=n),r===n&&(r=null),r!==n?(Wi=e,e=t=Yn(t,r)):(Ui=e,e=n)):(Ui=e,e=n),e}function zs(){let e,t,r;return e=Ui,(t=eo())!==n&&(r=Bs())!==n?(Wi=e,e=t=er(r)):(Ui=e,e=n),e}function Ms(){let e,t,r;return e=Ui,(t=Ys())!==n?((r=zs())===n&&(r=null),r!==n?(Wi=e,e=t=or(t,r)):(Ui=e,e=n)):(Ui=e,e=n),e===n&&(e=Ui,(t=Gs())!==n?((r=zs())===n&&(r=null),r!==n?(Wi=e,e=t=ar(t,r)):(Ui=e,e=n)):(Ui=e,e=n),e===n&&(e=Ui,(t=Bs())!==n&&(Wi=e,t=lr(t)),e=t)),e}function Fs(){let t,r,i,s,o,a;return t=Ui,e.substr(Ui,4)===cr?(r=cr,Ui+=4):(r=n,0===Zi&&rs(hr)),r!==n?(i=Ui,(s=eo())!==n&&(o=Ms())!==n?i=s=[s,o]:(Ui=i,i=n),i===n&&(i=null),i!==n?(s=Ui,(o=eo())!==n&&(a=xs())!==n?s=o=[o,a]:(Ui=s,s=n),s===n&&(s=null),s!==n&&(o=to())!==n?(Wi=t,t=r=ur(i,s)):(Ui=t,t=n)):(Ui=t,t=n)):(Ui=t,t=n),t}function Ls(){let t,r,i,s,o,a,l,c,h,u;if(t=Ui,r=[],i=Ui,(s=Gs())===n&&(42===e.charCodeAt(Ui)?(s=K,Ui++):(s=n,0===Zi&&rs(Z))),s!==n&&(o=eo())!==n?i=s=[s,o]:(Ui=i,i=n),i!==n)for(;i!==n;)r.push(i),i=Ui,(s=Gs())===n&&(42===e.charCodeAt(Ui)?(s=K,Ui++):(s=n,0===Zi&&rs(Z))),s!==n&&(o=eo())!==n?i=s=[s,o]:(Ui=i,i=n);else r=n;if(r!==n)if(123===e.charCodeAt(Ui)?(i=rt,Ui++):(i=n,0===Zi&&rs(it)),i!==n){if(s=Ui,(o=Ds())!==n){for(a=[],l=Ui,44===e.charCodeAt(Ui)?(c=st,Ui++):(c=n,0===Zi&&rs(ot)),c!==n&&(h=eo())!==n&&(u=Ds())!==n?l=c=[c,h,u]:(Ui=l,l=n);l!==n;)a.push(l),l=Ui,44===e.charCodeAt(Ui)?(c=st,Ui++):(c=n,0===Zi&&rs(ot)),c!==n&&(h=eo())!==n&&(u=Ds())!==n?l=c=[c,h,u]:(Ui=l,l=n);a!==n?s=o=[o,a]:(Ui=s,s=n)}else Ui=s,s=n;s===n&&(s=null),s!==n?(125===e.charCodeAt(Ui)?(o=at,Ui++):(o=n,0===Zi&&rs(lt)),o!==n?(Wi=t,t=r=dr(r,s)):(Ui=t,t=n)):(Ui=t,t=n)}else Ui=t,t=n;else Ui=t,t=n;return t}function Ds(){let e,t,r,i;return e=Ui,t=Ui,(r=Hs())!==n&&(i=eo())!==n?t=r=[r,i]:(Ui=t,t=n),t===n&&(t=null),t!==n&&(r=Qs())!==n?(Wi=e,e=t=fr(t,r)):(Ui=e,e=n),e}function Us(){let t,r,i,s,o,a;if(t=Ui,e.substr(Ui,6)===pr?(r=pr,Ui+=6):(r=n,0===Zi&&rs(mr)),r!==n){if(i=[],s=Ui,(o=eo())!==n?(42===e.charCodeAt(Ui)?(a=K,Ui++):(a=n,0===Zi&&rs(Z)),a===n&&(a=Gs()),a!==n?s=o=[o,a]:(Ui=s,s=n)):(Ui=s,s=n),s!==n)for(;s!==n;)i.push(s),s=Ui,(o=eo())!==n?(42===e.charCodeAt(Ui)?(a=K,Ui++):(a=n,0===Zi&&rs(Z)),a===n&&(a=Gs()),a!==n?s=o=[o,a]:(Ui=s,s=n)):(Ui=s,s=n);else i=n;i!==n?((s=function(){let t,r,i,s,o,a,l,c,h,u,d;if(t=Ui,(r=eo())!==n)if(e.substr(Ui,7)===wr?(i=wr,Ui+=7):(i=n,0===Zi&&rs(Sr)),i!==n)if((s=eo())!==n)if((o=Gs())!==n){for(a=[],l=Ui,(c=eo())===n&&(c=null),c!==n?(44===e.charCodeAt(Ui)?(h=st,Ui++):(h=n,0===Zi&&rs(ot)),h!==n&&(u=eo())!==n&&(d=Gs())!==n?l=c=[c,h,u,d]:(Ui=l,l=n)):(Ui=l,l=n);l!==n;)a.push(l),l=Ui,(c=eo())===n&&(c=null),c!==n?(44===e.charCodeAt(Ui)?(h=st,Ui++):(h=n,0===Zi&&rs(ot)),h!==n&&(u=eo())!==n&&(d=Gs())!==n?l=c=[c,h,u,d]:(Ui=l,l=n)):(Ui=l,l=n);a!==n?(Wi=t,r=kr(o,a),t=r):(Ui=t,t=n)}else Ui=t,t=n;else Ui=t,t=n;else Ui=t,t=n;else Ui=t,t=n;return t}())===n&&(s=null),s!==n?(Wi=t,t=r=gr(i,s)):(Ui=t,t=n)):(Ui=t,t=n)}else Ui=t,t=n;return t}function Ws(){let e;return(e=function(){let e,t,r,i,s;return e=Ui,(t=Hs())!==n&&(r=eo())!==n&&(i=Qs())!==n&&(s=to())!==n?(Wi=e,t=Cr(t,i),e=t):(Ui=e,e=n),e}())===n&&(e=ks()),e}function Hs(){let t;return(t=function(){let t,r,i,s,o,a;if(t=Ui,e.substr(Ui,10)===He?(r=He,Ui+=10):(r=n,0===Zi&&rs(qe)),r!==n){for(i=[],s=eo();s!==n;)i.push(s),s=eo();if(i!==n)if((s=Ls())===n&&(s=bs()),s!==n){for(o=[],a=eo();a!==n;)o.push(a),a=eo();o!==n?(62===e.charCodeAt(Ui)?(a=H,Ui++):(a=n,0===Zi&&rs(q)),a!==n?(Wi=t,r=xr(s),t=r):(Ui=t,t=n)):(Ui=t,t=n)}else Ui=t,t=n;else Ui=t,t=n}else Ui=t,t=n;return t}())===n&&(t=function(){let t,r,i,s,o,a;if(t=Ui,91===e.charCodeAt(Ui)?(r=Pe,Ui++):(r=n,0===Zi&&rs(ze)),r!==n){for(i=[],s=eo();s!==n;)i.push(s),s=eo();if(i!==n)if((s=Hs())!==n){for(o=[],a=eo();a!==n;)o.push(a),a=eo();o!==n?(93===e.charCodeAt(Ui)?(a=Me,Ui++):(a=n,0===Zi&&rs(Fe)),a!==n?(Wi=t,r=Tr(s),t=r):(Ui=t,t=n)):(Ui=t,t=n)}else Ui=t,t=n;else Ui=t,t=n}else Ui=t,t=n;return t}())===n&&(t=qs())===n&&(t=function(){let t,r,i,s,o,a,l,c,h,u;if(t=Ui,40===e.charCodeAt(Ui)?(r=Lr,Ui++):(r=n,0===Zi&&rs(Dr)),r!==n)if((i=eo())===n&&(i=null),i!==n)if((s=qs())!==n){if(o=[],a=Ui,(l=eo())!==n?(e.substr(Ui,2)===Ur?(c=Ur,Ui+=2):(c=n,0===Zi&&rs(Wr)),c!==n&&(h=eo())!==n&&(u=qs())!==n?a=l=[l,c,h,u]:(Ui=a,a=n)):(Ui=a,a=n),a!==n)for(;a!==n;)o.push(a),a=Ui,(l=eo())!==n?(e.substr(Ui,2)===Ur?(c=Ur,Ui+=2):(c=n,0===Zi&&rs(Wr)),c!==n&&(h=eo())!==n&&(u=qs())!==n?a=l=[l,c,h,u]:(Ui=a,a=n)):(Ui=a,a=n);else o=n;o!==n?((a=eo())===n&&(a=null),a!==n?(41===e.charCodeAt(Ui)?(l=Hr,Ui++):(l=n,0===Zi&&rs(qr)),l!==n?(Wi=t,r=Vr(s,o),t=r):(Ui=t,t=n)):(Ui=t,t=n)):(Ui=t,t=n)}else Ui=t,t=n;else Ui=t,t=n;else Ui=t,t=n;return t}())===n&&(t=function(){let t,r,i,s,o,a,l,c,h,u;if(t=Ui,40===e.charCodeAt(Ui)?(r=Lr,Ui++):(r=n,0===Zi&&rs(Dr)),r!==n)if((i=eo())===n&&(i=null),i!==n)if((s=qs())!==n){for(o=[],a=Ui,(l=eo())===n&&(l=null),l!==n?(44===e.charCodeAt(Ui)?(c=st,Ui++):(c=n,0===Zi&&rs(ot)),c!==n?((h=eo())===n&&(h=null),h!==n&&(u=qs())!==n?a=l=[l,c,h,u]:(Ui=a,a=n)):(Ui=a,a=n)):(Ui=a,a=n);a!==n;)o.push(a),a=Ui,(l=eo())===n&&(l=null),l!==n?(44===e.charCodeAt(Ui)?(c=st,Ui++):(c=n,0===Zi&&rs(ot)),c!==n?((h=eo())===n&&(h=null),h!==n&&(u=qs())!==n?a=l=[l,c,h,u]:(Ui=a,a=n)):(Ui=a,a=n)):(Ui=a,a=n);o!==n?((a=eo())===n&&(a=null),a!==n?(41===e.charCodeAt(Ui)?(l=Hr,Ui++):(l=n,0===Zi&&rs(qr)),l!==n?(Wi=t,r=Kr(s,o),t=r):(Ui=t,t=n)):(Ui=t,t=n)):(Ui=t,t=n)}else Ui=t,t=n;else Ui=t,t=n;else Ui=t,t=n;return t}()),t}function qs(){let t,r;return t=Ui,e.substr(Ui,4)===Er?(r=Er,Ui+=4):(r=n,0===Zi&&rs(Rr)),r===n&&(e.substr(Ui,3)===Ar?(r=Ar,Ui+=3):(r=n,0===Zi&&rs(Ir)),r===n&&(e.substr(Ui,6)===Or?(r=Or,Ui+=6):(r=n,0===Zi&&rs($r)),r===n&&(e.substr(Ui,7)===Nr?(r=Nr,Ui+=7):(r=n,0===Zi&&rs(Br)),r===n&&(e.substr(Ui,5)===jr?(r=jr,Ui+=5):(r=n,0===Zi&&rs(Pr)),r===n&&(e.substr(Ui,6)===zr?(r=zr,Ui+=6):(r=n,0===Zi&&rs(Mr))))))),r!==n&&(Wi=t,r=Fr(r)),t=r}function Vs(){let t,r,i,s;if(Zi++,t=Ui,Zi++,r=Ui,i=[],32===e.charCodeAt(Ui)?(s=Qr,Ui++):(s=n,0===Zi&&rs(ei)),s!==n)for(;s!==n;)i.push(s),32===e.charCodeAt(Ui)?(s=Qr,Ui++):(s=n,0===Zi&&rs(ei));else i=n;return i!==n?(Wi=Ui,(s=(s=ti(i))?void 0:n)!==n?r=i=[i,s]:(Ui=r,r=n)):(Ui=r,r=n),Zi--,r!==n?(Ui=t,t=void 0):t=n,Zi--,t===n&&(r=n,0===Zi&&rs(Xr)),t}function Ks(){let t,r,i,s,o;for(Zi++,t=Ui,r=Ui,Zi++,i=Ui,s=[],32===e.charCodeAt(Ui)?(o=Qr,Ui++):(o=n,0===Zi&&rs(ei));o!==n;)s.push(o),32===e.charCodeAt(Ui)?(o=Qr,Ui++):(o=n,0===Zi&&rs(ei));if(s!==n?(Wi=Ui,(o=(o=ri(s))?void 0:n)!==n?i=s=[s,o]:(Ui=i,i=n)):(Ui=i,i=n),Zi--,i!==n?(Ui=r,r=void 0):r=n,r!==n){for(i=[],32===e.charCodeAt(Ui)?(s=Qr,Ui++):(s=n,0===Zi&&rs(ei));s!==n;)i.push(s),32===e.charCodeAt(Ui)?(s=Qr,Ui++):(s=n,0===Zi&&rs(ei));i!==n?t=r=[r,i]:(Ui=t,t=n)}else Ui=t,t=n;return Zi--,t===n&&(r=n,0===Zi&&rs(ni)),t}function Zs(){let t,r,i,s,o;for(Zi++,t=Ui,r=Ui,Zi++,i=Ui,s=[],32===e.charCodeAt(Ui)?(o=Qr,Ui++):(o=n,0===Zi&&rs(ei));o!==n;)s.push(o),32===e.charCodeAt(Ui)?(o=Qr,Ui++):(o=n,0===Zi&&rs(ei));if(s!==n?(Wi=Ui,(o=(o=si(s))?void 0:n)!==n?i=s=[s,o]:(Ui=i,i=n)):(Ui=i,i=n),Zi--,i!==n?(Ui=r,r=void 0):r=n,r!==n){for(i=[],32===e.charCodeAt(Ui)?(s=Qr,Ui++):(s=n,0===Zi&&rs(ei));s!==n;)i.push(s),32===e.charCodeAt(Ui)?(s=Qr,Ui++):(s=n,0===Zi&&rs(ei));i!==n?(Wi=t,t=r=b()):(Ui=t,t=n)}else Ui=t,t=n;return Zi--,t===n&&(r=n,0===Zi&&rs(ii)),t}function Js(){let t,r,i,s;if(Zi++,t=Ui,96===e.charCodeAt(Ui)?(r=ui,Ui++):(r=n,0===Zi&&rs(di)),r!==n){if(i=[],fi.test(e.charAt(Ui))?(s=e.charAt(Ui),Ui++):(s=n,0===Zi&&rs(pi)),s!==n)for(;s!==n;)i.push(s),fi.test(e.charAt(Ui))?(s=e.charAt(Ui),Ui++):(s=n,0===Zi&&rs(pi));else i=n;i!==n?(96===e.charCodeAt(Ui)?(s=ui,Ui++):(s=n,0===Zi&&rs(di)),s!==n?(Wi=t,t=r=mi(i)):(Ui=t,t=n)):(Ui=t,t=n)}else Ui=t,t=n;return Zi--,t===n&&(r=n,0===Zi&&rs(hi)),t}function Ys(){let t,r,i,s;if(Zi++,t=Ui,39===e.charCodeAt(Ui)?(r=yi,Ui++):(r=n,0===Zi&&rs(_i)),r!==n){if(i=[],bi.test(e.charAt(Ui))?(s=e.charAt(Ui),Ui++):(s=n,0===Zi&&rs(vi)),s!==n)for(;s!==n;)i.push(s),bi.test(e.charAt(Ui))?(s=e.charAt(Ui),Ui++):(s=n,0===Zi&&rs(vi));else i=n;i!==n?(39===e.charCodeAt(Ui)?(s=yi,Ui++):(s=n,0===Zi&&rs(_i)),s!==n?(Wi=t,t=r=wi(i)):(Ui=t,t=n)):(Ui=t,t=n)}else Ui=t,t=n;return Zi--,t===n&&(r=n,0===Zi&&rs(gi)),t}function Gs(){let t,r,i,s;if(Zi++,t=Ui,ki.test(e.charAt(Ui))?(r=e.charAt(Ui),Ui++):(r=n,0===Zi&&rs(Ci)),r!==n){for(i=[],Ti.test(e.charAt(Ui))?(s=e.charAt(Ui),Ui++):(s=n,0===Zi&&rs(xi));s!==n;)i.push(s),Ti.test(e.charAt(Ui))?(s=e.charAt(Ui),Ui++):(s=n,0===Zi&&rs(xi));i!==n?(Wi=t,t=r=b()):(Ui=t,t=n)}else Ui=t,t=n;return Zi--,t===n&&(r=n,0===Zi&&rs(Si)),t}function Xs(){let t,r,i,s,o;if(Zi++,t=Ui,r=Ui,Zi++,i=function(){let t,r,i,s;return t=Ui,(r=As())===n&&(r=fs())===n&&(r=$s())===n&&(e.substr(Ui,8)===ge?(r=ge,Ui+=8):(r=n,0===Zi&&rs(ye)),r===n&&(e.substr(Ui,6)===Gt?(r=Gt,Ui+=6):(r=n,0===Zi&&rs(Xt)),r===n&&(e.substr(Ui,6)===P?(r=P,Ui+=6):(r=n,0===Zi&&rs(z)),r===n&&(e.substr(Ui,9)===L?(r=L,Ui+=9):(r=n,0===Zi&&rs(D)),r===n&&(e.substr(Ui,6)===pr?(r=pr,Ui+=6):(r=n,0===Zi&&rs(mr)),r===n&&(e.substr(Ui,7)===Fn?(r=Fn,Ui+=7):(r=n,0===Zi&&rs(Ln)),r===n&&(e.substr(Ui,6)===Vt?(r=Vt,Ui+=6):(r=n,0===Zi&&rs(Kt))))))))),r!==n?(oi.test(e.charAt(Ui))?(i=e.charAt(Ui),Ui++):(i=n,0===Zi&&rs(ai)),i===n&&(i=Ui,Zi++,e.length>Ui?(s=e.charAt(Ui),Ui++):(s=n,0===Zi&&rs(li)),Zi--,s===n?i=void 0:(Ui=i,i=n)),i!==n?(Wi=t,t=r=ci(r)):(Ui=t,t=n)):(Ui=t,t=n),t}(),Zi--,i===n?r=void 0:(Ui=r,r=n),r!==n)if(Ri.test(e.charAt(Ui))?(i=e.charAt(Ui),Ui++):(i=n,0===Zi&&rs(Ai)),i!==n){for(s=[],Ti.test(e.charAt(Ui))?(o=e.charAt(Ui),Ui++):(o=n,0===Zi&&rs(xi));o!==n;)s.push(o),Ti.test(e.charAt(Ui))?(o=e.charAt(Ui),Ui++):(o=n,0===Zi&&rs(xi));s!==n?(Wi=t,t=r=b()):(Ui=t,t=n)}else Ui=t,t=n;else Ui=t,t=n;return Zi--,t===n&&(r=n,0===Zi&&rs(Ei)),t}function Qs(){let t,r,i,s;if(Zi++,t=Ui,Ri.test(e.charAt(Ui))?(r=e.charAt(Ui),Ui++):(r=n,0===Zi&&rs(Ai)),r!==n){for(i=[],Ti.test(e.charAt(Ui))?(s=e.charAt(Ui),Ui++):(s=n,0===Zi&&rs(xi));s!==n;)i.push(s),Ti.test(e.charAt(Ui))?(s=e.charAt(Ui),Ui++):(s=n,0===Zi&&rs(xi));i!==n?(Wi=t,t=r=b()):(Ui=t,t=n)}else Ui=t,t=n;return Zi--,t===n&&(r=n,0===Zi&&rs(Ii)),t}function eo(){let t,r;if(Zi++,t=[],32===e.charCodeAt(Ui)?(r=Qr,Ui++):(r=n,0===Zi&&rs(ei)),r!==n)for(;r!==n;)t.push(r),32===e.charCodeAt(Ui)?(r=Qr,Ui++):(r=n,0===Zi&&rs(ei));else t=n;return Zi--,t===n&&(r=n,0===Zi&&rs(Oi)),t}function to(){let t,r,i,s,o;for(Zi++,t=Ui,r=[],Ni.test(e.charAt(Ui))?(i=e.charAt(Ui),Ui++):(i=n,0===Zi&&rs(Bi));i!==n;)r.push(i),Ni.test(e.charAt(Ui))?(i=e.charAt(Ui),Ui++):(i=n,0===Zi&&rs(Bi));if(r!==n?(i=Ui,Zi++,e.length>Ui?(s=e.charAt(Ui),Ui++):(s=n,0===Zi&&rs(li)),Zi--,s===n?i=void 0:(Ui=i,i=n),i!==n?t=r=[r,i]:(Ui=t,t=n)):(Ui=t,t=n),t===n){for(t=Ui,r=[],Ni.test(e.charAt(Ui))?(i=e.charAt(Ui),Ui++):(i=n,0===Zi&&rs(Bi));i!==n;)r.push(i),Ni.test(e.charAt(Ui))?(i=e.charAt(Ui),Ui++):(i=n,0===Zi&&rs(Bi));if(r!==n)if(e.substr(Ui,2)===ji?(i=ji,Ui+=2):(i=n,0===Zi&&rs(Pi)),i!==n){for(s=[],y.test(e.charAt(Ui))?(o=e.charAt(Ui),Ui++):(o=n,0===Zi&&rs(_));o!==n;)s.push(o),y.test(e.charAt(Ui))?(o=e.charAt(Ui),Ui++):(o=n,0===Zi&&rs(_));s!==n&&(o=to())!==n?t=r=[r,i,s,o]:(Ui=t,t=n)}else Ui=t,t=n;else Ui=t,t=n;if(t===n){for(t=Ui,r=[],Ni.test(e.charAt(Ui))?(i=e.charAt(Ui),Ui++):(i=n,0===Zi&&rs(Bi));i!==n;)r.push(i),Ni.test(e.charAt(Ui))?(i=e.charAt(Ui),Ui++):(i=n,0===Zi&&rs(Bi));r!==n&&(i=no())!==n?((s=to())===n&&(s=null),s!==n?t=r=[r,i,s]:(Ui=t,t=n)):(Ui=t,t=n)}}return Zi--,t===n&&(r=n,0===Zi&&rs($i)),t}function no(){let t,r,i,s;return Zi++,t=Ui,13===e.charCodeAt(Ui)?(r=Mi,Ui++):(r=n,0===Zi&&rs(Fi)),r===n&&(r=null),r!==n?(10===e.charCodeAt(Ui)?(i=Li,Ui++):(i=n,0===Zi&&rs(Di)),i!==n?(13===e.charCodeAt(Ui)?(s=Mi,Ui++):(s=n,0===Zi&&rs(Fi)),s===n&&(s=null),s!==n?t=r=[r,i,s]:(Ui=t,t=n)):(Ui=t,t=n)):(Ui=t,t=n),Zi--,t===n&&(r=n,0===Zi&&rs(zi)),t}let ro=\"\",io=\"\";const so=[],oo=()=>({kind:\"handle-ref\",id:null,name:null,tags:[],location:Yi()});function ao(e){return e[1].map(e=>e[1])}function lo(e,t,n){if(null!==e){const n=t(e);if(null!==n)return n}return null===n?null:n}if((qi=i())!==n&&Ui===e.length)return qi;throw qi!==n&&Ui<e.length&&rs({type:\"end\"}),is(Ki,Vi<e.length?e.charAt(Vi):null,Vi<e.length?ns(Vi,Vi+1):ns(Vi,Vi))};var xt,Et=n(51),Rt=n.n(Et);async function At(e){const t=Rt.a.createHash(\"sha1\");return t.update(e),Promise.resolve().then(()=>t.digest(\"hex\"))}\n/**\n * @license\n * Copyright (c) 2017 Google Inc. All rights reserved.\n * This code may only be used under the BSD style license found at\n * http://polymer.github.io/LICENSE.txt\n * Code distributed by Google as part of this project is also\n * subject to an additional IP rights grant found at\n * http://polymer.github.io/PATENTS.txt\n */class It{constructor(){this.storageKey=null,this.name=null}apply(e){e.forEach(e=>{this[e.key]=e.value})}}function Ot(e,t){return e===t?0:null===e?-1:1}function $t(e,t){return null==e||null==t?Ot(e,t):e.localeCompare(t)}function Nt(e,t){return null==e||null==t?Ot(e,t):e-t}function Bt(e,t,n){if(d()(null!=e),d()(null!=t),e.length!==t.length)return Nt(e.length,t.length);for(let r=0;r<e.length;r++){let i;if(0!==(i=n(e[r],t[r])))return i}return 0}function jt(e,t){return null==e||null==t?Ot(e,t):e._compareTo(t)}class Pt{}class zt extends Pt{constructor(e,t){super(),this.particle=e,this.connection=t}_clone(e){return new zt(this.particle,this.connection)}_compareTo(e){let t;return 0!==(t=$t(this.particle.name,e.particle.name))?t:0!==(t=$t(this.connection,e.connection))?t:0}toString(e){return this.connection?`${this.particle.name}.${this.connection}`:`${this.particle.name}`}}class Mt extends Pt{constructor(e,t){super(),d()(e),this.instance=e,this.connection=t}_clone(e){return new Mt(e.get(this.instance),this.connection)}_compareTo(e){let t;return 0!==(t=jt(this.instance,e.instance))?t:0!==(t=$t(this.connection,e.connection))?t:0}toString(e){return this.connection?`${e.get(this.instance)}.${this.connection}`:`${e.get(this.instance)}`}}class Ft extends Pt{constructor(e){super(),this.handle=e}_clone(e){return new Ft(this.handle)}_compareTo(e){let t;return 0!==(t=$t(this.handle.localName,e.handle.localName))?t:0}toString(e){return`${this.handle.localName}`}}class Lt extends Pt{constructor(e){super(),this.tags=e}_clone(e){return new Lt(this.tags)}_compareTo(e){let t;return 0!==(t=Bt(this.tags,e.tags,$t))?t:0}toString(e){return this.tags.map(e=>`#${e}`).join(\" \")}}class Dt{constructor(e,t,n,r){d()(n),d()(r),this.from=e,this.to=t,this.direction=n,this.type=r,Object.freeze(this)}_copyInto(e,t){if(\"constraint\"===this.type){if(!(this.from instanceof Mt||this.to instanceof Mt))return e.newConnectionConstraint(this.from._clone(),this.to._clone(),this.direction);d()(!1)}return e.newObligation(this.from._clone(t),this.to._clone(t),this.direction)}_compareTo(e){let t;return 0!==(t=this.from._compareTo(e.from))?t:0!==(t=this.to._compareTo(e.to))?t:0!==(t=$t(this.direction,e.direction))?t:0}toString(e,t){let n=\"\";return t&&!0===t.showUnresolved&&\"obligation\"===this.type&&(n=\" // unresolved obligation\"),`${this.from.toString(e)} ${this.direction} ${this.to.toString(e)}${n}`}}class Ut{constructor(e){this._id=null,this._localName=void 0,this._tags=[],this._type=void 0,this._fate=null,this._originalFate=null,this._originalId=null,this._connections=[],this._mappedType=void 0,this._storageKey=void 0,this._pattern=void 0,this._immediateValue=void 0,d()(e),this._recipe=e}_copyInto(e,t,n){let r=void 0;return null!==this._id&&[\"map\",\"use\",\"copy\"].includes(this.fate)&&(r=e.findHandle(this._id)),null==r&&((r=e.newHandle())._id=this._id,r._tags=[...this._tags],r._type=this._type?this._type._cloneWithResolutions(n):void 0,r._fate=this._fate,r._originalFate=this._originalFate,r._originalId=this._originalId,r._mappedType=this._mappedType,r._storageKey=this._storageKey,r._immediateValue=this._immediateValue,r._connections=[],r._pattern=this._pattern),r}mergeInto(e){for(d()(this.recipe===e.recipe,\"Cannot merge handles from different recipes.\");this.connections.length>0;){const[t]=this.connections;t.disconnectHandle(),t.connectToHandle(e)}e._immediateValue=this._immediateValue,e.tags=e.tags.concat(this.tags),e.recipe.removeHandle(this),e.fate=this._mergedFate([this.fate,e.fate])}_mergedFate(e){return d()(e.length>0,\"Cannot merge empty fates list\"),d()(!e.includes(\"map\")&&!e.includes(\"copy\"),\"Merging map/copy not supported yet\"),e.every(e=>\"use\"===e)?\"use\":\"create\"}_startNormalize(){this._localName=null,this._tags.sort()}_finishNormalize(){for(const e of this._connections)d()(Object.isFrozen(e),`Handle connection '${e.name}' is not frozen.`);this._connections.sort(jt),Object.freeze(this)}_compareTo(e){let t;return 0!==(t=$t(this._id,e._id))?t:0!==(t=$t(this._localName,e._localName))?t:0!==(t=Bt(this._tags,e._tags,$t))?t:0!==(t=$t(this.fate,e.fate))?t:0!==(t=$t(this._immediateValue&&this._immediateValue.toString()||\"\",e._immediateValue&&e._immediateValue.toString()||\"\"))?t:0}get fate(){return this._fate||\"?\"}set fate(e){null==this._originalFate&&(this._originalFate=this._fate),this._fate=e}get originalFate(){return this._originalFate||\"?\"}get originalId(){return this._originalId}get recipe(){return this._recipe}get tags(){return this._tags}set tags(e){this._tags=e}get type(){return this._type}get id(){return this._id}set id(e){this._originalId||(this._originalId=this._id),this._id=e}mapToStorage(e){if(!e)throw new Error(\"Cannot map to undefined storage\");this._id=e.id,this._originalId=e.originalId,this._type=void 0,this._mappedType=e.type,this._storageKey=e.storageKey}get localName(){return this._localName}set localName(e){this._localName=e}get connections(){return this._connections}get storageKey(){return this._storageKey}set storageKey(e){this._storageKey=e}get pattern(){return this._pattern}set pattern(e){this._pattern=e}get mappedType(){return this._mappedType}set mappedType(e){this._mappedType=e}get immediateValue(){return this._immediateValue}set immediateValue(e){this._immediateValue=e}static effectiveType(e,t){const n=new Map,r=t.filter(e=>null!=e.type).map(e=>({type:e.type._cloneWithResolutions(n),direction:e.direction}));return Xe.processTypeList(e?e._cloneWithResolutions(n):null,r)}static resolveEffectiveType(e,t){const n=t.filter(e=>null!=e.type).map(e=>({type:e.type,direction:e.direction}));return Xe.processTypeList(e,n)}_isValid(e){const t=new Set;for(const n of this._connections){if(\"map\"===this.fate&&[\"out\",\"inout\"].includes(n.direction))return e&&e.errors&&e.errors.set(this,`Invalid fate '${this.fate}' for handle '${this}'; it is used for '${n.direction}' ${n.getQualifiedName()} connection`),!1;n.tags.forEach(e=>t.add(e))}const n=Ut.resolveEffectiveType(this._mappedType,this._connections);return n?(this._type=n,this._tags.forEach(e=>t.add(e)),this._tags=[...t],!0):(e&&e.errors&&e.errors.set(this,`Type validations failed for handle '${this}'`),!1)}isResolved(e){d()(Object.isFrozen(this));let t=!0;if(this.type){let n=!0;\"create\"!==this.fate&&\"`slot\"!==this.fate||(n=!1),(n&&!this.type.isResolved()||!this.type.canEnsureResolved())&&(e&&e.details.push(\"unresolved type\"),t=!1)}else e&&e.details.push(\"missing type\"),t=!1;switch(this.fate){case\"?\":e&&e.details.push(\"missing fate\"),t=!1;break;case\"copy\":case\"map\":case\"use\":e&&null===this.id&&e.details.push(\"missing id\"),t=t&&null!==this.id;break;case\"`slot\":case\"create\":break;default:throw e&&e.details.push(`invalid fate ${this.fate}`),new Error(`Unexpected fate: ${this.fate}`)}return t}toString(e,t){if(this._immediateValue)return;t=t||{};const n=[];if(n.push(this.fate),this.id&&n.push(`'${this.id}'`),n.push(...this.tags.map(e=>`#${e}`)),n.push(`as ${e&&e.get(this)||this.localName}`),this.type)if(n.push(\"//\"),this.type.isResolved())n.push(this.type.resolvedType().toString({hideFields:null==t.hideFields||t.hideFields}));else if(n.push(this.type.toString()),t.showUnresolved&&this.type.canEnsureResolved()){const e=De.fromLiteral(this.type.toLiteral());e.maybeEnsureResolved(),n.push(\"//\"),n.push(e.resolvedType().toString({hideFields:null==t.hideFields||t.hideFields}))}if(t.showUnresolved){const e={details:[]};this.isResolved(e)||n.push(` // unresolved handle: ${e.details.join(\", \")}`)}return n.join(\" \")}findConnectionByDirection(e){return this._connections.find(t=>t.direction===e)}}class Wt{constructor(e,t){this._tags=[],this.resolvedType=void 0,this._direction=void 0,this._handle=void 0,d()(t),d()(t.recipe),this._recipe=t.recipe,this._name=e,this._particle=t}_clone(e,t){if(t.has(this))return t.get(this);const n=new Wt(this._name,e);return n._tags=[...this._tags],n.resolvedType=this.resolvedType,n._direction=this._direction,null!=this._handle&&(n._handle=t.get(this._handle),d()(void 0!==n._handle),n._handle.connections.push(n)),t.set(this,n),n}cloneTypeWithResolutions(e){this.resolvedType&&(this.resolvedType=this.resolvedType._cloneWithResolutions(e))}_normalize(){this._tags.sort(),Object.freeze(this)}_compareTo(e){let t;return 0!==(t=jt(this._particle,e._particle))?t:0!==(t=$t(this._name,e._name))?t:0!==(t=Bt(this._tags,e._tags,$t))?t:0!==(t=jt(this._handle,e._handle))?t:0!==(t=$t(this._direction,e._direction))?t:0}get recipe(){return this._recipe}get name(){return this._name}getQualifiedName(){return`${this.particle.name}::${this.name}`}get tags(){return this._tags}get type(){if(this.resolvedType)return this.resolvedType;const e=this.spec;return e?e.type:null}get direction(){if(this._direction)return this._direction;const e=this.spec;return e?e.direction:null}get isInput(){return\"in\"===this.direction||\"inout\"===this.direction}get isOutput(){return\"out\"===this.direction||\"inout\"===this.direction}get handle(){return this._handle}get particle(){return this._particle}set tags(e){this._tags=e}set type(e){this.resolvedType=e,this._resetHandleType()}set direction(e){this._direction=e,this._resetHandleType()}get spec(){return null==this.particle.spec?null:this.particle.spec.handleConnectionMap.get(this.name)}get isOptional(){return null!=this.spec&&this.spec.isOptional}_isValid(e){if(this.direction&&![\"in\",\"out\",\"inout\",\"host\",\"`consume\",\"`provide\"].includes(this.direction))return e&&e.errors&&e.errors.set(this,`Invalid direction '${this.direction}' for handle connection '${this.getQualifiedName()}'`),!1;if(this.particle.spec&&this.name){const t=this.spec;if(!t)return e&&e.errors&&e.errors.set(this,`Connection ${this.name} is not defined by ${this.particle.name}.`),!1;if(this.direction!==t.direction&&(![\"in\",\"out\"].includes(this.direction)||\"inout\"!==t.direction))return e&&e.errors&&e.errors.set(this,`Direction '${this.direction}' for handle connection '${this.getQualifiedName()}' doesn't match particle spec's direction '${t.direction}'`),!1;if(this.resolvedType){if(!t.isCompatibleType(this.resolvedType))return e&&e.errors&&e.errors.set(this,`Type '${this.resolvedType.toString()} for handle connection '${this.getQualifiedName()}' doesn't match particle spec's type '${t.type.toString()}'`),!1}else this.resolvedType=t.type}return!0}isResolved(e){let t;return d()(Object.isFrozen(this)),!this.spec||!this.spec.parentConnection||(t=this.particle.connections[this.spec.parentConnection.name])&&t.handle?this.handle?this.direction?!!this.type||(e&&(e.details=\"missing type\"),!1):(e&&(e.details=\"missing direction\"),!1):!!this.isOptional||(e&&(e.details=\"missing handle\"),!1):(e&&(e.details=\"parent connection missing handle\"),!1)}_resetHandleType(){this._handle&&(this._handle._type=void 0)}connectToHandle(e){d()(e.recipe===this.recipe),this._handle=e,this._resetHandleType(),this._handle.connections.push(this)}disconnectHandle(){const e=this._handle.connections.indexOf(this);d()(e>=0),this._handle.connections.splice(e,1),this._handle=void 0}toString(e,t){const n=[];return n.push(this.name||\"*\"),n.push({in:\"<-\",out:\"->\",inout:\"=\",host:\"=\",\"`consume\":\"<-\",\"`provide\":\"->\"}[this.direction]||this.direction||\"=\"),this.handle&&(this.handle.immediateValue?n.push(this.handle.immediateValue.name):n.push(`${e&&e.get(this.handle)||this.handle.localName}`)),n.push(...this.tags.map(e=>`#${e}`)),t&&t.showUnresolved&&(this.isResolved(t)||n.push(`// unresolved handle-connection: ${t.details}`)),n.join(\" \")}findSpecsForUnnamedHandles(){return this.particle.spec.handleConnections.filter(e=>!e.isOptional&&Xe.compareTypes({type:this.handle.type},{type:e.type})&&!this.particle.getConnectionByName(e.name))}}class Ht{constructor(e,t){this._targetSlot=void 0,this._providedSlots={},this._tags=[],d()(t),d()(t.recipe),d()(e),this._recipe=t.recipe,this._particle=t,this._name=e}remove(){this._particle.removeSlotConnection(this)}get recipe(){return this._recipe}get particle(){return this._particle}get name(){return this._name}getQualifiedName(){return`${this.particle.name}::${this.name}`}get targetSlot(){return this._targetSlot}set targetSlot(e){this._targetSlot=e}get providedSlots(){return this._providedSlots}get tags(){return this._tags}set tags(e){this._tags=e}getSlotSpec(){return this.particle.spec&&this.particle.spec.getSlotSpec(this.name)}connectToSlot(e){d()(e),d()(!this.targetSlot),d()(this.recipe instanceof Jt||this.recipe===e.recipe,\"Cannot connect to slot from different recipe\"),this._targetSlot=e,e.consumeConnections.push(this)}disconnectFromSlot(){this._targetSlot&&(this._targetSlot.removeConsumeConnection(this),this._targetSlot=void 0)}_clone(e,t){if(t.has(this))return t.get(this);const n=e.addSlotConnectionAsCopy(this.name);return n.tags=this.tags,t.set(this,n),n}_normalize(){const e={};for(const t of Object.keys(this._providedSlots).sort())e[t]=this._providedSlots[t];this._providedSlots=e,Object.freeze(this)}_compareTo(e){let t;return 0!==(t=$t(this.name,e.name))?t:0!==(t=jt(this._targetSlot,e._targetSlot))?t:0!==(t=jt(this._particle,e._particle))?t:0}_isValid(e){return!this._targetSlot||!this._targetSlot.sourceConnection||this._targetSlot===this._targetSlot.sourceConnection.providedSlots[this._targetSlot.name]||(e&&e.errors&&e.errors.set(this,`Invalid target slot '${this._targetSlot.name}' for slot connection '${this.name}' of particle ${this.particle.name}`),!1)}isResolved(e){return d()(Object.isFrozen(this)),this.name?this.particle?null!=this.getSlotSpec()&&!this.getSlotSpec().isRequired||this.targetSlot&&(this.targetSlot.id||this.targetSlot.sourceConnection.isConnected())?!this.targetSlot||(null==this.getSlotSpec()||this.getSlotSpec().provideSlotConnections.every(t=>!t.isRequired||0!==this.providedSlots[t.name].consumeConnections.length||(e&&(e.details=\"missing consuming slot\"),!1))):(e&&(e.details=\"missing target-slot\"),!1):(e&&(e.details=\"missing particle\"),!1):(e&&(e.details=\"missing name\"),!1)}isConnectedToInternalSlot(){return this.targetSlot&&!!this.targetSlot.sourceConnection}isConnectedToRemoteSlot(){return this.targetSlot&&!!this.targetSlot.id}isConnected(){return this.isConnectedToInternalSlot()||this.isConnectedToRemoteSlot()}toString(e,t){const n=[];n.push(\"consume\"),n.push(`${this.name}`),this.targetSlot&&n.push(`as ${e&&e.get(this.targetSlot)||this.targetSlot.localName}`),t&&t.showUnresolved&&(this.isResolved(t)||n.push(`// unresolved slot-connection: ${t.details}`));const r=[];return r.push(n.join(\" \")),Object.keys(this.providedSlots).forEach(t=>{const n=this.providedSlots[t],i=[];if(i.push(\"  provide\"),this.getSlotSpec()){const e=this.particle.getSlotSpecByName(t);d()(e,`Cannot find providedSlotSpec for ${t}`)}i.push(`${t} as ${e&&e.get(n)||n}`),r.push(i.join(\" \"))}),r.join(\"\\n\")}}class qt{constructor(e,t){this._id=void 0,this._localName=void 0,this.spec=void 0,this._verbs=[],this._connections={},this._unnamedConnections=[],this._consumedSlotConnections={},d()(e),this._recipe=e,this._name=t}_copyInto(e,t,n){const r=e.newParticle(this._name);r._id=this._id,r._verbs=[...this._verbs],r.spec=this.spec?this.spec.cloneWithResolutions(n):void 0,Object.keys(this._connections).forEach(e=>{r._connections[e]=this._connections[e]._clone(r,t)}),r._unnamedConnections=this._unnamedConnections.map(e=>e._clone(r,t)),r._cloneConnectionRawTypes(n);for(const[n,i]of Object.entries(this.consumedSlotConnections)){r.consumedSlotConnections[n]=i._clone(r,t),t.has(i.targetSlot)&&(d()(e instanceof Jt),r.consumedSlotConnections[n].connectToSlot(t.get(i.targetSlot)),-1===r.recipe.slots.indexOf(t.get(i.targetSlot))&&r.recipe.slots.push(t.get(i.targetSlot)));for(const[s,o]of Object.entries(i.providedSlots))if(t.has(o)){d()(e instanceof Jt);const i=t.get(o);i.sourceConnection=r.consumedSlotConnections[n],r.consumedSlotConnections[n].providedSlots[s]=i,-1===r.recipe.slots.indexOf(i)&&r.recipe.slots.push(i)}}return r}_cloneConnectionRawTypes(e){for(const t of Object.values(this._connections))t.cloneTypeWithResolutions(e);for(const t of this._unnamedConnections)t.cloneTypeWithResolutions(e)}_startNormalize(){this._localName=null,this._verbs.sort();const e={};for(const t of Object.keys(this._connections).sort())e[t]=this._connections[t];this._connections=e;const t={};for(const e of Object.keys(this._consumedSlotConnections).sort())t[e]=this._consumedSlotConnections[e];this._consumedSlotConnections=t}_finishNormalize(){this._unnamedConnections.sort(jt),Object.freeze(this)}_compareTo(e){let t;return 0!==(t=$t(this._id?this._id.toString():\"\",e._id?e._id.toString():\"\"))?t:0!==(t=$t(this._name,e._name))?t:0!==(t=$t(this._localName,e._localName))?t:0!==(t=Bt(this._verbs,e._verbs,$t))?t:0}matches(e){if(this.name&&e.name&&this.name!==e.name)return!1;for(const[t,n]of Object.entries(this.consumedSlotConnections)){if(null==e.consumedSlotConnections[t]||null==e.consumedSlotConnections[t].targetSlot)return!1;if(n.targetSlot&&n.targetSlot.id&&n.targetSlot.id!==e.consumedSlotConnections[t].targetSlot.id)return!1;for(const r of Object.keys(n.providedSlots)){const i=n.providedSlots[r],s=e.consumedSlotConnections[t].providedSlots[r];if(null==s||i.id&&s.id&&i.id!==s.id)return!1}}return!0}_isValid(e){return!this.spec||(!(!this.name&&!this.primaryVerb)||(e&&e.errors&&e.errors.set(this,\"Particle has no name and no verb\"),!1))}isResolved(e){if(d()(Object.isFrozen(this)),!this.spec)return e&&e.showUnresolved&&(e.details=\"missing spec\"),!1;if(this.spec.slotConnections.size>0){if(0===Object.values(this.consumedSlotConnections).filter(e=>void 0!==e.targetSlot).length)return e&&e.showUnresolved&&(e.details=\"unfullfilled slot connections\"),!1}if(!this.spec)return e&&e.showUnresolved&&(e.details=\"missing spec\"),!1;const t=this.getUnboundConnections().filter(e=>{let t=e.parentConnection;for(;null!==t;){if(!this.connections[t.name])return!1;t=t.parentConnection}return!0});return t.length>0?(e&&e.showUnresolved&&(e.details=`unresolved connections: ${t.map(e=>e.name).join(\", \")}`),!1):0===this.unnamedConnections.length||(e&&e.showUnresolved&&(e.details=`${this.unnamedConnections.length} unnamed connections`),!1)}get recipe(){return this._recipe}get localName(){return this._localName}set localName(e){this._localName=e}get id(){return this._id}set id(e){d()(!this._id,\"Particle ID can only be set once.\"),this._id=e}get name(){return this._name}set name(e){this._name=e}get connections(){return this._connections}get unnamedConnections(){return this._unnamedConnections}get consumedSlotConnections(){return this._consumedSlotConnections}get primaryVerb(){return this._verbs.length>0?this._verbs[0]:void 0}set verbs(e){this._verbs=e}addUnnamedConnection(){const e=new Wt(void 0,this);return this._unnamedConnections.push(e),e}addConnectionName(e){return d()(e,\"Cannot create connection with no name\"),d()(null==this._connections[e]),this._connections[e]=new Wt(e,this),this._connections[e]}allConnections(){return Object.values(this._connections).concat(this._unnamedConnections)}ensureConnectionName(e){return this._connections[e]||this.addConnectionName(e)}getConnectionByName(e){return this._connections[e]}nameConnection(e,t){d()(!this._connections[t],`Connection \"${t}\" already has a handle`);const n=this._unnamedConnections.indexOf(e);d()(n>=0,`Cannot name '${t}' nonexistent unnamed connection.`),e._name=t;const r=this.spec.getConnectionByName(t);e.type=r.type,e.direction!==r.direction&&(d()(\"inout\"===e.direction,`Unnamed connection cannot adjust direction ${e.direction} to ${t}'s direction ${r.direction}`),e.direction=r.direction),this._connections[t]=e,this._unnamedConnections.splice(n,1)}getUnboundConnections(e){return this.spec.handleConnections.filter(t=>!t.isOptional&&!this.getConnectionByName(t.name)&&(!e||Xe.compareTypes({type:e},{type:t.type})))}addSlotConnection(e){d()(!(e in this._consumedSlotConnections),\"slot connection already exists\"),d()(!this.spec||this.spec.slotConnections.has(e),\"slot connection not in particle spec\");const t=new Ht(e,this);this._consumedSlotConnections[e]=t;const n=this.getSlotSpecByName(e);return n&&n.provideSlotConnections.forEach(e=>{const n=this.recipe.newSlot(e.name);n.sourceConnection=t,t.providedSlots[e.name]=n}),t}addSlotConnectionAsCopy(e){const t=new Ht(e,this);return this._consumedSlotConnections[e]=t,t}removeSlotConnection(e){this._consumedSlotConnections[e.name]=null,e.disconnectFromSlot()}remove(){this.recipe.removeParticle(this)}getSlotConnectionBySpec(e){return Object.values(this._consumedSlotConnections).find(t=>t.getSlotSpec()===e)}getSlotSpecByName(e){if(!this.spec)return;const t=this.spec.slotConnections.get(e);if(t)return t;for(const t of this.spec.slotConnections.values())for(const n of t.provideSlotConnections)if(n.name===e)return n}getSlotConnectionByName(e){return this._consumedSlotConnections[e]}getProvidedSlotByName(e,t){return this.consumedSlotConnections[e]&&this.consumedSlotConnections[e].providedSlots[t]}getSlotSpecs(){return this.spec?this.spec.slotConnections:new Map}toString(e,t){let n=[];this.name?(n.push(this.name),n.push(`as ${e&&e.get(this)||this.localName}`),this.primaryVerb&&this.primaryVerb!==this.name&&n.push(`// verb=${this.primaryVerb}`)):n.push(`&${this.primaryVerb}`),t&&t.showUnresolved&&(this.isResolved(t)||n.push(`// unresolved particle: ${t.details}`)),n=[n.join(\" \")];for(const r of this.unnamedConnections)n.push(r.toString(e,t).replace(/^|(\\n)/g,\"$1  \"));for(const r of Object.values(this.connections))n.push(r.toString(e,t).replace(/^|(\\n)/g,\"$1  \"));for(const r of Object.values(this._consumedSlotConnections))n.push(r.toString(e,t).replace(/^|(\\n)/g,\"$1  \"));return n.join(\"\\n\")}}class Vt{constructor(e,t){d()(e),this._phrase=e;const n=this.phrase.toLowerCase().split(/[^a-z0-9]/g);this._unresolvedTokens=[],(t||n).forEach(e=>this._unresolvedTokens.push(e)),this._resolvedTokens=n.slice();for(const e of this.unresolvedTokens){const t=this._resolvedTokens.indexOf(e);t>=0&&this._resolvedTokens.splice(t,1)}d()(n.length===this.unresolvedTokens.length+this.resolvedTokens.length)}_append(e,t,n){this._phrase.length>0&&(this._phrase=this.phrase.concat(\" \")),this._phrase=this._phrase.concat(e),n.forEach(e=>this._resolvedTokens.push(e)),t.forEach(e=>this._unresolvedTokens.push(e))}get phrase(){return this._phrase}get unresolvedTokens(){return this._unresolvedTokens}get resolvedTokens(){return this._resolvedTokens}resolveToken(e){const t=this.unresolvedTokens.indexOf(e.toLowerCase());d()(t>=0,`Cannot resolved nonexistent token ${e}`),this._unresolvedTokens.splice(t,1),this._resolvedTokens.push(e.toLowerCase())}isValid(){return this._unresolvedTokens.length>0||this._resolvedTokens.length>0}isResolved(){return d()(Object.isFrozen(this)),this._resolvedTokens.length>0}_normalize(){this._unresolvedTokens.sort(),this._resolvedTokens.sort(),Object.freeze(this)}_copyInto(e){return e.search?e.search._append(this.phrase,this.unresolvedTokens,this.resolvedTokens):(e.search=new Vt(this.phrase,this.unresolvedTokens),d()(e.search.resolvedTokens.length===this.resolvedTokens.length,`${e.search.resolvedTokens} is not same as ${this.resolvedTokens}`)),d()(this.resolvedTokens.every(t=>e.search.resolvedTokens.indexOf(t)>=0)&&this.unresolvedTokens.every(t=>e.search.unresolvedTokens.indexOf(t)>=0)),e.search}toString(e){const t=[];t.push(`search \\`${this.phrase}\\``);const n=[];return n.push(\"  tokens\"),this.unresolvedTokens.length>0&&n.push(this.unresolvedTokens.map(e=>`\\`${e}\\``).join(\" \")),this.resolvedTokens.length>0&&n.push(`// ${this.resolvedTokens.map(e=>`\\`${e}\\``).join(\" \")}`),e&&e.showUnresolved&&this.unresolvedTokens.length>0&&n.push(\"// unresolved search tokens\"),t.push(n.join(\" \")),t.join(\"\\n\")}}class Kt{constructor(e,t){this._id=void 0,this._localName=void 0,this._tags=[],this._sourceConnection=void 0,this._formFactor=void 0,this._consumeConnections=[],d()(e),this._recipe=e,this._name=t}get recipe(){return this._recipe}get id(){return this._id}set id(e){this._id=e}get localName(){return this._localName}set localName(e){this._localName=e}get name(){return this._name}set name(e){this._name=e}get tags(){return this._tags}set tags(e){this._tags=e}get formFactor(){return this._formFactor}set formFactor(e){this._formFactor=e}get sourceConnection(){return this._sourceConnection}set sourceConnection(e){this._sourceConnection=e}get consumeConnections(){return this._consumeConnections}get spec(){return this.sourceConnection&&this.sourceConnection.getSlotSpec()?this.sourceConnection.particle.getSlotSpecByName(this.name):{isSet:!1,tags:[]}}get handles(){const e=[];if(this.sourceConnection&&this.sourceConnection.getSlotSpec())for(const t of this.sourceConnection.particle.getSlotSpecByName(this.name).handles){const n=this.sourceConnection.particle.connections[t];(n||n.handle)&&e.push(n.handle)}return e}_copyInto(e,t){let n=void 0;return t.has(this)?t.get(this):(!this.sourceConnection&&this.id&&(n=e.findSlot(this.id)),null==n&&((n=e.newSlot(this.name))._id=this.id,n._formFactor=this.formFactor,n._localName=this._localName,n._tags=[...this._tags],n._sourceConnection=t.get(this._sourceConnection),n.sourceConnection&&(n.sourceConnection._providedSlots[n.name]=n)),this._consumeConnections.forEach(e=>{t.get(e)&&null==t.get(e).targetSlot&&t.get(e).connectToSlot(n)}),n)}_startNormalize(){this.localName=null,this._tags.sort()}_finishNormalize(){this._consumeConnections.forEach(e=>d()(Object.isFrozen(e))),this._consumeConnections.sort(jt),Object.freeze(this)}_compareTo(e){let t;return 0!==(t=$t(this.id,e.id))?t:0!==(t=$t(this.localName,e.localName))?t:0!==(t=$t(this.formFactor,e.formFactor))?t:0!==(t=Bt(this._tags,e._tags,$t))?t:0}findHandleByID(e){return this.handles.find(t=>t.id===e)}removeConsumeConnection(e){const t=this._consumeConnections.indexOf(e);d()(t>-1),this._consumeConnections.splice(t,1),0===this._consumeConnections.length&&this.remove()}remove(){this._recipe.removeSlot(this)}isResolved(e){return d()(Object.isFrozen(this)),e&&e.showUnresolved&&(e.details=[],this._sourceConnection||e.details.push(\"missing source-connection\"),this.id||e.details.push(\"missing id\"),e.details=e.details.join(\"; \")),Boolean(this._sourceConnection||this.id)}_isValid(e){return!0}toString(e,t){const n=[];n.push(\"slot\"),this.id&&n.push(`'${this.id}'`),this.tags.length>0&&n.push(this.tags.map(e=>`#${e}`).join(\" \")),n.push(`as ${e&&e.get(this)||this.localName}`);const r=t&&t.showUnresolved&&!this.isResolved(t);return r&&n.push(`// unresolved slot: ${t.details}`),this.id||r?n.join(\" \"):\"\"}}class Zt{constructor(e){this._requires=[],this._particles=[],this._handles=[],this._slots=[],this._localName=void 0,this.annotation=void 0,this._connectionConstraints=[],this._obligations=[],this._verbs=[],this._search=null,this._patterns=[],this._name=e}newConnectionConstraint(e,t,n){const r=new Dt(e,t,n,\"constraint\");return this._connectionConstraints.push(r),r}newObligation(e,t,n){const r=new Dt(e,t,n,\"obligation\");return this._obligations.push(r),r}removeObligation(e){const t=this._obligations.indexOf(e);d()(t>-1),this._obligations.splice(t,1)}removeConstraint(e){const t=this._connectionConstraints.indexOf(e);d()(t>=0),this._connectionConstraints.splice(t,1)}clearConnectionConstraints(){this._connectionConstraints.length=0}newRequireSection(){const e=new Jt(this);return this._requires.push(e),e}newParticle(e){const t=new qt(this,e);return this._particles.push(t),t}removeParticle(e){const t=this._particles.indexOf(e);d()(t>-1),this._particles.splice(t,1);for(const t of Object.values(e._consumedSlotConnections))t.remove()}newHandle(){const e=new Ut(this);return this._handles.push(e),e}removeHandle(e){d()(0===e.connections.length);const t=this._handles.indexOf(e);d()(t>-1),this._handles.splice(t,1)}newSlot(e){const t=new Kt(this,e);return this._slots.push(t),t}addSlot(e){-1===this.slots.indexOf(e)&&this.slots.push(e)}removeSlot(e){d()(0===e.consumeConnections.length);let t=this._slots.indexOf(e);d()(t>-1),this._slots.splice(t,1);for(const n of this.requires)-1!==(t=n.slots.indexOf(e))&&n.slots.splice(t,1)}isResolved(){return d()(Object.isFrozen(this),\"Recipe must be normalized to be resolved.\"),!(this._obligations.length>0)&&(0===this._connectionConstraints.length&&this.requires.every(e=>e.isEmpty())&&(null===this._search||this._search.isResolved())&&this._handles.every(e=>e.isResolved())&&this._particles.every(e=>e.isResolved())&&this.modality.isResolved()&&this.allRequiredSlotsPresent()&&this._slots.every(e=>e.isResolved())&&this.handleConnections.every(e=>e.isResolved())&&this.slotConnections.every(e=>e.isResolved()))}isCompatible(e){return this.particles.every(t=>!t.spec||t.spec.isCompatible(e))}get modality(){return this.particles.filter(e=>Boolean(e.spec&&e.spec.slotConnections.size>0)).map(e=>e.spec.modality).reduce((e,t)=>e.intersection(t),pe.all)}allRequiredSlotsPresent(){for(const e of this.particles){if(0===e.spec.slotConnections.size)continue;let t=!1;for(const[n,r]of e.spec.slotConnections){if(r.isRequired&&!e.consumedSlotConnections[n])return!1;if(e.consumedSlotConnections[n])for(const t of r.provideSlotConnections)if(t.isRequired&&!e.getProvidedSlotByName(n,t.name))return!1;e.consumedSlotConnections[n]&&(t=!0)}if(!t)return!1}return!0}_findDuplicate(e,t){const n=new Set,r=e.find(e=>{if(e.id){if(n.has(e.id))return e;n.add(e.id)}});return r&&t&&t.errors&&t.errors.set(r,`Has Duplicate ${r instanceof Ut?\"Handle\":\"Slot\"} '${r.id}'`),r}_isValid(e){return!this._findDuplicate(this._handles,e)&&!this._findDuplicate(this._slots,e)&&this._handles.every(t=>t._isValid(e))&&this._particles.every(t=>t._isValid(e))&&this._slots.every(t=>t._isValid(e))&&this.handleConnections.every(t=>t._isValid(e))&&this.slotConnections.every(t=>t._isValid(e))&&(!this.search||this.search.isValid())}get requires(){return this._requires}get name(){return this._name}set name(e){this._name=e}get localName(){return this._localName}set localName(e){this._localName=e}get particles(){return this._particles}set particles(e){this._particles=e}get handles(){return this._handles}set handles(e){this._handles=e}get slots(){return this._slots}set slots(e){this._slots=e}get connectionConstraints(){return this._connectionConstraints}get obligations(){return this._obligations}get verbs(){return this._verbs}set verbs(e){this._verbs=e}get search(){return this._search}set search(e){this._search=e}setSearchPhrase(e){d()(!this._search,\"Cannot override search phrase\"),e&&(this._search=new Vt(e))}get slotConnections(){const e=[];return this._particles.forEach(t=>{e.push(...Object.values(t.consumedSlotConnections))}),e}get handleConnections(){const e=[];return this._particles.forEach(t=>{e.push(...Object.values(t.connections)),e.push(...t._unnamedConnections)}),e}isEmpty(){return 0===this.particles.length&&0===this.handles.length&&0===this.slots.length&&0===this._connectionConstraints.length}findHandle(e){for(const t of this.handles)if(t.id===e)return t;return null}findSlot(e){for(const t of this.slots)if(t.id===e)return t;return null}get patterns(){return this._patterns}set patterns(e){this._patterns=e}set description(e){const t=e.find(e=>\"pattern\"===e.name);t&&t.patterns.forEach(e=>this._patterns.push(e)),e.forEach(e=>{if(\"pattern\"!==e.name){const t=this.handles.find(t=>t.localName===e.name);d()(t,`Cannot set description pattern for nonexistent handle ${e.name}.`),t.pattern=e.pattern}})}async digest(){return At(this.toString())}normalize(e){if(Object.isFrozen(this))return e&&e.errors&&e.errors.set(this,\"already normalized\"),!1;if(!this._isValid()){this._findDuplicate(this._handles,e),this._findDuplicate(this._slots,e);const t=t=>t.forEach(t=>!t._isValid(e));return t(this._handles),t(this._particles),t(this._slots),t(this.handleConnections),t(this.slotConnections),!1}for(const e of this._particles)e._startNormalize();for(const e of this._handles)e._startNormalize();for(const e of this._slots)e._startNormalize();const t=this.handleConnections;for(const e of t)e._normalize();t.sort(jt);const n=this.slotConnections;for(const e of n)e._normalize();n.sort(jt),this.search&&this.search._normalize();for(const e of this.requires)e.normalize();for(const e of this._particles)e._finishNormalize();for(const e of this._handles)e._finishNormalize();for(const e of this._slots)e._finishNormalize();const r=new Set,i=new Set,s=new Set,o=[],a=[],l=[];let c=t.filter(e=>!(e.type&&e.type instanceof Ke));c=c.concat(t.filter(e=>!!e.type&&!!(e.type instanceof Ke)));for(const e of c)i.has(e.particle)||(o.push(e.particle),i.add(e.particle)),e.handle&&!r.has(e.handle)&&(a.push(e.handle),r.add(e.handle));for(const e of n)e.targetSlot&&!s.has(e.targetSlot)&&(l.push(e.targetSlot),s.add(e.targetSlot)),Object.values(e.providedSlots).forEach(e=>{s.has(e)||(l.push(e),s.add(e))});const h=this._handles.filter(e=>!r.has(e));h.sort(jt),a.push(...h);const u=this._particles.filter(e=>!i.has(e));u.sort(jt),o.push(...u);const d=this._slots.filter(e=>!s.has(e));return d.sort(jt),l.push(...d),this._particles=o,this._handles=a,this._slots=l,this._connectionConstraints.sort(jt),this._verbs.sort(),this._patterns.sort(),Object.freeze(this._particles),Object.freeze(this._handles),Object.freeze(this._slots),Object.freeze(this._connectionConstraints),Object.freeze(this),!0}clone(e){const t=new Zt(this.name);return null==e&&(e=new Map),this._copyInto(t,e),t._cloneMap=e,t}mergeInto(e){const t=new Map,n=e._handles.length,r=e._particles.length,i=e._slots.length;return this._copyInto(e,t),{handles:e._handles.slice(n),particles:e._particles.slice(r),slots:e._slots.slice(i),cloneMap:t}}_copyInto(e,t){const n=new Map;function r(r){const i=r._copyInto(e,t,n);t.set(r,i)}e._name=this.name,e._verbs=e._verbs.concat(...this._verbs),this._handles.forEach(r),this._particles.forEach(r),this._slots.forEach(r),this._connectionConstraints.forEach(r),this._obligations.forEach(r),e.verbs=e.verbs.slice(),this.search&&this.search._copyInto(e);for(const n of this.requires){const r=e.newRequireSection();n._copyInto(r,t),r._cloneMap=t}e.patterns=e.patterns.concat(this.patterns)}updateToClone(e){const t={};return Object.keys(e).forEach(n=>t[n]=this._cloneMap.get(e[n])),t}_makeLocalNameMap(){const e=new Set;for(const t of this.particles)e.add(t.localName);for(const t of this.handles)e.add(t.localName);for(const t of this.slots)e.add(t.localName);const t=new Map;let n=0;for(const r of this.particles){let i=r.localName;if(!i)do{i=`particle${n++}`}while(e.has(i));t.set(r,i)}n=0;for(const r of this.handles){let i=r.localName;if(!i)do{i=`handle${n++}`}while(e.has(i));t.set(r,i)}n=0;for(const r of this.slots){let i=r.localName;if(!i)do{i=`slot${n++}`}while(e.has(i));t.set(r,i)}return t}toString(e){const t=this._makeLocalNameMap(),n=[],r=this.verbs.length>0?` ${this.verbs.map(e=>`&${e}`).join(\" \")}`:\"\";n.push(`recipe${this.name?` ${this.name}`:\"\"}${r}`),e&&e.showUnresolved&&this.search&&n.push(this.search.toString(e).replace(/^|(\\n)/g,\"$1  \"));for(const t of this._connectionConstraints){let r=t.toString().replace(/^|(\\n)/g,\"$1  \");e&&e.showUnresolved&&(r=r.concat(\" // unresolved connection-constraint\")),n.push(r)}n.push(...this.handles.map(n=>n.toString(t,e)).filter(e=>e).map(e=>e.replace(/^|(\\n)/g,\"$1  \")));for(const r of this.slots){const i=r.toString(t,e);i&&n.push(i.replace(/^|(\\n)/g,\"$1  \"))}for(const r of this.requires)r.isEmpty()||n.push(r.toString(t,e).replace(/^|(\\n)/g,\"$1  \"));for(const r of this.particles)n.push(r.toString(t,e).replace(/^|(\\n)/g,\"$1  \"));if(this.patterns.length>0||this.handles.find(e=>void 0!==e.pattern)){n.push(`  description \\`${this.patterns[0]}\\``);for(let e=1;e<this.patterns.length;++e)n.push(`    pattern \\`${this.patterns[e]}\\``);this.handles.forEach(e=>{e.pattern&&n.push(`    ${e.localName} \\`${e.pattern}\\``)})}if(this._obligations.length>0){n.push(\"  obligations\");for(const r of this._obligations){const i=r.toString(t,e).replace(/^|(\\n)/g,\"$1    \");n.push(i)}}return n.join(\"\\n\")}getFreeHandles(){return this.handles.filter(e=>0===e.connections.length)}get allSpecifiedConnections(){return[].concat(...this.particles.filter(e=>e.spec&&e.spec.connections).map(e=>e.spec.connections.map(t=>({particle:e,connSpec:t}))))}getFreeConnections(e){return this.allSpecifiedConnections.filter(({particle:t,connSpec:n})=>!n.isOptional&&\"descriptions\"!==n.name&&\"host\"!==n.direction&&!t.connections[n.name]&&(!e||Xe.compareTypes({type:e},{type:n.type})))}findHandleByID(e){return this.handles.find(t=>t.id===e)}getUnnamedUntypedConnections(){return this.handleConnections.find(e=>!e.type||!e.name||e.isOptional)}getParticlesByImplFile(e){return this.particles.filter(t=>t.spec&&e.has(t.spec.implFile))}findSlotByID(e){let t=this.slots.find(t=>t.id===e);if(null==t)if(this instanceof Jt)t=this.parent.slots.find(t=>t.id===e);else for(const n of this.requires)if(void 0!==(t=n.slots.find(t=>t.id===e)))break;return t}}class Jt extends Zt{constructor(e,t){super(t),this.parent=e}toString(e,t){null==e&&(e=this._makeLocalNameMap());const n=[];n.push(\"require\"),t&&t.showUnresolved&&this.search&&n.push(this.search.toString(t).replace(/^|(\\n)/g,\"$1  \"));for(const e of this.connectionConstraints){let r=e.toString().replace(/^|(\\n)/g,\"$1  \");t&&t.showUnresolved&&(r=r.concat(\" // unresolved connection-constraint\")),n.push(r)}n.push(...this.handles.map(n=>n.toString(e,t)).filter(e=>e).map(e=>e.replace(/^|(\\n)/g,\"$1  \")));for(const r of this.slots){const i=r.toString(e,t);i&&n.push(i.replace(/^|(\\n)/g,\"$1  \"))}for(const r of this.particles)n.push(r.toString(e,t).replace(/^|(\\n)/g,\"$1  \"));if(this.patterns.length>0||this.handles.find(e=>void 0!==e.pattern)){n.push(`  description \\`${this.patterns[0]}\\``);for(let e=1;e<this.patterns.length;++e)n.push(`    pattern \\`${this.patterns[e]}\\``);this.handles.forEach(e=>{e.pattern&&n.push(`    ${e.localName} \\`${e.pattern}\\``)})}if(this.obligations.length>0){n.push(\"  obligations\");for(const r of this.obligations){const i=r.toString(e,t).replace(/^|(\\n)/g,\"$1    \");n.push(i)}}return n.join(\"\\n\")}}class Yt{constructor(e,t,n,r){this.recipe=e,this.particles=t,this.handles=n,this.reverse=new Map;for(const e of Object.keys(t))this.reverse.set(t[e],e);for(const e of n.keys())this.reverse.set(n.get(e),e);for(const e of Object.keys(r))this.reverse.set(r[e],e)}}class Gt{static makeShape(e,t,n,r){r=r||new Zt;const i={},s=new Map,o={};return e.forEach(e=>i[e]=r.newParticle(e)),t.forEach(e=>s.set(e,r.newHandle())),Object.keys(n).forEach(e=>{Object.keys(n[e]).forEach(t=>{const r=n[e][t];let a=\"=\";r.direction&&(a={\"->\":\"out\",\"<-\":\"in\",\"=\":\"=\"}[r.direction]);const l=r.tags||[];r.localName&&(s.get(r.handle).localName=r.localName);const c=i[e].addConnectionName(t);c.direction=a,s.get(r.handle).tags=l,c.connectToHandle(s.get(r.handle)),o[e+\":\"+t]=i[e].connections[t]})}),new Yt(r,i,s,o)}static recipeToShape(e){const t={};let n=0;e.particles.forEach(e=>t[e.name]=e);const r=new Map;e.handles.forEach(e=>r.set(\"h\"+n++,e));const i={};return e.handleConnections.forEach(e=>i[e.particle.name+\":\"+e.name]=e),new Yt(e,t,r,i)}static find(e,t){function n(e,t,n,i){const{forward:s,reverse:o,score:a}=n;let l=!1;for(const n of e.particles)if(n.spec)for(const e of n.spec.handleConnections){if(o.has(e))continue;if(n.name!==t.particle.name)continue;if(t.name&&t.name!==e.name)continue;const r={in:[\"in\",\"inout\"],out:[\"out\",\"inout\"],\"=\":[\"in\",\"out\",\"inout\"],inout:[\"inout\"],host:[\"host\"]};if(e.direction&&(d()(Object.keys(r).includes(t.direction),`${t.direction} not in ${Object.keys(r)}`),!r[t.direction].includes(e.direction)))continue;const c=n.connections[e.name];if(t.handle&&c&&c.handle&&t.handle.localName&&t.handle.localName!==c.handle.localName)continue;if(o.has(n)){if(o.get(n)!==t.particle)continue}else if(s.has(t.particle))continue;if(t.handle&&c&&c.handle){if(o.has(c.handle)){if(o.get(c.handle)!==t.handle)continue}else if(s.has(t.handle)&&null!==s.get(t.handle))continue;if(\"create\"!==t.handle.fate||\"create\"!==c.handle.fate&&\"create\"!==c.handle.originalFate){if(Boolean(t.handle.immediateValue)!==Boolean(c.handle.immediateValue))continue;if(c.handle.immediateValue){if(!c.handle.immediateValue.equals(t.handle.immediateValue))continue}else if(t.handle.id!==c.handle.id&&t.handle.id!==c.handle.originalId)continue}}const h={forward:new Map(s),reverse:new Map(o),score:a};d()(!h.reverse.has(n)||h.reverse.get(n)===t.particle),d()(!h.forward.has(t.particle)||h.forward.get(t.particle)===n),h.forward.set(t.particle,n),h.reverse.set(n,t.particle),t.handle&&(c&&c.handle?(h.forward.set(t.handle,c.handle),h.reverse.set(c.handle,t.handle)):h.forward.has(t.handle)||(h.forward.set(t.handle,null),h.score-=2)),h.forward.set(t,e),h.reverse.set(e,t),i.push(h),l=!0}if(!1===l){if(n.forward.get(t.particle))return;const s=[];r(e,t.particle,n,s),s.forEach(e=>{t.handle&&!e.forward.has(t.handle)&&(e.forward.set(t.handle,null),e.score-=2),e.forward.set(t,null),e.score-=1,i.push(e)})}}function r(e,t,n,r){const{forward:i,reverse:s,score:o}=n;let a=!1;for(const n of e.particles){if(s.has(n))continue;if(n.name!==t.name)continue;let e=!0;for(const r of Object.keys(n.connections)){const i=n.connections[r];if(!i.handle)continue;const s=t.connections[r];if(s&&s.handle&&s.handle.localName&&s.handle.localName!==i.handle.localName){e=!1;break}}if(!e)continue;const l={forward:new Map(i),reverse:new Map(s),score:o};d()(!l.forward.has(t)||l.forward.get(t)===n),d()(!l.reverse.has(n)||l.reverse.get(n)===t),l.forward.set(t,n),l.reverse.set(n,t),r.push(l),a=!0}if(!1===a){const e={forward:new Map,reverse:new Map,score:0};i.forEach((t,n)=>{d()(!e.forward.has(n)||e.forward.get(n)===t),e.forward.set(n,t)}),s.forEach((t,n)=>{d()(!e.reverse.has(n)||e.reverse.get(n)===t),e.reverse.set(n,t)}),e.forward.has(t)||(e.forward.set(t,null),e.score=n.score-1),r.push(e)}}function i(e,n,r){if(1===n.length){const t=[],{forward:i,reverse:s,score:o}=e;for(const e of r){let r=!0;for(const t of e.tags)if(!n[0].tags.includes(t)){r=!1;break}if(!r)continue;const a={forward:new Map(i),reverse:new Map(s),score:o+1};a.forward.set(e,n[0]),a.reverse.set(n[0],e),t.push(a)}return t}const s=n.pop(),o=i(e,n,r);let a=[];for(const e of o){const n=[...t.handles.values()].filter(t=>null===e.forward.get(t));n.length>0?a=a.concat(i(e,[s],n)):a.concat(e)}return a}let s=[{forward:new Map,reverse:new Map,score:0}];for(const r of t.recipe.handleConnections){const t=[];for(const i of s)n(e,r,i,t);s=t}for(const n of t.recipe.particles){if(Object.keys(n.connections).length>0)continue;if(n.unnamedConnections.length>0)continue;const t=[];for(const i of s)r(e,n,i,t);s=t}const o=e.handles.filter(e=>0===e.connections.length);if(o.length>0){let e=[];for(const n of s){const r=[...t.handles.values()].filter(e=>null===n.forward.get(e));e=r.length>0?e.concat(i(n,o,r)):e.concat(n)}s=e}return s.map(({forward:e,score:n})=>{const r={};return e.forEach((e,n)=>r[t.reverse.get(n)]=e),{match:r,score:n}})}static constructImmediateValueHandle(e,t,n){if(d()(e.type instanceof Ke),!(e.type instanceof Ke&&e.type.interfaceInfo.restrictType(t)))return null;const r=e.type.clone(new Map);r.maybeEnsureResolved();const i=e.recipe.newHandle();return i.id=n.toString(),i.mappedType=r,i.fate=\"copy\",i.immediateValue=t,i}static directionCounts(e){const t={in:0,out:0,inout:0,unknown:0};for(const n of e.connections){let e=n.direction;void 0===t[e]&&(e=\"unknown\"),t[e]++}return t.in+=t.inout,t.out+=t.inout,t}static matchesRecipe(e,t){const n=Gt.recipeToShape(t);return Gt.find(e,n).some(e=>0===e.score)}}\n// @license\nclass Xt{constructor(e){if(this.items=new Map,e)for(let{id:t,value:n,keys:r}of e)r||(r=[]),this.items.set(t,{value:n,keys:new Set(r)})}add(e,t,n){d()(n.length>0&&\"object\"==typeof n,\"add requires a list of keys\");let r=this.items.get(e),i=!1;if(r){let e=!1;for(const t of n)r.keys.has(t)||(e=!0),r.keys.add(t);this._equals(r.value,t)||(d()(e,\"cannot add without new keys. incoming=\"+n.join(\",\")+\" existing=\"+[...r.keys].join(\",\")),r.value=t,i=!0)}else r={value:t,keys:new Set(n)},this.items.set(e,r),i=!0;return i}_equals(e,t){if(Boolean(e)!==Boolean(t))return!1;if(!e)return!0;const n=typeof e;if(n!==typeof t)return!1;if(\"object\"===n){const n=Object.keys(e);return n.length===Object.keys(t).length&&n.every(n=>this._equals(e[n],t[n]))}return JSON.stringify(e)===JSON.stringify(t)}remove(e,t){const n=this.items.get(e);if(!n)return!1;for(const e of t)n.keys.delete(e);const r=0===n.keys.size;return r&&this.items.delete(e),r}toLiteral(){const e=[];for(const[t,{value:n,keys:r}]of this.items.entries())e.push({id:t,value:n,keys:[...r]});return e}toList(){return[...this.items.values()].map(e=>e.value)}has(e){return this.items.has(e)}getKeys(e){const t=this.items.get(e);return t?[...t.keys]:[]}getValue(e){const t=this.items.get(e);return t?t.value:null}get size(){return this.items.size}}class Qt{}!function(e){e.change=\"Change\"}(xt||(xt={}));class en{constructor(e){this.arcId=e,this._debug=!1,d()(void 0!==e,\"Arcs with storage must have ids\")}set debug(e){this._debug=e}async shutdown(){}}class tn{constructor(e){Object.assign(this,e)}}class nn{constructor(e,t,n,r){this.referenceMode=!1,d()(n,\"id must be provided when constructing StorageProviders\"),d()(!e.hasUnresolvedVariable,\"Storage types must be concrete\"),this._type=e,this.listeners=new Map,this.name=t,this.version=0,this.id=n,this.source=null,this._storageKey=r,this.nextLocalID=0}enableReferenceMode(){this.referenceMode=!0}get storageKey(){return this._storageKey}get type(){return this._type}reportExceptionInHost(e){throw e}on(e,t,n){d()(void 0!==n,\"must provide a target to register a storage event handler\");const r=xt[e],i=this.listeners.get(r)||new Map;i.set(t,{target:n}),this.listeners.set(r,i)}off(e,t){const n=xt[e],r=this.listeners.get(n);r&&r.delete(t)}async _fire(e,t){const n=xt[e],r=this.listeners.get(n);if(!r||0===r.size)return;const i=[];for(const[e]of r.entries())i.push(e);await 0;for(const e of i)e(t)}_compareTo(e){let t;return 0!==(t=$t(this.name,e.name))?t:0!==(t=Nt(this.version,e.version))?t:0!==(t=$t(this.source,e.source))?t:0!==(t=$t(this.id,e.id))?t:0}toString(e){const t=[],n=[];return n.push(\"store\"),this.name&&n.push(`${this.name}`),n.push(`of ${this.type.toString()}`),this.id&&n.push(`'${this.id}'`),e&&e.length&&n.push(`${e.join(\" \")}`),this.source&&n.push(`in '${this.source}'`),t.push(n.join(\" \")),this.description&&t.push(`  description \\`${this.description}\\``),t.join(\"\\n\")}get apiChannelMappingId(){return this.id}dispose(){}async modelForSynchronization(){return this.toLiteral()}}class rn extends Qt{constructor(e){super();let t=e.split(\"://\");this.protocol=t[0],d()(\"volatile\"===this.protocol,`can't construct volatile key for protocol ${this.protocol} (input key ${e})`),t=t[1]?t.slice(1).join(\"://\").split(\"^^\"):[],this.arcId=t[0],this.location=t[1],d()(this.toString()===e,`Expected ${e}, but got ${this.toString()} volatile key base.`)}base(){return\"volatile\"}get arcId(){return this._arcId}set arcId(e){this._arcId=e}childKeyForHandle(e){return new rn(\"volatile\")}childKeyForArcInfo(){return new rn(`${this.protocol}://${this.arcId}^^arc-info`)}childKeyForSuggestions(e,t){return new rn(`${this.protocol}://${this.arcId}^^${e}/suggestions/${t}`)}childKeyForSearch(e){return new rn(`${this.protocol}://${this.arcId}^^${e}/search`)}toString(){return void 0!==this.location&&void 0!==this.arcId?`${this.protocol}://${this.arcId}^^${this.location}`:void 0!==this.arcId?`${this.protocol}://${this.arcId}`:`${this.protocol}`}}const sn={};class on extends nn{constructor(){super(...arguments),this.backingStore=null,this.pendingBackingStore=null}static newProvider(e,t,n,r,i){return e instanceof He?new an(e,t,n,r,i):e instanceof qe?new hn(e,t,n,r,i):new ln(e,t,n,r,i)}async ensureBackingStore(){if(this.backingStore)return this.backingStore;if(!this.pendingBackingStore){const e=this.storageEngine.baseStorageKey(this.backingType());this.pendingBackingStore=this.storageEngine.baseStorageFor(this.backingType(),e),this.pendingBackingStore.then(e=>this.backingStore=e)}return this.pendingBackingStore}}class an extends on{constructor(e,t,n,r,i){super(e,n,r,i),this._model=new Xt,this.storageEngine=t,d()(null!==this.version)}backingType(){return this.type.getContainedType()}clone(){const e=new an(this.type,this.storageEngine,this.name,this.id,null);return e.cloneFrom(this),e}async cloneFrom(e){this.referenceMode=e.referenceMode;const t=await e.toLiteral();if(this.referenceMode&&t.model.length>0){await Promise.all([this.ensureBackingStore(),e.ensureBackingStore()]),t.model=t.model.map(({id:e,value:t})=>({id:e,value:{id:t.id,storageKey:this.backingStore.storageKey}}));const n=await e.backingStore.getMultiple(t.model.map(({id:e})=>e));await this.backingStore.storeMultiple(n,[this.storageKey])}this.fromLiteral(t)}async modelForSynchronization(){const e=await this._toList();return{version:this.version,model:e}}async toLiteral(){return{version:this.version,model:this._model.toLiteral()}}fromLiteral({version:e,model:t}){this.version=e,this._model=new Xt(t)}async _toList(){if(this.referenceMode){const e=(await this.toLiteral()).model;if(0===e.length)return[];const t=new Set;e.forEach(e=>t.add(e.value.storageKey)),d()(1===t.size,\"multiple storageKeys in reference set of collection not yet supported.\");t.values().next().value;await this.ensureBackingStore();const n=e.map(e=>e.value.id),r=await this.backingStore.getMultiple(n),i=[];for(let t=0;t<r.length;t++)i.push({id:n[t],value:r[t],keys:e[t].keys});return i}return(await this.toLiteral()).model}async toList(){return(await this._toList()).map(e=>e.value)}async getMultiple(e){return d()(!this.referenceMode,\"getMultiple not implemented for referenceMode stores\"),e.map(e=>this._model.getValue(e))}async storeMultiple(e,t,n=null){d()(!this.referenceMode,\"storeMultiple not implemented for referenceMode stores\"),e.map(e=>this._model.add(e.id,e,t)),this.version++}async get(e){if(this.referenceMode){const t=this._model.getValue(e);return null==t?null:(await this.ensureBackingStore(),await this.backingStore.get(t.id))}return this._model.getValue(e)}traceInfo(){return{items:this._model.size}}async store(e,t,n=null){d()(null!=t&&t.length>0,\"keys required\");const r={value:e,keys:t,effective:void 0};if(this.referenceMode){const n=this.type.getContainedType(),i=this.backingStore?this.backingStore.storageKey:this.storageEngine.baseStorageKey(n);r.effective=this._model.add(e.id,{id:e.id,storageKey:i},t),await this.ensureBackingStore(),await this.backingStore.store(e,t)}else r.effective=this._model.add(e.id,e,t);this.version++,await this._fire(\"change\",new tn({add:[r],version:this.version,originatorId:n}))}async removeMultiple(e,t=null){0===e.length&&(e=this._model.toList().map(e=>({id:e.id,keys:[]}))),e.forEach(e=>{0===e.keys.length&&(e.keys=this._model.getKeys(e.id)),e.value=this._model.getValue(e.id),null!==e.value&&(e.effective=this._model.remove(e.id,e.keys))}),this.version++,this._fire(\"change\",new tn({remove:e,version:this.version,originatorId:t}))}async remove(e,t=[],n=null){0===t.length&&(t=this._model.getKeys(e));const r=this._model.getValue(e);if(null!==r){const i=this._model.remove(e,t);this.version++,await this._fire(\"change\",new tn({remove:[{value:r,keys:t,effective:i}],version:this.version,originatorId:n}))}}clearItemsForTesting(){this._model=new Xt}}class ln extends on{constructor(e,t,n,r,i){super(e,n,r,i),this.localKeyId=0,this.storageEngine=t,this._stored=null,this.backingStore=null}backingType(){return this.type}clone(){const e=new ln(this.type,this.storageEngine,this.name,this.id,null);return e.cloneFrom(this),e}async cloneFrom(e){this.referenceMode=e.referenceMode,e.referenceMode&&e.localModified&&await e._persistChanges();const t=await e.toLiteral();if(this.referenceMode&&t.model.length>0){await Promise.all([this.ensureBackingStore(),e.ensureBackingStore()]),t.model=t.model.map(({id:e,value:t})=>({id:e,value:{id:t.id,storageKey:this.backingStore.storageKey}}));const n=await e.backingStore.getMultiple(t.model.map(({id:e})=>e));await this.backingStore.storeMultiple(n,[this.storageKey])}await this.fromLiteral(t)}async modelForSynchronization(){if(this.referenceMode&&null!==this._stored){const e=this._stored;await this.ensureBackingStore();const t=await this.backingStore.get(e.id);return{version:this.version,model:[{id:e.id,value:t}]}}return super.modelForSynchronization()}async toLiteral(){const e=this._stored,t=null!=e?[{id:e.id,value:e,keys:[]}]:[];return{version:this.version,model:t}}fromLiteral({version:e,model:t}){const n=0===t.length?null:t[0].value;this.referenceMode&&n&&n.rawData&&d()(!1,`shouldn't have rawData ${JSON.stringify(n.rawData)} here`),d()(void 0!==n),this._stored=n,this.version=e}traceInfo(){return{stored:null!==this._stored}}async get(){if(this.referenceMode&&this._stored){const e=this._stored;return await this.ensureBackingStore(),await this.backingStore.get(e.id)}return this._stored}async set(e,t=null,n=null){if(d()(void 0!==e),this.referenceMode&&e){const t=this.type,n=this.backingStore?this.backingStore.storageKey:this.storageEngine.baseStorageKey(t);this._stored={id:e.id,storageKey:n},await this.ensureBackingStore(),await this.backingStore.store(e,[this.storageKey+this.localKeyId++])}else{if(JSON.stringify(this._stored)===JSON.stringify(e)&&null==n)return;this._stored=e}this.version++;const r=this.referenceMode?e:this._stored;await this._fire(\"change\",new tn({data:r,version:this.version,originatorId:t,barrier:n}))}async clear(e=null,t=null){await this.set(null,e,t)}}class cn{constructor(e,t,n,r){this.version=e,this.pageSize=n;const i=[...t];i.sort((e,t)=>e.index-t.index),this.data=i.map(e=>e.value),r||this.data.reverse()}async next(){return 0===this.data.length?{done:!0}:{value:this.data.splice(0,this.pageSize),done:!1}}close(){this.data=[]}}class hn extends on{constructor(e,t,n,r,i){super(e,n,r,i),this.items=new Map,this.cursors=new Map,this.cursorIndex=0}enableReferenceMode(){d()(!1,\"referenceMode is not supported for BigCollection\")}backingType(){return this.type.getContainedType()}async get(e){const t=this.items.get(e);return void 0!==t?t.value:null}async store(e,t,n){d()(null!=t&&t.length>0,\"keys required\"),this.version++,this.items.has(e.id)||this.items.set(e.id,{index:null,value:null,keys:{}});const r=this.items.get(e.id);r.index=this.version,r.value=e,t.forEach(e=>r.keys[e]=this.version)}async remove(e,t,n){this.version++,this.items.delete(e)}async stream(e,t=!0){d()(!isNaN(e)&&e>0),this.cursorIndex++;const n=new cn(this.version,this.items.values(),e,t);return this.cursors.set(this.cursorIndex,n),this.cursorIndex}async cursorNext(e){const t=this.cursors.get(e);if(!t)return{done:!0};const n=await t.next();return n.done&&this.cursors.delete(e),n}async cursorClose(e){const t=this.cursors.get(e);t&&(this.cursors.delete(e),t.close())}cursorVersion(e){const t=this.cursors.get(e);return t?t.version:null}async cloneFrom(e){e.items&&this.fromLiteral(e.toLiteral())}async toLiteral(){const e=[];for(const[t,{index:n,value:r,keys:i}]of this.items.entries())e.push({id:t,index:n,value:r,keys:Object.keys(i)});return{version:this.version,model:e}}fromLiteral({version:e,model:t}){this.version=e,this.items.clear();for(const{id:e,index:n,value:r,keys:i}of t){const t={};for(const e of i)t[e]=n;this.items.set(e,{index:n,value:r,keys:t})}}clearItemsForTesting(){this.items.clear()}}\n// @license\n// @license\nvar un,dn;!function(e){e[e.arc=1]=\"arc\"}(un||(un={})),function(e){e[e.handles=1]=\"handles\"}(dn||(dn={}));class fn extends Qt{constructor(e,t){super();const n=e.match(/^synthetic:\\/\\/([^\\/]+)\\/([^\\/]+)\\/(.+)$/);if(null===n||4!==n.length)throw new Error(`invalid synthetic key: ${e}`);if(this.scope=un[n[1]],this.category=dn[n[2]],this.scope!==un.arc)throw new Error(`invalid scope '${n[1]}' for synthetic key: ${e}`);{this.targetType=new Ye;const e=t.parseStringAsKey(n[3]).childKeyForArcInfo();this.targetKey=e.toString()}if(this.category!==dn.handles)throw new Error(`invalid category '${n[2]}' for synthetic key: ${e}`);this.syntheticType=new Ge}get protocol(){return\"synthetic\"}base(){return d()(!1,\"base not supported for synthetic keys\"),null}get arcId(){return d()(!1,\"arcId not supported for synthetic keys\"),null}childKeyForHandle(e){return d()(!1,\"childKeyForHandle not supported for synthetic keys\"),null}childKeyForArcInfo(){return d()(!1,\"childKeyForArcInfo not supported for synthetic keys\"),null}childKeyForSuggestions(e,t){return d()(!1,\"childKeyForSuggestions not supported for synthetic keys\"),null}childKeyForSearch(e){return d()(!1,\"childKeyForSearch not supported for synthetic keys\"),null}toString(){return`${this.protocol}://${un[this.scope]}/${dn[this.category]}/${this.targetKey}`}}class pn extends nn{constructor(e,t,n,r,i){let s;super(e,void 0,t,n),this.model=[],this.backingStore=void 0,this.targetStore=r,this.storageFactory=i,this.initialized=new Promise(e=>s=e);const o=async e=>{await this.process(e,!1),s(),r.on(\"change\",e=>this.process(e.data,!0),this)};r.get().then(e=>o(e))}async process(e,t){let n;try{if(e){const t=await wn.parse(Me.extractSerialization(e),{});n=t.activeRecipe&&t.activeRecipe.handles}}catch(e){console.warn(`Error parsing manifest at ${this.storageKey}:\\n${e.message}`)}const r=this.model;this.model=[];for(const e of n||[])this.storageFactory.isPersistent(e.storageKey)&&this.model.push(new Fe(e.id,e.storageKey,e.mappedType,e.tags));if(t){const e=function(e,t,n){const r={add:[],remove:[]},i=new Map,s=new Map,o=new Map;for(const t of e){const e=n(t);i.set(e,t),s.set(e,t)}for(const e of t){const t=n(e);i.set(t,e),o.set(t,e)}for(const[e,t]of i)if(s.has(e)){if(o.has(e))continue;r.remove.push(t)}else d()(o.has(e)),r.add.push(t);return r}(r,this.model,JSON.stringify),t=e.add.map(e=>({value:e})),n=e.remove.map(e=>({value:e}));this._fire(\"change\",new tn({add:t,remove:n}))}}async toList(){return await this.initialized,this.model}async toLiteral(){throw new Error(\"unimplemented\")}async cloneFrom(){throw new Error(\"cloneFrom should never be called on SyntheticCollection!\")}async ensureBackingStore(){throw new Error(\"ensureBackingStore should never be called on SyntheticCollection!\")}async getMultiple(e){throw new Error(\"unimplemented\")}async storeMultiple(e,t,n){throw new Error(\"unimplemented\")}async removeMultiple(e,t){throw new Error(\"unimplemented\")}async get(e){throw new Error(\"unimplemented\")}remove(e,t,n){throw new Error(\"unimplemented\")}store(e,t,n){throw new Error(\"unimplemented\")}}const mn={volatile:{storage:class extends en{constructor(e){super(e),this._memoryMap={},this._typeMap={},this.localIDBase=0,this.typePromiseMap={},sn[this.arcId.toString()]=this}async construct(e,t,n){const r=await this._construct(e,t,n);return t instanceof Je||t instanceof qe?r:t.isTypeContainer()&&t.getContainedType()instanceof Je?r:(r.enableReferenceMode(),r)}async _construct(e,t,n){const r=new rn(n);void 0===r.arcId&&(r.arcId=this.arcId.toString()),void 0===r.location&&(r.location=\"volatile-\"+this.localIDBase++);const i=on.newProvider(t,this,void 0,e,r.toString());return void 0!==this._memoryMap[r.toString()]?null:(this._memoryMap[r.toString()]=i,i)}async connect(e,t,n){const r=new rn(n);return r.arcId!==this.arcId.toString()?null==sn[r.arcId]?null:sn[r.arcId].connect(e,t,n):void 0===this._memoryMap[n]?null:this._memoryMap[n]}baseStorageKey(e){const t=new rn(\"volatile\");return t.arcId=this.arcId.toString(),t.location=\"volatile-\"+e.toString(),t.toString()}async baseStorageFor(e,t){if(this._typeMap[t])return this._typeMap[t];if(this.typePromiseMap[t])return this.typePromiseMap[t];const n=this._construct(e.toString(),e.collectionOf(),t);this.typePromiseMap[t]=n;const r=await n;return d()(r,`could not construct baseStorage for key ${t}`),this._typeMap[t]=r,r}parseStringAsKey(e){const t=new rn(e);return void 0===t.arcId&&(t.arcId=this.arcId.toString()),t}},isPersistent:!1},synthetic:{storage:class extends en{constructor(e,t){super(e),this.storageFactory=t}async construct(e,t,n){throw new Error(\"cannot construct SyntheticStorage providers; use connect\")}async connect(e,t,n){d()(null===t,\"SyntheticStorage does not accept a type parameter\");const r=new fn(n,this.storageFactory),i=await this.storageFactory.connect(e,r.targetType,r.targetKey);return null===i?null:new pn(r.syntheticType,e,n,i,this.storageFactory)}async baseStorageFor(e,t){throw new Error(\"baseStorageFor not implemented for SyntheticStorage\")}baseStorageKey(e,t){throw new Error(\"baseStorageKey not implemented for SyntheticStorage\")}parseStringAsKey(e){return new fn(e,this.storageFactory)}},isPersistent:!1}};class gn{constructor(e){this.arcId=e,this._storageInstances={},Object.keys(mn).forEach(t=>{const{storage:n,isPersistent:r}=mn[t];this._storageInstances[t]={storage:new n(e,this),isPersistent:r}})}static register(e,t){mn[e]=t}getInstance(e){const t=this._storageInstances[e.split(\":\")[0]];if(!t)throw new Error(`unknown storage protocol: ${e}`);return t}_storageForKey(e){if(!e)throw new Error(\"key is required\");return this.getInstance(e).storage}isPersistent(e){return e&&this.getInstance(e).isPersistent}async construct(e,t,n){return await this._storageForKey(n).construct(e,t,n)}async connect(e,t,n){return await this._storageForKey(n).connect(e,t,n)}async connectOrConstruct(e,t,n){const r=this._storageForKey(n);let i=await r.connect(e,t,n);return null==i&&(i=await r.construct(e,t,n)),i}async baseStorageFor(e,t){return await this._storageForKey(t).baseStorageFor(e,t)}baseStorageKey(e,t){return this._storageForKey(t).baseStorageKey(e,t)}parseStringAsKey(e){return this._storageForKey(e).parseStringAsKey(e)}newKey(e,t){}async shutdown(){for(const e of Object.values(this._storageInstances))await e.storage.shutdown()}}\n/**\n * @license\n * Copyright (c) 2017 Google Inc. All rights reserved.\n * This code may only be used under the BSD style license found at\n * http://polymer.github.io/LICENSE.txt\n * Code distributed by Google as part of this project is also\n * subject to an additional IP rights grant found at\n * http://polymer.github.io/PATENTS.txt\n */class yn extends Error{constructor(e,t){super(t),this.location=e}}class _n{constructor(e,t,n,r,i,s){this.referenceMode=!1,this.type=e,this.id=t,this.name=n,this.storageKey=r,this.storageProviderFactory=i,this.originalId=s}get version(){}get description(){}async inflate(){const e=await this.storageProviderFactory.connect(this.id,this.type,this.storageKey);return d()(null!=e,\"inflating missing storageKey \"+this.storageKey),e.originalId=this.originalId,e}toLiteral(){}toString(e){const t=[],n=[];return n.push(\"store\"),this.name&&n.push(`${this.name}`),n.push(`of ${this.type.toString()}`),this.id&&n.push(`'${this.id}'`),e&&e.length&&n.push(`${e.join(\" \")}`),t.push(n.join(\" \")),this.description&&t.push(`  description \\`${this.description}\\``),t.join(\"\\n\")}_compareTo(e){let t;return 0!==(t=$t(this.name,e.name))?t:0!==(t=$t(this.id,e.id))?t:0}}class bn{traverse(e){if([\"string\",\"number\",\"boolean\"].includes(typeof e)||null===e)return;if(e instanceof Array){for(const t of e)this.traverse(t);return}d()(e.location,\"expected manifest node to have `location`\"),d()(e.kind,\"expected manifest node to have `kind`\");let t=!1;const n=()=>{if(!t){t=!0;for(const t of Object.keys(e))[\"location\",\"kind\",\"model\"].includes(t)||this.traverse(e[t])}};this.visit(e,n),n()}visit(e,t){}}const vn=new Set;class wn{constructor({id:e}){if(this._recipes=[],this._imports=[],this._particles={},this._schemas={},this._stores=[],this._interfaces=[],this.storeTags=new Map,this._fileName=null,this._idGenerator=lt.newSession(),this._storageProviderFactory=void 0,this._meta=new It,this._resources={},this.storeManifestUrls=new Map,this.errors=[],d()(e instanceof ct||\"string\"==typeof e),e instanceof ct)this._id=e;else{const t=e.split(\":\");this._id=ct._newIdInternal(t[0],t.slice(1))}}get id(){return this._meta.name?ct.fromString(this._meta.name):this._id}get storageProviderFactory(){return null==this._storageProviderFactory&&(this._storageProviderFactory=new gn(this.id)),this._storageProviderFactory}get recipes(){return this._recipes}get allRecipes(){return[...new Set(this._findAll(e=>e._recipes))]}get activeRecipe(){return this._recipes.find(e=>\"active\"===e.annotation)}get particles(){return Object.values(this._particles)}get allParticles(){return[...new Set(this._findAll(e=>Object.values(e._particles)))]}get imports(){return this._imports}get schemas(){return this._schemas}get fileName(){return this._fileName}get stores(){return this._stores}get allStores(){return[...this._findAll(e=>e._stores)]}get interfaces(){return this._interfaces}get meta(){return this._meta}get resources(){return this._resources}applyMeta(e){void 0!==this._storageProviderFactory&&d()(e.name===this._meta.name||null==e.name,\"can't change manifest ID after storage is constructed\"),this._meta.apply(e)}async createStore(e,t,n,r,i){const s=await this.storageProviderFactory.construct(n,e,i||`volatile://${this.id}`);return d()(null!==s.version),s.name=t,this.storeManifestUrls.set(s.id,this.fileName),this._addStore(s,r)}_addStore(e,t){return this._stores.push(e),this.storeTags.set(e,t||[]),e}newStorageStub(e,t,n,r,i,s){return this._addStore(new _n(e,n,t,r,this.storageProviderFactory,s),i)}_find(e){let t=e(this);if(!t)for(const n of this._imports)if(t=n._find(e))break;return t}*_findAll(e){yield*e(this);for(const t of this._imports)yield*t._findAll(e)}findSchemaByName(e){return this._find(t=>t._schemas[e])}findTypeByName(e){const t=this.findSchemaByName(e);if(t)return new Ue(t);const n=this.findInterfaceByName(e);return n?new Ke(n):void 0}findParticleByName(e){return this._find(t=>t._particles[e])}findParticlesByVerb(e){return[...this._findAll(t=>Object.values(t._particles).filter(t=>t.primaryVerb===e))]}findStoreByName(e){return this._find(t=>t._stores.find(t=>t.name===e))}findStoreById(e){return this._find(t=>t._stores.find(t=>t.id===e))}findStoreTags(e){return this._find(t=>t.storeTags.get(e))}findManifestUrlForHandleId(e){return this._find(t=>t.storeManifestUrls.get(e))}findStoresByType(e,t={tags:[],subtype:!1}){const n=t.tags||[],r=t.subtype||!1;return[...this._findAll(t=>t._stores.filter(i=>(function(t){const n=e.resolvedType();if(!n.isResolved())return e instanceof He==t.type instanceof He&&e instanceof qe==t.type instanceof qe;if(r){const[e,r]=De.unwrapPair(t.type,n);return e instanceof Ue&&r instanceof Ue&&e.entitySchema.isMoreSpecificThan(r.entitySchema)}return Xe.compareTypes({type:t.type},{type:e})})(i)&&function(e,t){return 0===n.filter(n=>!e.storeTags.get(t).includes(n)).length}(t,i)))].filter(t=>!!Ut.effectiveType(e,[{type:t.type,direction:t.type instanceof Ke?\"host\":\"inout\"}]))}findInterfaceByName(e){return this._find(t=>t._interfaces.find(t=>t.name===e))}findRecipesByVerb(e){return[...this._findAll(t=>t._recipes.filter(t=>t.verbs.includes(e)))]}generateID(){return this._idGenerator.newChildId(this.id)}static async load(e,t,n){n=n||{};let{registry:r,id:i}=n;return(r=r||{})&&r[e]?await r[e]:(r[e]=(async()=>{const n=await t.loadResource(e);return d()(void 0!==n,`${e} unable to be loaded by Manifest parser`),await wn.parse(n,{id:i,fileName:e,loader:t,registry:r})})(),await r[e])}static async parse(e,t){t=t||{};let{session_id:n,fileName:r,loader:i,registry:s,context:o,throwImportErrors:a}=t;s=s||{};const l=`manifest:${r}:`;function c(e){for(const t of e.errors){if(t.key){if(vn.has(t.key))continue;vn.add(t.key)}console.warn(h(t).message)}}function h(t,n){if(!(t instanceof yn||t.location))return t;const i=e.split(\"\\n\")[t.location.start.line-1];let s=t.message||\"\";if(i){let e=1;e=t.location.end.line===t.location.start.line?t.location.end.column-t.location.start.column:i.length-t.location.start.column,e=Math.max(1,e);let o,a=\"\";for(let e=0;e<t.location.start.column-1;e++)a+=\" \";for(let t=0;t<e;t++)a+=\"^\";s=`${o=n?\"Parse error in\":\"Post-parse processing error caused by\"} '${r}' line ${t.location.start.line}.\\n${t.message}\\n  ${i}\\n  ${a}`}const o=new yn(t.location,s);return n||(o.stack=t.stack),o}let u=[];try{u=Tt(e)}catch(e){throw h(e,!0)}const d=new wn({id:l});d._fileName=r,o&&d._imports.push(o);try{await Promise.all(u.map(async e=>{if(\"import\"===e.kind){const t=i.path(d.fileName),n=i.join(t,e.path);try{d._imports.push(await wn.load(n,i,{registry:s}))}catch(t){d.errors.push(t),d.errors.push(new yn(e.location,`Error importing '${n}'`))}}}));const e=async(e,t)=>{for(const n of u)n.kind===e&&(wn._augmentAstWithTypes(d,n),await t(n))};await e(\"meta\",e=>d.applyMeta(e.items)),await e(\"resource\",e=>this._processResource(d,e)),await e(\"schema\",e=>this._processSchema(d,e)),await e(\"interface\",e=>this._processInterface(d,e)),await e(\"particle\",e=>this._processParticle(d,e,i)),await e(\"store\",e=>this._processStore(d,e,i)),await e(\"recipe\",e=>this._processRecipe(d,e,i))}catch(e){throw c(d),h(e,!1)}if(c(d),t.throwImportErrors&&d.errors.length>0)throw d.errors[0];return d}static _augmentAstWithTypes(e,t){(new class extends bn{constructor(){super()}visit(t,n){switch(n(),t.kind){case\"schema-inline\":{const n=[],r=[],i=[];for(const s of t.names){const t=e.resolveTypeName(s);t&&t.schema&&t.schema.isAlias?r.push(t.schema):i.push(s),t&&t.schema&&n.push(t.schema)}const s={};for(let{name:e,type:r}of t.fields){for(const i of n)if(r){const n=i.fields[e];if(n&&!Pe.typesEqual(n,r))throw new yn(t.location,`Type of '${e}' does not match schema (${r} vs ${n})`)}else r=i.fields[e];if(!r)throw new yn(t.location,`Could not infer type of '${e}' field`);s[e]=r}let o=new Pe(i,s);for(const e of r)if(!(o=Pe.union(e,o)))throw new yn(t.location,\"Could not merge schema aliases\");return void(t.model=new Ue(o))}case\"variable-type\":{const e=t.constraint&&t.constraint.model;return void(t.model=We.make(t.name,e,null))}case\"slot-type\":{const e={};for(const n of Object.keys(t.fields)){const r=t.fields[n];e[r.name]=r.value}return void(t.model=Ze.make(e.formFactor,e.handle))}case\"type-name\":{const n=e.resolveTypeName(t.name);if(!n)throw new yn(t.location,`Could not resolve type reference to type name '${t.name}'`);if(n.schema)t.model=new Ue(n.schema);else{if(!n.iface)throw new yn(t.location,\"Expected {iface} or {schema}\");t.model=new Ke(n.iface)}return}case\"collection-type\":return void(t.model=new He(t.type.model));case\"big-collection-type\":return void(t.model=new qe(t.type.model));case\"reference-type\":return void(t.model=new Je(t.type.model));default:return}}}).traverse(t)}static _processSchema(e,t){let n;const r={};let i=[...t.names];for(const e of t.items)switch(e.kind){case\"schema-field\":{const t=e;if(r[t.name])throw new yn(t.location,`Duplicate definition of field '${t.name}'`);r[t.name]=t.type;break}case\"description\":if(n)throw new yn(e.location,\"Duplicate schema description\");n=e;break;default:throw new yn(e.location,`unknown parser artifact ${e.kind} while processing schema`)}for(const n of t.parents){const s=e.findSchemaByName(n);if(!s)throw new yn(t.location,`Could not find parent schema '${n}'`);for(const[e,i]of Object.entries(s.fields))if(r[e]&&!Pe.typesEqual(r[e],i))throw new yn(t.location,`'${n}' defines incompatible type for field '${e}'`);Object.assign(r,s.fields),i.push(...s.names)}i=[i[0],...i.filter(e=>e!==i[0])];const s=t.alias||i[0];if(!s)throw new yn(t.location,\"Schema defined without name or alias\");const o=new Pe(i,r,n);t.alias&&(o.isAlias=!0),e._schemas[s]=o}static _processResource(e,t){e._resources[t.name]=t.data}static _processParticle(e,t,n){if(d()(null==t.implFile||null!==t.args,\"no valid body defined for this particle\"),t.args||(t.args=[]),t.hasParticleArgument){const n=new yn(t.location,\"Particle uses deprecated argument body\");n.key=\"hasParticleArgument\",e._warnings.push(n)}t.implFile&&n&&(t.implFile=n.join(e.fileName,t.implFile));const r=e=>{for(const t of e)t.type=t.type.model,r(t.dependentConnections)};r(t.args),e._particles[t.name]=new it(t)}static _processInterface(e,t){const n=[];for(const e of t.args){const t={name:void 0,type:void 0,direction:e.direction};\"*\"!==e.name&&(t.name=e.name),e.type&&(t.type=e.type.model),n.push(t)}const r=[];for(const e of t.slots)r.push({direction:e.direction,name:e.name,isRequired:e.isRequired,isSet:e.isSet});const i=new Ce(t.name,n,r);e._interfaces.push(i)}static _processRecipe(e,t,n){const r=e._newRecipe(t.name);t.annotation&&(r.annotation=t.annotation),t.verbs&&(r.verbs=t.verbs),this._buildRecipe(e,r,t.items)}static _buildRecipe(e,t,n){const r={require:n.filter(e=>\"require\"===e.kind),handles:n.filter(e=>\"handle\"===e.kind),byHandle:new Map,requireHandles:n.filter(e=>\"requireHandle\"===e.kind),byRequireHandle:new Map,particles:n.filter(e=>\"particle\"===e.kind),byParticle:new Map,slots:n.filter(e=>\"slot\"===e.kind),bySlot:new Map,byName:new Map,connections:n.filter(e=>\"connection\"===e.kind),search:n.find(e=>\"search\"===e.kind),description:n.find(e=>\"description\"===e.kind)};d()(!(r.handles.length>0&&r.requireHandles.length>0),\"Inconsistent handle definitions\");const i=r.handles.length>0?r.handles:r.requireHandles;for(const n of i){const i=t.newHandle(),s=n.ref;if(s.id){i.id=s.id;const t=e.findStoreById(i.id);t&&i.mapToStorage(t)}else if(s.name){const t=e.findStoreByName(s.name);d()(t,`Could not find handle ${s.name}`),i.mapToStorage(t)}i.tags=s.tags,n.name&&(d()(!r.byName.has(n.name),`duplicate handle name: ${n.name}`),i.localName=n.name,r.byName.set(n.name,{item:n,handle:i})),i.fate=n.fate?n.fate:null,r.byHandle.set(i,n)}const s=(t,n)=>{switch(n.targetType){case\"particle\":{const r=e.findParticleByName(n.particle);if(!r)throw new yn(t.location,`could not find particle '${n.particle}'`);if(null!==n.param&&!r.handleConnectionMap.has(n.param))throw new yn(t.location,`param '${n.param}' is not defined by '${n.particle}'`);return new zt(r,n.param)}case\"localName\":if(!r.byName.has(n.name))throw new yn(t.location,`local name '${n.name}' does not exist in recipe`);if(null==n.param&&0===n.tags.length&&r.byName.get(n.name).handle)return new Ft(r.byName.get(n.name).handle);throw new yn(t.location,\"references to particles by local name not yet supported\");case\"tag\":return new Lt(n.tags);default:throw new yn(t.location,`endpoint ${n.targetType} not supported`)}};for(const e of r.connections){const n=s(e,e.from),r=s(e,e.to);t.newConnectionConstraint(n,r,e.direction)}r.search&&(t.search=new Vt(r.search.phrase,r.search.tokens));for(const e of r.slots){const n=t.newSlot(void 0);e.ref.id&&(n.id=e.ref.id),e.ref.tags&&(n.tags=e.ref.tags),e.name&&(d()(!r.byName.has(e.name),`Duplicate slot local name ${e.name}`),n.localName=e.name,r.byName.set(e.name,n)),r.bySlot.set(n,e)}for(const n of r.particles){const i=t.newParticle(n.ref.name);if(i.verbs=n.ref.verbs,!(t instanceof Jt)&&n.ref.name){const t=e.findParticleByName(n.ref.name);if(!t)throw new yn(n.location,`could not find particle ${n.ref.name}`);i.spec=t.clone()}n.name&&(d()(!r.byName.has(n.name)),i.localName=n.name,r.byName.set(n.name,{item:n,particle:i})),r.byParticle.set(i,n);for(const e of n.slotConnections){if(\"provide\"===e.direction)throw new yn(n.location,\"invalid slot connection: provide slot must be dependent\");let s=i.consumedSlotConnections[e.param];if(!s){if(void 0!==i.spec){if(!i.spec.slotConnections.has(e.param))throw new yn(e.location,`Consumed slot '${e.param}' is not defined by '${i.name}'`);e.dependentSlotConnections.forEach(e=>{if(!i.getSlotSpecByName(e.param))throw new yn(e.location,`Provided slot '${e.param}' is not defined by '${i.name}'`)})}s=i.addSlotConnection(e.param)}s.tags=e.tags||[],e.dependentSlotConnections.forEach(e=>{if(\"consume\"===e.direction)throw new yn(n.location,\"invalid slot connection: consume slot must not be dependent\");if(0!==e.dependentSlotConnections.length)throw new yn(n.location,\"invalid slot connection: provide slot must not have dependencies\");if(t instanceof Jt){const n=t.parent.slots.find(t=>t.localName===e.name);void 0!==n&&(s.providedSlots[e.param]=n,n.sourceConnection=s,n.name=e.param)}let i=s.providedSlots[e.param];if(i){if(e.name)if(r.byName.has(e.name)){const n=r.byName.get(e.name);d()(n!==i),d()(!n.name&&i),d()(!n.sourceConnection&&i.sourceConnection),i.id=n.id,i.tags=n.tags,r.byName.set(e.name,i),t.removeSlot(n)}else r.byName.set(e.name,i);r.bySlot.set(i,e)}else i=r.byName.get(e.name);i||((i=t.newSlot(e.param)).localName=e.name,i.sourceConnection=s,e.name&&(d()(!r.byName.has(e.name)),r.byName.set(e.name,i)),r.bySlot.set(i,e)),s.providedSlots[e.param]||(s.providedSlots[e.param]=i),i.localName=e.name})}}for(const[n,i]of r.byParticle){for(const s of i.connections){let i;\"*\"===s.param?i=n.addUnnamedConnection():(i=n.connections[s.param])||(i=n.addConnectionName(s.param)),i.tags=s.target?s.target.tags:[];const o={\"->\":\"out\",\"<-\":\"in\",\"=\":\"inout\",consume:\"`consume\",provide:\"`provide\"}[s.dir];if(i.direction){if(!(i.direction===o||\"inout\"===o||\"host\"===i.direction&&\"in\"===o||\"`consume\"===i.direction&&\"in\"===o||\"`provide\"===i.direction&&\"out\"===o))throw new yn(s.location,`'${s.dir}' not compatible with '${i.direction}' param of '${n.name}'`)}else{if(\"*\"!==s.param&&void 0!==n.spec)throw new yn(s.location,`param '${s.param}' is not defined by '${n.name}'`);i.direction=o}let a,l;if(s.target&&s.target.name){let e=r.byName.get(s.target.name);if(e){if(!e.item)throw new yn(s.location,`did not expect ${e} expected handle or particle`)}else{const n=t.newHandle();n.tags=[],n.localName=s.target.name,n.fate=\"create\",n.item={kind:\"handle\"},e={item:n.item,handle:n},r.byName.set(n.localName,e),r.byHandle.set(n,n.item)}if(\"handle\"===e.item.kind||\"requireHandle\"===e.item.kind)a=e.handle;else{if(\"particle\"!==e.item.kind)throw new yn(s.location,`did not expect ${e.item.kind}`);l=e.particle}}if(s.target&&s.target.particle){const t=e.findParticleByName(s.target.particle);if(!t)throw new yn(s.target.location,`Could not find hosted particle '${s.target.particle}'`);if(!(a=Gt.constructImmediateValueHandle(i,t,e.generateID())))throw new yn(s.target.location,`Hosted particle '${t.name}' does not match interface '${i.name}'`)}if(l){let e;s.target.param?(e=l.connections[s.target.param])||(e=l.addConnectionName(s.target.param)):e=l.addUnnamedConnection(),(a=e.handle)||(a=t.newHandle(),e.connectToHandle(a))}a&&i.connectToHandle(a)}for(const e of i.slotConnections){let i=r.byName.get(e.name);i?(d()(r.bySlot.has(i)),i.name||(i.name=e.param),d()(i===r.byName.get(e.name),`Target slot ${i.name} doesn't match slot connection ${e.param}`)):e.name&&(t instanceof Jt&&void 0!==(i=t.parent.slots.find(t=>t.localName===e.name))&&(r.bySlot.set(i,e),e.name&&r.byName.set(e.name,i)),null==i&&((i=t.newSlot(e.param)).localName=e.name,r.byName.set(e.name,i),r.bySlot.set(i,e))),i&&n.consumedSlotConnections[e.param].connectToSlot(i)}}if(r.description&&r.description.description&&(t.description=r.description.description),r.require)for(const n of r.require){const r=t.newRequireSection();this._buildRecipe(e,r,n.items)}}resolveTypeName(e){const t=this.findSchemaByName(e);if(t)return{schema:t};const n=this.findInterfaceByName(e);return n?{iface:n}:null}static async _processStore(e,t,n){const r=t.name;let i=t.id;const s=t.originalId,o=t.type.model;null==i&&(i=`${e._id}store${e._stores.length}`);let a,l,c,h,u=t.tags;if(null==u&&(u=[]),\"storage\"===t.origin)return void e.newStorageStub(o,r,i,t.source,u,s);if(\"file\"===t.origin)t.source=n.join(e.fileName,t.source),a=await n.loadResource(t.source);else if(\"resource\"===t.origin&&(l=t.source,null==(a=e.resources[l])))throw new yn(t.location,`Resource '${l}' referenced by store '${i}' is not defined in this manifest`);try{c=JSON.parse(a)}catch(e){throw new yn(t.location,`Error parsing JSON from '${l}' (${e.message})'`)}if(o instanceof He)h=o.collectionType;else if(o instanceof qe)h=o.bigCollectionType;else{if(0===c.length)return void await wn._createStore(e,o,r,i,u,t,s);c=c.slice(c.length-1),h=o}if(h instanceof Ue){let n=!1;if(c=c.map(t=>{if(null==t)return null;n=n||t.$id;const r=t.$id||e.generateID().toString();return delete t.$id,{id:r,rawData:t}}),!t.id&&!n){i=`${i}:${await At(JSON.stringify(c.map(e=>e.rawData)))}`}}const d=t.version||0,f=await wn._createStore(e,o,r,i,u,t,s);if(c.length>0&&c[0].rawData&&c[0].rawData.storageKey){let t=c[0].rawData.storageKey;t=e.findStoreByName(t).storageKey,c=c.map(({id:e,rawData:n})=>({id:e,storageKey:t}))}else c.length>0&&(f.referenceMode=!1);let p;p=o instanceof He?c.map(e=>({id:e.id,value:e,keys:new Set([e.id])})):o instanceof qe?c.map(e=>{const t=e.rawData.$index;return delete e.rawData.$index,{id:e.id,index:t,value:e,keys:new Set([e.id])}}):c.map(e=>({id:e.id,value:e})),await f.fromLiteral({version:d,model:p})}static async _createStore(e,t,n,r,i,s,o){const a=await e.createStore(t,n,r,i);return a.source=s.source,a.description=s.description,a.originalId=o,a}_newRecipe(e){const t=new Zt(e);return this._recipes.push(t),t}toString(e){e=e||{};const t=[];return this._imports.forEach(n=>{if(e.recursive){t.push(`// import '${n.fileName}'`);n.toString(e);t.push(`${n.toString(e)}`)}else t.push(`import '${n.fileName}'`)}),Object.values(this._schemas).forEach(e=>{t.push(e.toManifestString())}),Object.values(this._particles).forEach(e=>{t.push(e.toString())}),this._recipes.forEach(n=>{t.push(n.toString(e))}),[...this.stores].sort(jt).forEach(e=>{t.push(e.toString(this.storeTags.get(e).map(e=>`#${e}`)))}),t.join(\"\\n\")}get idGeneratorForTesting(){return this._idGenerator}}\n/**\n * @license\n * Copyright (c) 2019 Google Inc. All rights reserved.\n * This code may only be used under the BSD style license found at\n * http://polymer.github.io/LICENSE.txt\n * Code distributed by Google as part of this project is also\n * subject to an additional IP rights grant found at\n * http://polymer.github.io/PATENTS.txt\n */\n/**\n * @license\n * Copyright (c) 2019 Google Inc. All rights reserved.\n * This code may only be used under the BSD style license found at\n * http://polymer.github.io/LICENSE.txt\n * Code distributed by Google as part of this project is also\n * subject to an additional IP rights grant found at\n * http://polymer.github.io/PATENTS.txt\n */\nconst Sn=i()(process.argv.slice(2),{string:[\"output\"],boolean:[\"verbose\",\"help\"],alias:{o:\"output\",v:\"verbose\"},default:{output:\"bundle.zip\",verbose:!1}});(Sn.help||0===Sn._.length)&&(console.log(\"Usage\\n  $ bundle [-options] [file ...]\\n\\nDescription\\n  Creates a zip bundle containing all transitive dependencies of an Arcs manifest.\\n\\nOptions\\n  --output, -o   name of the created bundle, bundle.zip by default\\n  --verbose, -v  list bundled files\\n  --help         usage info\\n\\nExamples\\n  $ bundle feature.recipes\\n  $ bundle -v -o mybundle.zip recipes/feature.recipes recipes/extra_stuff.manifest\"),process.exit()),async function(e,t,n){const r=await async function(...e){e=e.map(e=>l.a.isAbsolute(e)?e:l.a.resolve(process.cwd(),e).split(l.a.sep).join(\"/\"));const t=new kt,n=await Promise.all(e.map(e=>wn.load(e,t))),r=new Set;n.forEach(e=>(function e(t,n){n.add(t.fileName);for(const e of t.particles)n.add(e.implFile);for(const e of t.stores)e instanceof nn&&e.source&&n.add(e.source);for(const r of t.imports)e(r,n)})(e,r));const i=[...r].sort(),s=function(e){const t=e[0],n=e[e.length-1];let r=0;for(let e=0;e<Math.min(t.length,n.length)&&t[e]===n[e];e++)\"/\"===t[e]&&(r=e+1);return r}(i),o=n.map(e=>e.fileName);return i.map(e=>({filePath:e,bundlePath:e.substr(s),entryPoint:o.includes(e)}))}(...e);n&&(console.log(\"Bundled files:\"),r.forEach(e=>console.log(e.filePath))),new Promise(e=>{o.a.mkdirSync(l.a.dirname(t),{recursive:!0});const n=new h.a;for(const e of r)n.file(e.bundlePath,o.a.readFileSync(e.filePath));n.file(\"bundle-manifest.mf\",r.filter(e=>e.entryPoint).map(e=>`entry-point: ${e.bundlePath}\\n`).join(\"\")),n.generateNodeStream({streamFiles:!0}).pipe(o.a.createWriteStream(t)).on(\"finish\",()=>e())})}(Sn._,Array.isArray(Sn.o)?Sn.o[0]:Sn.o,Sn.verbose)}]);","extractedComments":[]}